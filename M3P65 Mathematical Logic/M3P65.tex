\documentclass{article}

\usepackage{amssymb}
\usepackage{amsthm}
\usepackage[UKenglish]{babel}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{mathtools}
\usepackage{tikz-cd}
\usepackage{csquotes}

\newcommand{\F}{\mathbb{F}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\A}{\mathcal{A}}
\newcommand{\B}{\mathcal{B}}
\renewcommand{\L}{\mathcal{L}}

\newcommand{\val}[1]{\left. #1 \right\rvert}
\newcommand{\rb}[1]{\left( #1 \right)}
\renewcommand{\sb}[1]{\left[ #1 \right]}
\newcommand{\cb}[1]{\left\{ #1 \right\}}
\newcommand{\ab}[1]{\left\langle #1 \right\rangle}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\two}[2]{\begin{pmatrix} #1 \\ #2 \end{pmatrix}}
\newcommand{\three}[3]{\begin{pmatrix} #1 & #2 & #3 \end{pmatrix}}

\newcommand{\notb}[1]{\rb{\neg #1}}
\newcommand{\orb}[2]{\rb{#1 \lor #2}}
\newcommand{\andb}[2]{\rb{#1 \land #2}}
\newcommand{\impb}[2]{\rb{#1 \rightarrow #2}}
\newcommand{\iffb}[2]{\rb{#1 \leftrightarrow #2}}
\newcommand{\fab}[1]{\rb{\forall #1}}
\newcommand{\teb}[1]{\rb{\exists #1}}
\newcommand{\eqb}[2]{\rb{#1 = #2}}
\newcommand{\inb}[2]{\rb{#1 \in #2}}
\newcommand{\nib}[2]{\rb{#1 \notin #2}}
\newcommand{\subb}[2]{\rb{#1 \subseteq #2}}

\theoremstyle{definition}\newtheorem{definition}{Definition}[subsection]
\theoremstyle{definition}\newtheorem{remark}[definition]{Remark}
\theoremstyle{definition}\newtheorem*{example}{Example}
\theoremstyle{definition}\newtheorem*{note}{Note}
\newtheorem{proposition}[definition]{Proposition}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{theorem}[definition]{Theorem}
\newtheorem{corollary}[definition]{Corollary}
\newtheorem{axiom}{Axiom}

\pagestyle{fancy}
\lhead{M3P65 Mathematical Logic}
\rhead{Autumn 2018}

\title{M3P65 Mathematical Logic}
\author{Lectured by Prof David Evans \\ Typeset by David Kurniadi Angdinata}
\date{Autumn 2018}

\setcounter{section}{-1}

\begin{document}

\maketitle

\vfill

\tableofcontents

\pagebreak

\marginpar{Lecture 1 \\ Thursday \\ 04/10/18}

\section{Introduction}

The module is concerned with some of the foundational issues of mathematics, namely propositional logic, predicate logic, and set theory. These topics have applications to other areas of mathematics. Formal logic has applications via model theory and ZFC provides an essential toolkit for handling infinite objects.

In propositional logic, we look at the way simple propositions can be built into more complicated ones using connectives and make precise how the truth or falsity of the component statements influences the truth or falsity of the compound statement. This is done using truth tables and can be useful for testing the validity of various forms of reasoning. It provides a way of analysing deductions of the form 'If the following statements are true, ..., then so is ...'. A completely symbolic process of deduction and describe the formal deduction system for propositional calculus. The propositional formulas are regarded as strings of symbols and we give rules for deducing a new formula from a given collection of formulas. We want these deduction rules to have the property that anything that could be deduced using truth tables (so by considering truth or falsity of the various statements), can be deduced in this formal way, and vice versa. This is the soundness and completeness of our formal system.

In predicate logic, we analyse mathematics using quantifiers. We introduce the notion of a first-order structure, which is general enough to include many of the algebraic objects you come across in mathematics, such as groups, rings, and vector spaces. We then have to be precise about the formulas which make statements about these structures, and give a precise definition of what it means for a particular formula to be true in a structure. This is quite intricate, and the clever part is in getting the definitions right, but it corresponds to ordinary mathematical usage. Once this is done, we set up a formal deduction system for predicate logic. This parallels what we did for propositional logic, but is much harder. Nevertheless, the end result is the same. The formulas which are produced by our formal deduction system are precisely the formulas which are true in all first-order structures. This is Gödel's completeness theorem.

Set theory provides the basic foundations and the language in which most of modern mathematics can be expressed, as well as the means for discussing the various notions of sizes of infinity. For example, although the set of natural numbers, the set of integers and the set of real numbers are all infinite, there is a very natural sense in which the first two have the same size, whereas the third is strictly bigger. This is expressed properly in the notion of cardinality. To avoid paradoxes and inconsistencies, we have to be careful about what collections of objects we allow to be called sets. This is done by the Zermelo-Fraenkel axioms, which essentially tell us how we are allowed to create new sets out of old ones. Of course, having laid down these quite rigid rules, we have to show that they are sufficiently flexible to allow us to talk about everyday objects of mathematics. There are also situations in mathematics where an extra axiom is needed, the axiom of choice. For example without this axiom, we cannot show that every vector space has a basis. But it also has some slightly counterintuitive consequences, and we shall also look at some of these.

The lecture notes should be fairly self-contained, but the following books might also be of use. You might find that the notation which they use differs form that used in the lectures. You will be able to find various lecture notes on the internet. Some will be good, others not so good.

\begin{enumerate}
\item P Johnstone, Notes on logic and set theory, 1987
\item P J Cameron, Sets, logic and categories, 1999
\item A G Hamilton, Logic for mathematicians, 1988
\item R Cori and D Lascar, Mathematical logic: a course with exercises parts I and II, 2001
\item K Hrbaček and T Jech, Introduction to set theory 3rd edition, 1999
\end{enumerate}

$ 1 $ is very concise, but covers a surprising amount. $ 2 $ is friendlier, but skips some of the harder material. $ 4 $ is quite comprehensive and also available in the original French. $ 3 $ is useful for the logic part and $ 5 $ is a very nice introduction to set theory.

\section{Propositional logic}

Let $ p $ be 'Mr Jones is happy' and $ q $ be 'Mrs Jones is unhappy'. Then 'If Mr Jones is happy, then Mrs Jones is unhappy and if Mrs Jones is unhappy then Mr Jones is unhappy, so Mr Jones is unhappy' is
$$ \impb{\andb{\impb{p}{q}}{\impb{q}{\notb{p}}}}{\notb{p}}. $$

\subsection{Propositional formulas}

The following are \textbf{truth table rules}.

\begin{definition}
\label{def:1.1.1}
A \textbf{proposition} is a statement that is either \textbf{True} $ \rb{T} $ or \textbf{False} $ \rb{F} $, which can be represented symbolically as \textbf{propositional variables}
$$ p, \quad q, \quad \dots \qquad p_1, \quad p_2, \quad \dots. $$
We combine basic propositions into others using \textbf{connectives}, which are one of
\begin{itemize}
\item \textbf{negation 'not'} $ \notb{p} $, which has value $ F $ if $ p $ has value $ T $ and has value $ T $ if $ p $ has value $ F $,
\item \textbf{conjunction 'and'} $ \andb{p}{q} $, which has value $ T $ iff $ p $ and $ q $ both have value $ T $,
\item \textbf{disjunction 'or'} $ \orb{p}{q} $, which has value $ T $ iff at least one of $ p $ and $ q $ has value $ T $,
\item \textbf{implication 'implies'} $ \impb{p}{q} $, which has value $ F $ iff $ p $ has value $ T $ and $ q $ has value $ F $, and
\item \textbf{biconditional 'iff'} $ \iffb{p}{q} $, which has value $ T $ iff $ p $ and $ q $ has the same value.
\end{itemize}
This can be represented in the following \textbf{truth table}.
$$
\begin{array}{cc|cccc}
p & q & \andb{p}{q} & \orb{p}{q} & \impb{p}{q} & \iffb{p}{q} \\
\hline
T & T & T & T & T & T \\
T & F & F & T & F & F \\
F & T & F & T & T & F \\
F & F & F & F & T & T
\end{array}.
$$
\end{definition}

\begin{definition}
\label{def:1.1.2}
A \textbf{propositional formula} is obtained in the following way.
\begin{enumerate}
\item Any propositional variable is a formula.
\item If $ \phi $ and $ \psi $ are formulas, then so are
$$ \notb{\phi}, \qquad \andb{\phi}{\psi}, \qquad \orb{\phi}{\psi}, \qquad \impb{\phi}{\psi}, \qquad \iffb{\phi}{\psi}. $$
\item Any formula arises in this way.
\end{enumerate}
\end{definition}

\begin{example}
Some formulas are
$$ p_1, \qquad p_2, \qquad \notb{p_1}, \qquad \impb{p_1}{\notb{p_2}}, \qquad \impb{\impb{p_1}{\notb{p_2}}}{p_2}. $$
Some not formulas are
$$ p_1 \land p_2 \quad \rb{\text{missing brackets}}, \qquad )( \neg p_1 \quad \rb{\text{not well-formed}}. $$
\end{example}

Because of the brackets, every formula is either a propositional variable or is built from shorter formulas in a unique way. Arguments are often proved by induction on length of the formula, or the number of connectives in the formula.

\begin{definition}
\hfill
\begin{enumerate}
\item Let $ n \in \N $. A \textbf{truth function} of $ n $ variables is a function $ f : \cb{T, F}^n \to \cb{T, F} $, where $ \cb{T, F}^n = \cb{\rb{x_1, \dots, x_n} \mid x_i \in \cb{T, F}} $.
\item Suppose $ \phi $ is a formula whose variables are amongst $ p_1, \dots, p_n $. We obtain a truth function $ F_\phi : \cb{T, F}^n \to \cb{T, F} $ whose value at $ \rb{x_1, \dots, x_n} $ is the truth value of $ \phi $ when $ p_i $ has value $ x_i $ for $ i = 1, \dots, n $, computed using the rules in \ref{def:1.1.1}. $ F_\phi $ is the \textbf{truth function of $ \phi$}.
\end{enumerate}
\end{definition}

\begin{example}
$ \phi : \impb{\impb{p}{\notb{q}}}{p} $ has the following truth table.
$$
\begin{array}{cc|ccc}
p & q & \notb{q} & \impb{p}{\notb{q}} & \phi \\
\hline
T & T & F & F & T \\
T & F & T & T & T \\
F & T & F & T & F \\
F & F & T & T & F
\end{array}.
$$
So for example $ F_\phi\rb{T, F} = T $. This can also be written in a \textbf{condensed form} as follows.
$$
\begin{array}{rcrlcl}
((p & \rightarrow & (\neg & q)) & \rightarrow & p) \\
\hline
T & F & F & T & T & T \\
T & T & T & F & T & T \\
F & T & F & T & F & F \\
F & T & T & F & F & F
\end{array}.
$$
\end{example}

\marginpar{Lecture 2 \\ Friday \\ 05/10/18}

\begin{example}
The truth function of $ \impb{\andb{\impb{p}{q}}{\impb{q}{\notb{p}}}}{\notb{p}} $ is always $ T $.
\end{example}

\begin{definition}
\hfill
\begin{enumerate}
\item A propositional formula is a \textbf{tautology} if its truth function $ F_\phi $ always has value $ T $.
\item Say that formulas $ \phi, \psi $ are \textbf{logically equivalent} (LE) if they have the same truth function, that is $ F_\phi = F_\psi $.
\end{enumerate}
\end{definition}

\begin{remark}
\hfill
\label{rem:1.1.5}
\begin{enumerate}
\item $ \phi, \psi $ are LE iff $ \iffb{\phi}{\psi} $ is a tautology.
\item Suppose $ \phi $ is a formula with variables $ p_1, \dots, p_n $ and $ \phi_1, \dots, \phi_n $ are formulas with variables $ q_1, \dots q_r $. For each $ i \le n $ substitute $ \phi_i $ in place of $ p_i $ in $ \phi $. Then the result is a formula $ \theta $, and if $ \phi $ is a tautology, then so is $ \theta $.
\end{enumerate}
\end{remark}

\begin{example}
Check $ \impb{\impb{\notb{p_2}}{\notb{p_1}}}{\impb{p_1}{p_2}} $ is a tautology. So by \ref{rem:1.1.5}(2), if $ \phi_1 $ and $ \phi_2 $ are any formulas, then $ \impb{\impb{\notb{\phi_2}}{\notb{\phi_1}}}{\impb{\phi_1}{\phi_2}} $ is a tautology.
\end{example}

\begin{proof}[Proof of \ref{rem:1.1.5}]
\hfill
\begin{enumerate}
\item Easy.
\item Prove $ F_\phi\rb{p_1, \dots, p_r} = F_\phi\rb{F_{\phi_1}\rb{q_1, \dots, q_r}, \dots, F_{\phi_n}\rb{q_1, \dots, q_r}} $ by induction on the number of connectives in $ \phi $.
\end{enumerate}
\end{proof}

\begin{example}
The following are LE formulas.
\begin{enumerate}
\item $ \andb{p_1}{\andb{p_2}{p_3}} $ is LE to $ \andb{\andb{p_1}{p_2}}{p_3} $.
\item $ \orb{p_1}{\orb{p_2}{p_3}} $ is LE to $ \orb{\orb{p_1}{p_2}}{p_3} $.
\item $ \orb{p_1}{\andb{p_2}{p_3}} $ is LE to $ \andb{\orb{p_1}{p_2}}{\orb{p_1}{p_3}} $.
\item $ \andb{p_1}{\orb{p_2}{p_3}} $ is LE to $ \orb{\andb{p_1}{p_2}}{\andb{p_1}{p_3}} $.
\item $ \notb{\notb{p_1}} $ is LE to $ p_1 $.
\item $ \notb{\andb{p_1}{p_2}} $ is LE to $ \orb{\notb{p_1}}{\notb{p_2}} $.
\item $ \notb{\orb{p_1}{p_2}} $ is LE to $ \andb{\notb{p_1}}{\notb{p_2}} $.
\end{enumerate}
By the first two examples, we usually omit brackets as $ \rb{p_1 \land p_2 \land p_3} $ and $ \rb{p_1 \lor p_2 \lor p_3} $ without ambiguity.
\end{example}

\begin{note}
By \ref{rem:1.1.5} we obtain, for formulas $ \phi, \psi, \chi $, $ \andb{\phi}{\andb{\psi}{\chi}} $ is LE to $ \andb{\andb{\phi}{\psi}}{\chi} $, etc.
\end{note}

\begin{lemma}
There are $ 2^{2^n} $ truth functions of $ n $ variables.
\end{lemma}

\begin{proof}
A truth function is a function $ F : \cb{T, F}^n \to \cb{T, F} $. $ \abs{\cb{T, F}^n} = 2^n $ and for each $ \overline{x} \in \cb{T, F}^n $, $ F\rb{\overline{x}} \in \cb{T, F} $. Hence the result.
\end{proof}

\begin{definition}
A set of connectives is \textbf{adequate} if for every $ n \ge 1 $, every truth function of $ n $ variables is the truth function of some formula which involves only connectives from the set, and variables $ p_1, \dots, p_n $.
\end{definition}

\begin{theorem}
\label{thm:1.1.9}
The set $ \cb{\neg, \land, \lor} $ is adequate.
\end{theorem}

\begin{proof}
Let $ G : \cb{T, F}^n \to \cb{T, F} $.
\begin{enumerate}
\item $ G\rb{\overline{v}} = F $ for all $ \overline{v} \in \cb{T, F}^n $. Take $ \phi $ to be $ \andb{p_1}{\notb{p_1}} $. Then $ F_\phi = G $.
\item List the $ \overline{v} \in \cb{T, F}^n $ with $ G\rb{\overline{v}} = T $ as $ \overline{v_1}, \dots, \overline{v_r} $. Write $ \overline{v_i} = \rb{v_{i1}, \dots, v_{in}} $, where each $ v_{ij} $ is $ T $ or $ F $. Define
$$ q_{ij} = \begin{cases} p_j & v_{ij} = T \\ \notb{p_j} & v_{ij} = F \end{cases}. $$
So $ q_{ij} $ has value $ T $ iff $ p_j $ has value $ v_{ij} $. Let $ \psi_i $ be $ \rb{q_{i1} \land \dots \land q_{in}} $. Then $ F_{\psi_i}\rb{\overline{v}} = T $ iff each $ q_{ij} $ has value $ T $, iff $ \overline{v} = \overline{v_i} $. Let $ \theta $ be $ \rb{\psi_1 \lor \dots \lor \psi_r} $. Then $ F_\theta\rb{\overline{v}} = T $ iff $ F_{\psi_i}\rb{\overline{v}} = T $ for some $ i $, iff $ \overline{v} = \overline{v_i} $ for some $ i \le r $. Thus $ F_\theta\rb{\overline{v}} = T $ iff $ G\rb{\overline{v}} = T $, that is $ F_\theta = G $.
\end{enumerate}
As $ \phi $ and $ \theta $ were constructed using only $ \neg, \land, \lor $, \ref{thm:1.1.9} follows.
\end{proof}

A formula $ \theta $ as in case $ 2 $ is said to be in \textbf{disjunctive normal form} (DNF).

\begin{corollary}
Suppose $ \chi $ is a formula whose truth function is not always $ F $. Then $ \chi $ is LE to a formula in DNF.
\end{corollary}

\begin{proof}
Take $ G = F_\chi $ and apply case $ 2 $ of \ref{thm:1.1.9}.
\end{proof}

\begin{example}
Let $ \chi $ be $ \impb{\impb{p_1}{p_2}}{\notb{p_2}} $. Then $ F_\chi\rb{\overline{v}} = T $ iff $ \overline{v} = \rb{T, F}, \rb{F, F} $. Thus its DNF is
$$ \orb{\andb{p_1}{\notb{p_2}}}{\andb{\notb{p_1}}{\notb{p_2}}}. $$
\end{example}

\begin{corollary}
The following sets of connectives are adequate.
\begin{enumerate}
\item $ \cb{\neg, \lor} $.
\item $ \cb{\neg, \land} $.
\item $ \cb{\neg, \rightarrow} $.
\end{enumerate}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item By \ref{thm:1.1.9} it is sufficient to show that we can express $ \land $ using $ \neg, \lor $, which holds since $ \andb{p_1}{p_2} $ is LE to $ \notb{\orb{\notb{p_1}}{\notb{p_2}}} $.
\item By \ref{thm:1.1.9} it is sufficient to show that we can express $ \lor $ using $ \neg, \land $, which holds since $ \orb{p_1}{p_2} $ is LE to $ \notb{\andb{\notb{p_1}}{\notb{p_2}}} $.
\item By \ref{thm:1.1.9} it is sufficient to show that we can express $ \lor $ using $ \neg, \rightarrow $, which holds since $ \orb{p_1}{p_2} $ is LE to $ \impb{\notb{p}}{q} $.
\end{enumerate}
\end{proof}

\marginpar{Lecture 3 \\ Monday \\ 08/10/18}

\begin{example}
The following are not adequate.
\begin{enumerate}
\item $ \cb{\land, \lor} $. If $ \phi $ is built using $ \land, \lor $, then $ F_\phi\rb{T, \dots, T} = T $. Proof by induction on number of connectives.
\item $ \cb{\neg, \leftrightarrow} $. (TODO Exercise: proof)
\end{enumerate}
\end{example}

\begin{example}
The NOR connective $ \downarrow $ has the following truth table.
$$
\begin{array}{cc|c}
p & q & \rb{p \downarrow q} \\
\hline
T & T & F \\
T & F & F \\
F & T & F \\
F & F & T
\end{array}.
$$
$ \rb{p \downarrow q} $ is LE to $ \andb{\notb{p}}{\notb{q}} $. $ \cb{\downarrow} $ is adequate. $ \rb{p \downarrow p} $ is LE to $ \notb{p} $ and $ \rb{\rb{p \downarrow p} \downarrow \rb{q \downarrow q}} $ is LE to $ \andb{p}{q} $. So as $ \cb{\neg, \lor} $ is adequate, so is $ \cb{\downarrow} $.
\end{example}

\subsection{A formal system for propositional logic}

Idea is to try to generate all tautologies from basic assumptions, or axioms, using appropriate deduction rules. A very general definition is the following.

\begin{definition}
\hfill
\begin{enumerate}
\item A \textbf{formal deduction system} $ \Sigma $ has the following ingredients.
\begin{enumerate}
\item a non-zero \textbf{alphabet} $ A $ of symbols,
\item a non-empty subset $ \mathcal{F} $ of the set of all finite sequences, or \textbf{strings}, of elements of $ A $, the \textbf{formulas} of $ \Sigma $,
\item a subset $ \A \subseteq \mathcal{F} $ called the \textbf{axioms} of $ \Sigma $, and
\item a collection of \textbf{deduction rules}.
\end{enumerate}
\item A \textbf{proof} in $ \Sigma $ is a finite sequence of formulas in $ \mathcal{F} $ $ \phi_1, \dots, \phi_n $ such that each $ \phi_i $ is either an axiom in $ \A $ or is obtained from $ \phi_1, \dots, \phi_{i - 1} $ using one of the deduction rules. The last, or any, formula in a proof is a \textbf{theorem} of $ \Sigma $.
\end{enumerate}
Write $ \vdash_\Sigma \phi $ for '$ \phi $ is a theorem of $ \Sigma $'.
\end{definition}

\begin{remark}
\hfill
\begin{enumerate}
\item If $ \phi \in \A $, then $ \vdash_\Sigma \phi $.
\item We should have an algorithm to test whether a string is a formula and whether it is an axiom. Then a computer can systematically generate all possible proofs in $ \Sigma $, and check whether something is a proof. Say $ \Sigma $ is \textbf{recursive} in this case.
\end{enumerate}
\end{remark}

The main example is the following.

\begin{definition}
\label{def:1.2.3}
The formal system \textbf{$ L $} for propositional logic has the following.
\begin{enumerate}
\item Alphabet. Alphabets are
\begin{enumerate}
\item variables $ p_1, p_2, \dots $,
\item connectives $ \neg, \rightarrow $, and
\item punctuation $ ( $, $ ) $.
\end{enumerate}
\item Formulas. \textbf{$ L $-formulas} are defined in \ref{def:1.1.2} for $ \neg, \rightarrow $ by
\begin{enumerate}
\item any variable $ p_i $ is a formula,
\item if $ \phi, \psi $ are formulas so are $ \notb{\phi}, \impb{\phi}{\psi} $, and
\item any formula arises in this way.
\end{enumerate}
\item Axioms. Suppose $ \phi, \psi, \chi $ are $ L $-formulas, then the axioms of $ L $ are
\begin{enumerate}[label=(A\arabic*)]
\item $ \impb{\phi}{\impb{\psi}{\phi}} $,
\item $ \impb{\impb{\phi}{\impb{\psi}{\chi}}}{\impb{\impb{\phi}{\psi}}{\impb{\phi}{\chi}}} $, and
\item $ \impb{\impb{\notb{\psi}}{\notb{\phi}}}{\impb{\phi}{\psi}} $.
\end{enumerate}
\item Deduction rules. \textbf{Modus Ponens} (MP), from formulas $ \phi, \impb{\phi}{\psi} $, deduce $ \psi $.
\end{enumerate}
\end{definition}

\begin{example}
Suppose $ \phi $ is an $ L $-formula. Then $ \vdash_L \impb{\phi}{\phi} $. Here is a proof in $ L $.
\begin{align*}
1 \qquad & \impb{\phi}{\impb{\impb{\phi}{\phi}}{\phi}} & \rb{\text{A1}} \\
2 \qquad & \impb{\impb{\phi}{\impb{\impb{\phi}{\phi}}{\phi}}}{\impb{\impb{\phi}{\impb{\phi}{\phi}}}{\impb{\phi}{\phi}}} & \rb{\text{A2}} \\
3 \qquad & \impb{\impb{\phi}{\impb{\phi}{\phi}}}{\impb{\phi}{\phi}} & \rb{1, 2, \text{MP}} \\
4 \qquad & \impb{\phi}{\impb{\phi}{\phi}} & \rb{\text{A1}} \\
5 \qquad & \impb{\phi}{\phi} & \rb{3, 4, \text{MP}}
\end{align*}
\end{example}

\marginpar{Lecture 4 \\ Thursday \\ 11/10/18}

\begin{definition}
Suppose $ \Gamma $ is a set of $ L $-formulas. A \textbf{deduction from $ \Gamma $} is a finite sequence of $ L $-formulas $ \phi_1, \dots, \phi_n $ such that each $ \phi_i $ is either an axiom, a formula in $ \Gamma $, or is obtained from previous formulas $ \phi_1, \dots, \phi_{i - 1} $ using the deduction rule MP. Write $ \Gamma \vdash_L \phi $ if there is a deduction from $ \Gamma $ ending in $ \phi $. Say $ \phi $ is a \textbf{consequence} of $ \Gamma $. So $ \emptyset \vdash_L \phi $ is the same as $ \vdash_L \phi $.
\end{definition}

\begin{theorem}[Deduction theorem]
\label{thm:1.2.5}
Suppose $ \Gamma $ is a set of $ L $-formulas and $ \phi, \psi $ are $ L $-formulas. Suppose $ \Gamma \cup \cb{\phi} \vdash_L \psi $. Then $ \Gamma \vdash_L \impb{\phi}{\psi} $.
\end{theorem}

\begin{corollary}[Hypothetical syllogism]
Suppose $ \phi, \psi, \chi $ are $ L $-formulas and $ \vdash_L \impb{\phi}{\psi} $ and $ \vdash_L \impb{\psi}{\chi} $. Then $ \vdash_L \impb{\phi}{\chi} $.
\end{corollary}

\begin{proof}
Use deduction theorem with $ \Gamma = \emptyset $. Show $ \cb{\phi} \vdash_L \chi $. Here is a deduction of $ \chi $ from $ \phi $.
\begin{align*}
1 \qquad & \impb{\phi}{\psi} & \rb{\text{theorem of } L} \\
2 \qquad & \impb{\psi}{\chi} & \rb{\text{theorem of } L} \\
3 \qquad & \phi & \rb{\text{assumption}} \\
4 \qquad & \psi & \rb{1, 3, \text{MP}} \\
5 \qquad & \chi & \rb{2, 4, \text{MP}}
\end{align*}
Thus $ \cb{\phi} \vdash_L \chi $. By deduction theorem, $ \emptyset \vdash_L \impb{\phi}{\chi} $, that is $ \vdash_L \impb{\phi}{\chi} $.
\end{proof}

\begin{proposition}
\label{prop:1.2.7}
Suppose $ \phi, \psi $ are $ L $-formulas. Then
\begin{enumerate}
\item $ \vdash_L \impb{\notb{\psi}}{\impb{\psi}{\phi}} $,
\item $ \cb{\notb{\psi}, \psi} \vdash_L \phi $, and
\item $ \vdash_L \impb{\impb{\notb{\phi}}{\phi}}{\phi} $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Problem sheet $ 1 $.
\item By $ 1 $ and MP twice.
\item Suppose $ \chi $ is any formula. Then $ \cb{\notb{\phi}, \impb{\notb{\phi}}{\phi}} \vdash_L \chi $ by $ 2 $ and MP. Let $ \alpha $ be any axiom and let $ \chi $ be $ \notb{\alpha} $. Apply deduction theorem to get $ \cb{\impb{\notb{\phi}}{\phi}} \vdash_L \impb{\notb{\phi}}{\notb{\alpha}} $. Using A3 and MP we get $ \cb{\impb{\notb{\phi}}{\phi}} \vdash_L \impb{\alpha}{\phi} $. As $ \alpha $ is an axiom we get from MP $ \cb{\impb{\notb{\phi}}{\phi}} \vdash_L \phi $. Now use deduction theorem to obtain $ \vdash_L \impb{\impb{\notb{\phi}}{\phi}}{\phi} $.
\end{enumerate}
\end{proof}

\begin{proof}[Proof of \ref{thm:1.2.5}]
Suppose $ \Gamma \cup \cb{\phi} \vdash_L \psi $ using a deduction of length $ n $. Show by induction on $ n $ that $ \Gamma \vdash_L \impb{\phi}{\psi} $.
\begin{enumerate}
\item Base step is $ n = 1 $. In this case $ \psi $ is either an axiom or in $ \Gamma $ or is $ \phi $. In the first two cases $ \Gamma \vdash_L \psi $ is a one line deduction. Using the A1 axiom $ \impb{\psi}{\impb{\phi}{\psi}} $ and MP we obtain $ \Gamma \vdash_L \impb{\phi}{\psi} $. If $ \phi $ is $ \psi $ we have $ \Gamma \vdash_L \impb{\phi}{\phi} $ by \ref{def:1.2.3}. This finishes the base case.
\item Inductive step. In our deduction of $ \psi $ from $ \Gamma \cup \cb{\phi} $ either $ \psi $ is an axiom, or in $ \Gamma $, or is $ \phi $, or $ \psi $ is obtained from earlier steps using MP. In the first three cases we argue as in the base case to get $ \Gamma \vdash_L \impb{\phi}{\psi} $. In the last case there are formulas $ \chi $, $ \impb{\chi}{\psi} $ earlier in the deduction. We use the inductive hypothesis to get $ \Gamma \vdash_L \impb{\phi}{\chi} $ and $ \Gamma \vdash_L \impb{\phi}{\impb{\chi}{\psi}} $. We have the A2 axiom $ \impb{\impb{\phi}{\impb{\psi}{\chi}}}{\impb{\impb{\phi}{\psi}}{\impb{\phi}{\chi}}} $. This A2 axiom and MP twice we obtain $ \Gamma \vdash_L \impb{\phi}{\chi} $ as required, completing the inductive step.
\end{enumerate}
\end{proof}

\marginpar{Lecture 5 \\ Friday \\ 12/10/18}

\subsection{Soundness and completeness of $ L $}

\begin{theorem}[Soundness theorem of $ L $]
\label{thm:1.3.1}
Suppose $ \phi $ is a theorem of $ L $. Then $ \phi $ is a tautology.
\end{theorem}

\begin{definition}
A \textbf{propositional valuation} $ v $ is an assignment of truth values to the propositional variables $ p_1, p_2, \dots $. So $ v\rb{p_i} \in \cb{T, F} $ for $ i \in \N $.
\end{definition}

\begin{note}
Using the truth table rules, this assigns a truth value $ v\rb{\phi} \in \cb{T, F} $ to every $ L $-formula $ \phi $ satisfying $ v\rb{\notb{\phi}} \ne v\rb{\phi} $, etc. See problem sheet $ 2 $, question $ 3 $(b).
\end{note}

By induction on the length of a proof of $ \phi $ it is enough to show
\begin{enumerate}
\item every axiom is a tautology, and
\item MP preserves tautologies, that is if $ \psi, \impb{\psi}{\chi} $ are tautologies, so is $ \chi $.
\end{enumerate}

\begin{proof}[Proof of \ref{thm:1.3.1}]
\hfill
\begin{enumerate}
\item Use truth tables, or argue as follows. For A2, suppose for a contradiction there is a valuation $ v $ with $ v\rb{\impb{\impb{\phi}{\impb{\psi}{\chi}}}{\impb{\impb{\phi}{\psi}}{\impb{\phi}{\chi}}}} = F $. Then
\begin{equation}
\label{eq:1}
v\rb{\impb{\phi}{\impb{\psi}{\chi}}} = T,
\end{equation}
and
\begin{equation}
\label{eq:2}
v\rb{\impb{\impb{\phi}{\psi}}{\impb{\phi}{\chi}}} = F.
\end{equation}
By $ \rb{\ref{eq:2}} $, $ v\rb{\impb{\phi}{\psi}} = T $ and $ v\rb{\impb{\phi}{\chi}} = F $. So by the latter, $ v\rb{\phi} = T $ and $ v\rb{\chi} = F $. By the former, $ v\rb{\psi} = T $. This contradicts $ \rb{\ref{eq:1}} $. (TODO Exercise: for A1 and A3)
\item If $ v $ is a valuation and $ v\rb{\psi} = T $ and $ v\rb{\impb{\psi}{\chi}} = T $ then $ v\rb{\chi} = T $.
\end{enumerate}
\end{proof}

\begin{theorem}[Generalisation of Soundness theorem of $ L $]
Suppose $ \Gamma $ is a set of formulas and $ \phi $ a formula with $ \Gamma \vdash_L \phi $. Suppose $ v $ is a valuation with $ v\rb{\psi} = T $ for all $ \psi \in \Gamma $. Then $ v\rb{\phi} = T $.
\end{theorem}

\begin{proof}
Same proof. (TODO Exercise)
\end{proof}

\begin{theorem}[Completeness theorem of $ L $]
\label{thm:1.3.4}
Suppose $ \phi $ is a tautology, that is $ v\rb{\phi} = T $ for every valuation $ v $. Then $ \vdash_L \phi $.
\end{theorem}

The following are steps in the proof.
\begin{enumerate}
\item If $ v\rb{\phi} = T $ for all valuations $ v $, want to show $ \vdash_L \phi $.
\item Try to prove a generalisation. Suppose that for every $ v $ with $ v\rb{\Gamma} = T $, that is $ v\rb{\psi} = T $ for all $ \psi \in \Gamma $, we have $ v\rb{\phi} = T $. Then $ \Gamma \vdash_L \phi $.
\item Equivalently, if $ \Gamma \not\vdash_L \phi $, show there is a valuation $ v $ with $ v\rb{\Gamma} = T $ and $ v\rb{\phi} = F $.
\end{enumerate}

\begin{definition}
A set $ \Gamma $ of $ L $-formulas is \textbf{consistent} if there is no $ L $-formula $ \phi $ such that $ \Gamma \vdash_L \phi $ and $ \Gamma \vdash_L \notb{\phi} $.
\end{definition}

\begin{proposition}
\label{prop:1.3.7}
Suppose $ \Gamma $ is a consistent set of $ L $-formulas and $ \Gamma \not\vdash_L \phi $. Then $ \Gamma \cup \cb{\notb{\phi}} $ is consistent.
\end{proposition}

\begin{proof}
Suppose not. So there is some formula $ \psi $ with
\begin{equation}
\label{eq:3}
\Gamma \cup \cb{\notb{\phi}} \vdash_L \psi,
\end{equation}
and
\begin{equation}
\label{eq:4}
\Gamma \cup \cb{\notb{\phi}} \vdash_L \notb{\psi}.
\end{equation}
Apply deduction theorem to $ \rb{\ref{eq:4}} $, $ \Gamma \vdash_L \impb{\notb{\phi}}{\notb{\psi}} $. By A3 and MP we obtain $ \Gamma \vdash_L \impb{\psi}{\phi} $. By this, $ \rb{\ref{eq:3}} $, and MP, $ \Gamma \cup \cb{\notb{\phi}} \vdash_L \phi $. By deduction theorem, $ \Gamma \vdash_L \impb{\notb{\phi}}{\phi} $. By \ref{prop:1.2.7}(3), $ \vdash_L \impb{\impb{\notb{\phi}}{\phi}}{\phi} $. So by these and MP, $ \Gamma \vdash_L \phi $. This contradicts $ \Gamma \not\vdash_L \phi $.
\end{proof}

\begin{proposition}[Lindenbaum's lemma]
\label{prop:1.3.8}
Suppose $ \Gamma $ is a consistent set of $ L $-formulas. Then there is a consistent set of formulas $ \Gamma^* \supseteq \Gamma $ such that for every $ \phi $ either $ \Gamma^* \vdash_L \phi $ or $ \Gamma^* \vdash_L \notb{\phi} $.
\end{proposition}

Sometimes say $ \Gamma^* $ is \textbf{complete}.

\begin{proof}
The set of $ L $-formulas is countable, so we can list the $ L $-formulas as $ \phi_0, \phi_1, \dots $. It is countable because the alphabet $ \neg, \rightarrow, ), (, p_1, p_2, \dots $ is countable, and the formulas are finite sequences from this alphabet. Define inductively sets of formulas $ \Gamma_0 \subseteq \Gamma_1 \subseteq \dots $ where $ \Gamma_0 = \Gamma $ and $ \Gamma^* = \cup_{i \in \N} \Gamma_i $. Suppose $ \Gamma_n $ has been defined. If $ \Gamma_n \vdash_L \phi_n $ then let $ \Gamma_{n + 1} = \Gamma_n $. If $ \Gamma_n \not\vdash_L \phi_n $ then let $ \Gamma_{n + 1} = \Gamma_n \cup \cb{\notb{\phi_n}} $. An easy induction using \ref{prop:1.3.7} shows that each $ \Gamma_i $ is consistent. Claim that $ \Gamma^* $ is consistent. If $ \Gamma^* \vdash_L \phi $ and $ \Gamma^* \vdash_L \notb{\phi} $ then as deductions are finite sequence of formulas, $ \Gamma_n \vdash_L \phi $ and $ \Gamma_n \vdash_L \notb{\phi} $ for some $ n \in \N $, a contradiction. Let $ \phi $ be any formula. So $ \phi = \phi_n $ for some $ n $. If $ \Gamma^* \not\vdash_L \phi $ then $ \Gamma_n \not\vdash_L \phi $. So by construction $ \Gamma_{n + 1} \vdash_L \notb{\phi} $ as $ \notb{\phi} = \notb{\phi_n} \in \Gamma_{n + 1} $. Thus $ \Gamma^* \vdash_L \notb{\phi} $.
\end{proof}

\marginpar{Lecture 6 \\ Monday \\ 15/10/18}

\begin{lemma}
\label{lem:1.3.9}
Let $ \Gamma^* $ be as above. Then there is a valuation $ v $ such that for every $ L $-formula $ \phi $, $ v\rb{\phi} = T $ iff $ \Gamma^* \vdash_L \phi $.
\end{lemma}

\begin{corollary}
\label{cor:1.3.10}
Suppose $ \Delta $ is a set of $ L $-formulas which is consistent and $ \Delta \not\vdash_L \phi $. Then there is a valuation $ v $ with $ v\rb{\Delta} = T $ and $ v\rb{\phi} = F $.
\end{corollary}

\begin{proof}
Let $ \Gamma = \Delta \cup \cb{\notb{\phi}} $. By \ref{prop:1.3.7}, $ \Gamma $ is consistent. By \ref{prop:1.3.8} there is $ \Gamma^* \supseteq \Gamma $ which is still consistent and such that for every $ \chi $ either $ \Gamma^* \vdash_L \chi $ or $ \Gamma^* \vdash_L \notb{\chi} $. By \ref{lem:1.3.9} there is a valuation $ v $ with $ v\rb{\Gamma^*} = T $. In particular $ v\rb{\Delta} = T $ and $ v\rb{\notb{\phi}} = T $. So $ v\rb{\phi} = F $.
\end{proof}

\begin{proof}[Proof of \ref{thm:1.3.4}]
Suppose $ \not\vdash_L \phi $. Apply \ref{cor:1.3.10} with $ \Delta = \emptyset $. This is consistent due to the Soundness theorem. There is a valuation $ v $ with $ v\rb{\phi} = F $.
\end{proof}

\begin{proof}[Proof of \ref{lem:1.3.9}]
Let $ \Gamma^* $ be a consistent set of $ L $-formulas such that for every $ L $-formula $ \phi $ either $ \Gamma^* \vdash_L \phi $ or $ \Gamma^* \vdash_L \notb{\phi} $. Want a valuation $ v $ with $ v\rb{\phi} = T $ for all $ \phi \in \Gamma^* $, that is $ v\rb{\phi} = T $ iff $ \Gamma^* \vdash_L \phi $. Note that for each variable $ p_i $ either $ \Gamma^* \vdash_L p_i $ or $ \Gamma^* \vdash_L \notb{p_i} $. So let $ v $ be the valuation with $ v\rb{p_i} = T $ iff $ \Gamma^* \vdash_L p_i $. Prove by induction on the length of $ \phi $ that $ v\rb{\phi} = T $ iff $ \Gamma^* \vdash_L \phi $. Base case for $ \phi $ is just a propositional variable. This case is by definition of $ v $. Inductive step is the following.
\begin{enumerate}
\item Assume that $ \phi $ is $ \notb{\psi} $.
\begin{itemize}
\item[$ \implies $] $ v\rb{\phi} = T $ gives $ v\rb{\psi} = F $ since $ v $ is a valuation. By inductive hypothesis, $ \Gamma^* \not\vdash_L \psi $. Then Lindenbaum property gives $ \Gamma^* \vdash_L \notb{\psi} $, that is $ \Gamma^* \vdash_L \phi $.
\item[$ \impliedby $] Conversely suppose $ \Gamma^* \vdash_L \phi $. By consistency $ \Gamma^* \not\vdash_L \psi $. By inductive hypothesis, $ v\rb{\psi} = F $. As $ v $ is a valuation we obtain $ v\rb{\notb{\psi}} = T $, that is $ v\rb{\phi} = T $.
\end{itemize}
\item Assume that $ \phi $ is $ \impb{\psi}{\chi} $.
\begin{itemize}
\item[$ \impliedby $] Suppose $ v\rb{\phi} = F $. Show $ \Gamma^* \not\vdash_L \phi $. Then $ v\rb{\psi} = T $ and $ v\rb{\chi} = F $. By inductive hypothesis, $ \Gamma^* \vdash_L \psi $ and $ \Gamma^* \not\vdash_L \chi $. If $ \Gamma^* \vdash_L \phi $ then using $ \Gamma^* \vdash_L \psi $ and MP we get $ \Gamma^* \vdash_L \chi $, which is a contradiction. So $ \Gamma^* \not\vdash_L \phi $.
\item[$ \implies $] Suppose $ \Gamma^* \not\vdash_L \phi $, that is $ \Gamma^* \not\vdash_L \impb{\psi}{\chi} $. Then $ \Gamma^* \not\vdash_L \chi $ as $ \vdash_L \impb{\chi}{\impb{\psi}{\chi}} $. Also $ \Gamma^* \not\vdash_L \notb{\psi} $ as $ \vdash_L \impb{\notb{\psi}}{\impb{\psi}{\chi}} $ by \ref{prop:1.2.7}(1). By inductive hypothesis, $ v\rb{\chi} = F $ and $ v\rb{\notb{\psi}} = F $ so $ v\rb{\psi} = T $. Thus $ v\rb{\phi} = F $, which does the inductive step.
\end{itemize}
\end{enumerate}
\end{proof}

\begin{corollary}
\label{cor:1.3.12}
Suppose $ \Delta $ is a set of $ L $-formulas and $ \phi $ is an $ L $-formula. Then
\begin{enumerate}
\item $ \Delta $ is consistent iff there is a valuation $ v $ with $ v\rb{\Delta} = T $, and
\item $ \Delta \vdash_L \phi $ iff for every valuation $ v $ with $ v\rb{\Delta} = T $ we have $ v\rb{\phi} = T $.
\end{enumerate}
\end{corollary}

\begin{proof}
TODO Exercise: deduce these from the preliminaries to Completeness theorem - warning that in $ 2 $ do not assume that $ \Delta $ is consistent.
\end{proof}

\begin{theorem}[Compactness theorem for $ L $]
Suppose $ \Delta $ is a set of $ L $-formulas. The following are equivalent.
\begin{enumerate}
\item There is a valuation $ v $ with $ v\rb{\Delta} = T $.
\item For every finite subset $ \Delta_0 \subseteq \Delta $ there is a valuation $ w $ with $ w\rb{\Delta_0} = T $.
\end{enumerate}
\end{theorem}

\begin{proof}
By \ref{cor:1.3.12} $ 1 $ holds iff $ \Delta $ is consistent. Similarly $ 2 $ holds iff every finite subset of $ \Delta $ is consistent. But if $ \Delta \vdash_L \psi $ and $ \Delta \vdash_L \notb{\psi} $ then as deductions are finite and therefore only involve finitely many formulas in $ \Delta $, for some finite $ \Delta_0 \subseteq \Delta $, $ \Delta_0 \vdash_L \psi $ and $ \Delta_0 \vdash_L \notb{\psi} $.
\end{proof}

Let $ P $ be the set of sequences of $ \cb{T, F} $, that is the set of functions $ f : \N \to \cb{T, F} $. Topologise with basic open sets. For $ a_1, \dots, a_n \in \cb{T, F} $ consider $ O\rb{a_1, \dots, a_n} $, all sequences starting $ a_1, \dots, a_n $. (TODO Exercise: use Compactness theorem to prove $ P $ is compact)

\marginpar{Lecture 7 \\ Thursday \\ 18/10/18}

Lecture 7 is a problem class.

\marginpar{Lecture 8 \\ Friday \\ 19/10/18}

\section{Predicate logic}

Predicate logic is first-order logic. Plan is the following.
\begin{enumerate}
\item Introduce the mathematical objects, first-order structures.
\item Introduce the formulas, first-order languages.
\item Describe a formal system.
\item Show that its theorems are precisely the formulas true in all structures. This is Gödel's completeness theorem.
\end{enumerate}
$ 1 $ and $ 2 $ are semantics while $ 3 $ and $ 4 $ are syntax.

\subsection{Structures}

\begin{definition}
Suppose $ A $ is a set and $ n \ge 1 $ and $ n \in \N $. An \textbf{$ n $-ary relation} on $ A $ is a subset $ \overline{R} \subseteq A^n = \cb{\rb{a_1, \dots, a_n} \mid a_i \in A} $ of $ n $-tuples. An \textbf{$ n $-ary function} on $ A $ is a function $ \overline{f} : A^n \to A $.
\end{definition}

\begin{example}
\hfill
\begin{enumerate}
\item Ordering $ \le $ on $ \R $ is a binary relation on $ \R $.
\item $ + $ on $ \C $ is a binary function on $ \C $.
\item Even integers as a subset of $ \Z $ is a unary relation on $ \Z $.
\end{enumerate}
\end{example}

If $ \overline{R} \subseteq A^n $ is an $ n $-ary relation and $ a_1, \dots, a_n \in A $, write $ \overline{R}\rb{a_1, \dots, a_n} $ to mean $ \rb{a_1, \dots, a_n} \in \overline{R} $.

\begin{definition}
A \textbf{first-order structure} $ \A $ consists of
\begin{enumerate}
\item a non-empty set $ A $, the \textbf{domain} of $ \A $,
\item a set $ \cb{\overline{R_i} \mid i \in I} $ of relations on $ A $ for $ \overline{R_i} \subseteq A^{n_i} $,
\item a set $ \cb{\overline{f_j} \mid j \in J} $ of functions on $ A $ for $ \overline{f_j} : A^{m_j} \to A $, and
\item a set $ \cb{\overline{c_k} \mid k \in K} $ of \textbf{constants}, just elements of $ A $.
\end{enumerate}
The sets $ I, J, K $ are indexing sets and can be empty. Usually subsets of $ \N $. The information $ \rb{n_i \mid i \in I} $, $ \rb{m_j \mid j \in J} $, and the set $ K $ is called the \textbf{signature} of $ \A $. Might denote the structure by
$$ \A = \ab{A; \rb{\overline{R_i} \mid i \in I}, \rb{\overline{f_j} \mid j \in J}, \rb{\overline{c_k} \mid k \in K}}. $$
\end{definition}

\begin{example}
\hfill
\begin{enumerate}
\item Orderings on $ A = \N, \Z, \Q, \R $ where
$$ I = \cb{1}, \qquad J = \emptyset, \qquad K = \emptyset, \qquad \overline{R_1}\rb{a_1, a_2} \iff a_1 < a_2. $$
\item Groups.
\begin{enumerate}
\item $ \overline{R} $, the binary relation for equality,
\item $ \overline{m} $, the binary function for multiplication,
\item $ \overline{i} $, the unary function for inversion, and
\item $ \overline{e} $, the constant for identity element.
\end{enumerate}
\item Rings.
\begin{enumerate}
\item $ \overline{R} $, the binary relation for equality,
\item $ \overline{m} $, the binary function for multiplication,
\item $ \overline{a} $, the binary function for addition,
\item $ \overline{n} $, the binary function for negation,
\item $ \overline{0} $, the constant for zero, and
\item $ \overline{1} $, the constant for one.
\end{enumerate}
\item Graphs.
\begin{enumerate}
\item $ \overline{R} $, the binary relation for equality, and
\item $ \overline{E} $, the binary relation for adjacency.
\end{enumerate}
\end{enumerate}
\end{example}

\subsection{First-order languages}

\begin{definition}
\label{def:2.2.1}
A \textbf{first-order language} $ \L $ has an alphabet of symbols of the following types.
\begin{enumerate}
\item Variables $ x_0, x_1, \dots $.
\item Punctuation $ ( $, $ ) $, $ , $.
\item Connectives $ \neg $, $ \rightarrow $.
\item \textbf{Quantifier} $ \forall $.
\item Relation symbols $ R_i $ for $ i \in I $.
\item Function symbols $ f_j $ for $ j \in J $.
\item Constant symbols $ c_k $ for $ k \in K $.
\end{enumerate}
Here $ I, J, K $ are indexing sets and could have $ J, K = \emptyset $. Each $ R_i $ comes equipped with an \textbf{arity} $ n_i $. Each $ f_j $ comes equipped with an arity $ m_j $. The information $ \rb{n_i \mid i \in I} $, $ \rb{m_j \mid j \in J} $, $ K $ is called the signature of $ \L $. A first-order structure $ \A $ with the same signature as $ \L $ is referred to as an $ \L $-structure.
\end{definition}

\begin{definition}
A \textbf{term} of $ \L $ is defined as follows.
\begin{enumerate}
\item Any variable is a term.
\item Any constant symbol is a term.
\item If $ f $ is an $ m $-ary function symbol of $ \L $ and $ t_1, \dots, t_m $ are terms, then $ f\rb{t_1, \dots, t_m} $ is also a term.
\item Any term arises in this way.
\end{enumerate}
\end{definition}

\begin{example}
Suppose $ \L $ has a binary function symbol $ f $ and constant symbols $ c_1, c_2 $. Some terms are
$$ c_1, \qquad c_2, \qquad x_1, \qquad f\rb{c_1, x_1}, \qquad f\rb{f\rb{c_1, x_2}, c_2}, \qquad f\rb{x_1, f\rb{f\rb{c_1, x_2}, c_2}}. $$
Some not terms are
$$ ffx_1 \quad \rb{\text{not well-formed}}. $$
\end{example}

\marginpar{Lecture 9 \\ Monday \\ 22/10/18}

\begin{definition}
\hfill
\begin{enumerate}
\item An \textbf{atomic formula} of $ \L $ is of the form $ R\rb{t_1, \dots, t_n} $ where $ R $ is an $ n $-ary relation symbol of $ \L $ and $ t_1, \dots, t_n $ are terms.
\item The \textbf{formulas} of $ \L $ are defined as follows.
\begin{enumerate}
\item Any atomic formula is a formula.
\item If $ \phi, \psi $ are $ \L $-formulas then $ \notb{\phi} $, $ \impb{\phi}{\psi} $, $ \fab{x}\phi $ are $ \L $-formulas, where $ x $ is any variable.
\item Every $ \L $-formula arises in this way.
\end{enumerate}
\end{enumerate}
\end{definition}

\begin{example}
Suppose $ \L $ has a binary function symbol $ f $, a unary relation symbol $ P $, a binary relation symbol $ R $, and constant symbols $ c_1, c_2 $. Some terms are
$$ x_1, \qquad c_1, \qquad f\rb{x_1, c_1}, \qquad f\rb{f\rb{x_1, c_1}, x_2}. $$
Some atomic formulas are
$$ P\rb{x_1}, \qquad R\rb{f\rb{x_1, c_1}, x_2}. $$
Some formulas are
$$ \fab{x_1}\impb{R\rb{f\rb{x_1, c_1}, x_2}}{P\rb{x_1}}. $$
\end{example}

\begin{definition}
Suppose $ \phi, \psi $ are $ \L $-formulas. $ \teb{x}\phi $ means $ \notb{\fab{x}\notb{\phi}} $. $ \orb{\phi}{\psi} $ means $ \impb{\notb{\phi}}{\psi} $, etc as in propositional logic.
\end{definition}

\begin{definition}
Suppose $ \L $ is a first-order language with relation symbols $ R_i $ of arity $ n_i $ for $ i \in I $, function symbols $ f_j $ of arity $ m_j $ for $ j \in J $, and constant symbols $ c_k $ for $ k \in K $. An \textbf{$ \L $-structure} is a structure
$$ \A = \ab{A; \rb{\overline{R_i} \mid i \in I}, \rb{\overline{f_j} \mid j \in J}, \rb{\overline{c_k} \mid k \in K}} $$
of the same signature as $ \L $.
\end{definition}

There is a correspondence between the relation, function, and constant symbols of $ \L $ and the actual relations, functions, and constants in $ \A $, and the arities match up. This correspondence, or $ \A $, is called an \textbf{interpretation} of $ \L $.

\begin{definition}
With the same notation, suppose $ \A $ is an $ \L $-structure. A \textbf{valuation} in $ \A $ is a function $ v $ from the set of terms of $ \L $ to $ A $ satisfying
\begin{enumerate}
\item $ v\rb{c_k} = \overline{c_k} $, and
\item if $ t_1, \dots, t_m $ are terms of $ \L $ and $ f $ is an $ m $-ary function symbol then
$$ v\rb{f\rb{t_1, \dots, t_m}} = \overline{f}\rb{v\rb{t_1}, \dots, v\rb{t_m}}, $$
where $ \overline{f} $ is the interpretation of $ f $ in $ \A $.
\end{enumerate}
\end{definition}

\begin{lemma}
Suppose $ \A $ is an $ \L $-structure and $ a_0, a_1, \dots \in A $. Then there is a unique valuation $ v $ in $ \A $ with $ v\rb{x_l} = a_l $ for all $ l \in \N $, where the variables of $ \L $ are $ x_0, x_1, \dots $.
\end{lemma}

\begin{proof}
By induction on the length of terms. Show that if we let
\begin{enumerate}
\item $ v\rb{x_l} = a_l $ for all $ l \in \N $,
\item $ v\rb{c_k} = \overline{c_k} $ for all $ k \in K $, and
\item $ v\rb{f\rb{t_1, \dots, t_m}} = \overline{f}\rb{v\rb{t_1}, \dots, v\rb{t_m}} $,
\end{enumerate}
then $ v $ is a well-defined valuation.
\end{proof}

\begin{example}
Groups with signature of
\begin{enumerate}
\item binary relation symbol $ R $ for equality,
\item binary function symbol $ m $ for multiplication,
\item unary function symbol $ i $ for inversion, and
\item constant $ e $ for identity element.
\end{enumerate}
Let $ G $ be a group and $ g, h \in G $. Let $ v $ be a valuation with $ v\rb{x_0} = g $ and $ v\rb{x_1} = h $. Then
$$ v\rb{m\rb{m\rb{x_0, x_1}, i\rb{x_0}}} = \overline{m}\rb{v\rb{m\rb{x_0, x_1}}, v\rb{i\rb{x_0}}} = \overline{m}\rb{v\rb{x_0}, v\rb{x_1}}\overline{i}\rb{v\rb{x_0}} = ghg^{-1}. $$
\end{example}

\begin{definition}
Suppose $ \A $ is an $ \L $-structure and $ x_l $ is any variable. Suppose $ v, w $ are valuations in $ \A $. We say $ v, w $ are $ x_l $-equivalent if $ v\rb{x_m} = w\rb{x_m} $ whenever $ m \ne l $.
\end{definition}

\begin{definition}
\label{def:2.2.9}
Suppose $ \A $ is an $ \L $-structure and $ v $ is a valuation in $ \A $. Define, for an $ \L $-formula $ \phi $, what is meant by $ v $ \textbf{satisfies} $ \phi $ in $ \A $ by the following.
\begin{enumerate}
\item Suppose $ R $ is an $ n $-ary relation symbol and $ t_1, \dots, t_n $ are terms of $ \L $. Then $ v $ satisfies the atomic formula $ R\rb{t_1, \dots, t_n} $ iff $ \overline{R}\rb{v\rb{t_1}, \dots, v\rb{t_n}} $ holds in $ \A $.
\item Suppose $ \phi, \psi $ are $ \L $-formulas and we already know about valuations satisfying $ \phi, \psi $.
\begin{enumerate}
\item $ v $ satisfies $ \notb{\phi} $ in $ \A $ iff $ v $ does not satisfy $ \phi $ in $ \A $.
\item $ v $ satisfies $ \impb{\phi}{\psi} $ in $ \A $ iff it is not the case that $ v $ satisfies $ \phi $ in $ \A $ and $ v $ does not satisfy $ \psi $ in $ \A $.
\item $ v $ satisfies $ \fab{x_l}\phi $ in $ \A $ iff whenever $ w $ is a valuation in $ \A $ which is $ x_l $-equivalent to $ v $, then $ w $ satisfies $ \phi $ in $ \A $.
\end{enumerate}
\end{enumerate}
\end{definition}

\marginpar{Lecture 10 \\ Thursday \\ 25/10/18}

\begin{remark}
\ref{def:2.2.9} does not work if we allow empty structure.
\end{remark}

If $ v $ satisfies $ \phi $, write $ v\sb{\phi} = T $. If $ v $ does not satisfy $ \phi $, write $ v\sb{\phi} = F $. If every valuation in $ \A $ satisfies $ \phi $, say that $ \phi $ is \textbf{true} in $ \A $ or $ \A $ is a \textbf{model} of $ \phi $ and write $ \A \vDash \phi $. If $ \A \vDash \phi $ for every $ \L $-structure $ \A $, we say that $ \phi $ is \textbf{logically valid} and write $ \vDash \phi $. These are the analogues of tautologies in the propositional logic. Difference is in propositional logic there is an algorithm to decide whether a given formula is a tautology. There is no such algorithm to decide whether a given $ \L $-formula is logically valid or not, a consequence of Gödel's incompleteness theorem.

\begin{example}
\hfill
\begin{enumerate}
\item Suppose $ \L $ has a binary relation symbol $ R $. The $ \L $-formula $ \impb{R\rb{x_1, x_2}}{\impb{R\rb{x_2, x_3}}{R\rb{x_1, x_3}}} $ is true in $ \A = \ab{\N; <} $, where $ R $ is interpreted as $ < $. If not, there is a valuation $ v $ in $ \A $ such that $ v $ satisfies $ R\rb{x_1, x_2} $ or $ v $ does not satisfy $ \impb{R\rb{x_2, x_3}}{R\rb{x_1, x_3}} $. So $ v\sb{R\rb{x_2, x_3}} = T $ and $ v\sb{R\rb{x_1, x_3}} = F $. Let $ v\rb{x_i} = a_i \in \N $. So $ a_1 < a_2 $, $ a_2 < a_3 $, and $ a_1 \not< a_3 $. As $ < $ is transitive on $ \N $, this is a contradiction.
\item The same formula is not true in the structure $ \B $ with domain $ \N $ where we interpret $ R\rb{x_i, x_j} $ as $ x_i \ne x_j $. Take a valuation in $ \B $ with $ v\rb{x_1} = 1 = v\rb{x_3} $ and $ v\rb{x_2} = 2 $. $ v $ does not satisfy the formula in $ \B $.
\item Recall that $ \teb{x_1}\phi $ is an abbreviation for $ \notb{\fab{x_1}\notb{\phi}} $. Suppose $ \A $ is an $ \L $-structure and $ \phi $ an $ \L $-formula. Let $ v $ be a valuation in $ \A $. Then $ v $ satisfies $ \teb{x_1}\phi $ in $ \A $ iff there is a valuation $ w $ which is $ x_1 $-equivalent to $ v $ such that $ w $ satisfies $ \phi $. Suppose $ v $ satisfies $ \notb{\fab{x_1}\notb{\phi}} $. Using \ref{def:2.2.9} $ v $ does not satisfy $ \fab{x_1}\notb{\phi} $. So there is valuation $ w $ $ x_1 $-equivalent to $ v $ such that $ w $ does not satisfy $ \notb{\phi} $. Such a $ w $ satisfies $ \phi $. (TODO Exercise: converse)
\end{enumerate}
\end{example}

\begin{example}
$ \fab{x_1}\teb{x_2}R\rb{x_1, x_2} $ is true in $ \ab{\Z; <} $ and $ \ab{\N; <} $ but not in $ \ab{\N; >} $.
\end{example}

TODO Exercise: Suppose $ \phi $ is any $ \L $-formula. Then
\begin{enumerate}
\item $ \impb{\teb{x_1}\fab{x_2}\phi}{\fab{x_2}\teb{x_1}\phi} $ is logically valid, and
\item $ \impb{\fab{x_2}\teb{x_1}\phi}{\teb{x_1}\fab{x_2}\phi} $ is not necessarily logically valid.
\end{enumerate}

Consider the propositional formula $ \chi $ by $ \impb{p_1}{\impb{p_2}{p_1}} $. Suppose $ \L $ is a first-order language and $ \phi_1, \phi_2 $ are $ \L $-formulas. Substitute $ \phi_1 $ in place of $ p_1 $ and $ \phi_2 $ in place of $ p_2 $ in $ \chi $. We obtain an $ \L $-formula $ \theta $ by $ \impb{\phi_1}{\impb{\phi_2}{\phi_1}} $. Check that as $ \chi $ is a tautology $ \theta $ is logically valid. (TODO Exercise)

\begin{definition}
Suppose $ \chi $ is an $ \L $-formula involving propositional variables $ p_1, \dots, p_n $. Suppose $ \L $ is a first-order language and $ \phi_1, \dots, \phi_n $ are $ \L $-formulas. A \textbf{substitution instance} of $ \chi $ is obtained by replacing each $ p_i $ in $ \chi $ by $ \phi_i $ for $ i = 1, \dots, n $. Call the result $ \theta $.
\end{definition}

\begin{theorem}
\hfill
\begin{enumerate}
\item $ \theta $ is an $ \L $-formula, and
\item if $ \chi $ is a tautology then $ \theta $ is logically valid.
\end{enumerate}
\end{theorem}

\marginpar{Lecture 11 \\ Friday \\ 26/10/18}

\begin{proof}
Take an $ \L $-structure $ \A $ and a valuation $ v $ in $ \A $. Use this to define a propositional valuation $ w $ with $ w\rb{p_i} = v\sb{\phi_i} $ for $ i \le n $. Then prove by induction on the number of connectives in $ \chi $ that $ w\rb{\chi} = v\sb{\theta} $. In particular if $ \chi $ is a tautology, then $ v\sb{\theta} = T $. In the inductive step, consider $ \chi $ is $ \impb{\alpha}{\beta} $. So $ \theta $ is $ \impb{\theta_1}{\theta_2} $ where $ \theta_1 $ is obtained from $ \alpha $ and $ \theta_2 $ is obtained from $ \beta $. By inductive hypothesis $ w\rb{\alpha} = v\sb{\theta_1} $ and $ w\rb{\beta} = v\sb{\theta_2} $. So $ w\impb{\alpha}{\beta} = v\sb{\impb{\theta_1}{\theta_2}} $, etc. (TODO Exercise)
\end{proof}

\begin{note}
Not all logically valid formulas arise in this way.
\end{note}

\begin{example}
$ \impb{\teb{x_2}\fab{x_1}\phi}{\fab{x_1}\teb{x_2}\phi} $.
\end{example}

\subsection{Bound and free variables in formulas}

\begin{definition}
Suppose $ \phi, \psi $ are $ \L $-formulas and $ \fab{x_i}\phi $ occurs as a subformula of $ \psi $, that is $ \psi $ is $ \dots \fab{x_i}\phi \dots $. We say that $ \phi $ is the \textbf{scope} of that quantifier $ \fab{x_i} $ here in $ \psi $. An occurrence of a variable $ x_j $ in $ \psi $ is \textbf{bound} if it is in the scope of a quantifier $ \fab{x_j} $ in $ \psi $, or it is the $ x_j $ here. Otherwise it is a free occurrence of $ x_j $. Variables having a free occurrence in $ \psi $ are called \textbf{free} variables of $ \psi $. A formula with no free variables is called a \textbf{closed} formula or a \textbf{sentence} of $ \L $.
\end{definition}

\begin{example}
\hfill
\begin{enumerate}
\item Let $ \psi_1 $ be $ \impb{R_1\rb{x_1, x_2}}{\fab{x_3}R_2\rb{x_1, x_3}} $. Then $ x_1 $ and $ x_2 $ are free, and $ x_3 $ is bound with scope $ R_2\rb{x_1, x_3} $.
\item Let $ \psi_2 $ be $ \impb{\fab{x_1}R_1\rb{x_1, x_2}}{R_2\rb{x_1, x_2}} $. Then the first $ x_1 $ is bound with scope $ R_1\rb{x_1, x_2} $, and the second $ x_1 $ and $ x_2 $ are free. Compare with $ \fab{x_1}\impb{R_1\rb{x_1, x_2}}{R_2\rb{x_1, x_2}} $. Then $ x_1 $ is bound with scope $ \impb{R_1\rb{x_1, x_2}}{R_2\rb{x_1, x_2}} $, and $ x_2 $ is free.
\item Let $ \psi_3 $ be $ \impb{\teb{x_1}R_1\rb{x_1, x_2}}{\fab{x_2}R_2\rb{x_2, x_3}} $. Then $ x_1 $ and the second $ x_2 $ are bound with scope $ R_1\rb{x_1, x_2} $, and the first $ x_2 $ and $ x_3 $ are free.
\end{enumerate}
\end{example}

\begin{definition}
If $ \psi $ is an $ \L $-formula with free variables amongst $ x_1, \dots, x_n $, we might write $ \psi\rb{x_1, \dots, x_n} $ instead of $ \psi $. If $ t_1, \dots, t_n $ are terms, by $ \psi\rb{t_1, \dots, t_n} $ we mean the $ \L $-formula obtained by replacing each free occurrence of $ x_i $ in $ \psi $ by $ t_i $.
\end{definition}

\begin{example}
Let $ \psi\rb{x_1, x_2} $ be $ \impb{\fab{x_1}R\rb{x_1, x_2}}{\fab{x_3}R\rb{x_1, x_2, x_3}} $, $ t_1 $ be $ f_1\rb{x_1} $, and $ t_2 $ be $ f_2\rb{x_1, x_2} $. Then $ x_2 $ and the second $ x_1 $ are free. So $ \psi\rb{t_1, t_2} $ is
$$ \impb{\fab{x_1}R_1\rb{x_1, f_2\rb{x_1, x_2}}}{\fab{x_3}R_2\rb{f_1\rb{x_1}, f_2\rb{x_1, x_2}, x_3}}. $$
\end{example}

\begin{theorem}
\label{thm:2.3.3}
Suppose $ \phi $ is a closed $ \L $-formula and $ \A $ is an $ \L $-structure. Then either $ \A \vDash \phi $ or $ \A \vDash \notb{\phi} $. More generally, if $ \phi $ has free variables amongst $ x_1, \dots, x_n $ and $ v, w $ are valuations in $ \A $ with $ v\rb{x_i} = w\rb{x_i} $ for $ i = 1, \dots, n $, then $ v\sb{\phi} = T $ iff $ w\sb{\phi} = T $. Allow $ n = 0 $ here for no free variables.
\end{theorem}

\begin{proof}
Note that the first statement follows from the generalisation. If $ \phi $ has no free variables, then for any valuations $ v, w $ in $ \A $, they agree on the free variables of $ \phi $ so $ v\sb{\phi} = w\sb{\phi} $. Prove the generalisation by induction on the number of connectives and quantifiers in $ \phi $.
\begin{enumerate}
\item Base case. $ \phi $ is atomic, so $ \phi $ is $ R\rb{t_1, \dots, t_m} $ for $ t_j $ terms. The $ t_j $ only involve variables amongst $ x_1, \dots, x_n $. As $ v $ and $ w $ agree on these variables $ v\rb{t_j} = w\rb{t_j} $. So
$$ v\sb{R\rb{t_1, \dots, t_m}} = T \qquad \iff \qquad \overline{R}\rb{v\rb{t_1}, \dots, v\rb{t_m}} \qquad \iff \qquad w\sb{R\rb{t_1, \dots, t_m}} = T. $$
\item Inductive step. $ \phi $ is $ \notb{\psi} $, $ \impb{\psi}{\chi} $, or $ \fab{x_i}\psi $. (TODO Exercise: first two cases) Suppose $ \phi $ is $ \fab{x_i}\psi $. Suppose $ v\sb{\phi} = F $. By \ref{def:2.2.9} there is a valuation $ v' $ $ x_i $-equivalent to $ v $ with $ v'\sb{\psi} = F $. The free variables of $ \psi $ are amongst $ x_1, \dots, x_n, x_i $. Let $ w' $ be the valuation $ x_i $-equivalent to $ w $ with $ w'\rb{x_i} = v'\rb{x_i} $. Then $ v', w' $ agree on the free variables of $ \psi $. By inductive hypothesis $ v'\sb{\psi} = w'\sb{\psi} $ so $ w'\sb{\psi} = F $. As $ w' $ is $ x_i $-equivalent to $ w $ we obtain $ w\sb{\fab{x_i}\psi} = F $.
\end{enumerate}
\end{proof}

\marginpar{Lecture 12 \\ Monday \\ 29/10/18}

\begin{remark}
If $ \A $ is an $ \L $-structure and $ \psi\rb{x_1, \dots, x_n} $ an $ \L $-formula, whose free variables are amongst $ x_1, \dots, x_n $, and $ a_1, \dots, a_n \in A $ for domain $ A $ then we write $ \A \vDash \psi\rb{a_1, \dots, a_n} $ to mean $ v\sb{\psi} = T $ for every valuation $ v $ in $ \A $ with $ v\rb{x_i} = a_i $ for $ i = 1, \dots, n $.
\end{remark}

\begin{note}
By the proof of \ref{thm:2.3.3} this holds if $ v\sb{\psi} = T $ for some such valuation.
\end{note}

\begin{example}
An example where $ \A \vDash \fab{x_1}\phi\rb{x_1} $ but we have term $ t $, and a valuation $ v $ in $ \A $ with $ v\sb{\phi\rb{t}} = F $. Let $ \phi\rb{x_1} $ be $ \impb{\fab{x_2}R\rb{x_2, x_2}}{S\rb{x_1}} $. Scope of $ x_2 $ is $ R\rb{x_1, x_2} $. Let $ t_1 $ be $ x_2 $, then $ \phi\rb{t_1} $ is $ \impb{\fab{x_2}R\rb{x_2, x_2}}{S\rb{x_2}} $. Suppose $ \A = \ab{\N; \le, = 0} $. Domain is $ \N = \cb{0, 1, \dots} $, $ R\rb{x_1, x_2} $ interpreted as $ x_1 \le x_2 $, and $ S\rb{x_1} $ interpreted as $ x_1 = 0 $. So $ \A \vDash \fab{x_1}\phi\rb{x_1} $ but we choose a valuation $ v\rb{x_2} = 1 $ then $ v\sb{\phi\rb{t_1}} = F $ in $ \A $.
\end{example}

\begin{definition}
Let $ \phi $ be an $ \L $-formula, $ x_i $ a variable, $ t $ an $ \L $-term. We say $ t $ is free for $ x_i $ in $ \phi $ if there is no variable $ x_j $ in $ t $ such that $ x_i $ has a free occurrence within the scope of a quantifier $ \fab{x_j} $ in $ \phi $.
\end{definition}

TODO Exercise: Let $ t = f\rb{x_3, x_2, x_5} $, $ \phi_1 $ be $ \impb{\impb{\fab{x_2}R\rb{x_1, x_4}}{K\rb{x_1}}}{\fab{x_1}R\rb{x_1, x_1}} $, and $ \phi_2 $ be $ \impb{\fab{x_2}\impb{R\rb{x_2, x_4}}{\fab{x_1}K\rb{x_1}}}{\fab{x_2}R\rb{x_1, x_1}} $. For which $ t $ is $ t $ free for $ x_1 $?

\begin{theorem}
\label{thm:2.3.6}
Suppose $ \phi\rb{x_1} $ is an $ \L $-formula, possibly with other free variables. Let $ t $ be a term free for $ x_1 $ in $ \phi $, then $ \vDash \impb{\fab{x_1}\phi\rb{x_1}}{\phi\rb{t}} $. In particular, if $ \A $ is an $ \L $-structure with $ \A \vDash \fab{x_1}\phi\rb{x_1} $ then $ A \vDash \phi\rb{t} $.
\end{theorem}

\begin{lemma}
\label{lem:2.3.7}
With this notation, suppose $ v $ is a valuation in $ \A $. Let $ v' $ be the valuation in $ \A $ which is $ x_1 $-equivalent to $ v $, with $ v'\rb{x_1} = v\rb{t} $. Then $ v'\sb{\phi\rb{x_1}} = T $ iff $ v\sb{\phi\rb{t}} = T $.
\end{lemma}

\begin{proof}
This is by induction on the number of connectives and quantifiers in $ \phi $.
\begin{enumerate}
\item Base case. $ \phi $ is an atomic formula $ R\rb{u_1, \dots, u_m} $ where $ R $ is an $ m $-ary relation symbol and $ u_1, \dots, u_m $ are terms. Let $ u^*_i $ be the result of substituting $ t $ for $ x_1 $ in $ u_i $. Then, by induction on the length of the terms, each $ u_i^* $ is a term and $ v'\rb{u_i} = v\rb{u_i^*} $. Moreover, $ \phi\rb{t} $ is $ R\rb{u_1^*, \dots, u_m^*} $. Then
\begin{align*}
v'\sb{\phi\rb{x_1}} = T \qquad
& \iff \qquad \A \vDash R\rb{v'\rb{u_1}, \dots, v'\rb{u_m}} \\
& \iff \qquad \A \vDash R\rb{v\rb{u_1^*}, \dots, v\rb{u_m^*}} \\
& \iff \qquad v\sb{\phi\rb{t}} = T.
\end{align*}
\item Inductive step. There are three cases,
\begin{enumerate}
\item $ \phi $ is $ \notb{\psi} $,
\item $ \phi $ is $ \impb{\psi}{\chi} $, and
\item $ \phi $ is $ \fab{x_i}\psi $.
\end{enumerate}
We leave the first two cases as exercises and do the third. We can assume that $ i \ne 1 $. Otherwise $ x_1 $ is not free in $ \phi $ and $ \phi\rb{t} $ is just $ \phi $. \ref{lem:2.3.7} then follows from \ref{thm:2.3.3}. Note also that as $ t $ is free for $ x_1 $ in $ \fab{x_i}\psi $, it follows that $ t $ is free for $ x_1 $ in $ \psi $ and $ x_i $ is not a variable in $ t $. Suppose first that $ v'\sb{\phi\rb{x_1}} = F $. We show that $ v\sb{\phi\rb{t}} = F $. By \ref{def:2.2.9}, there is a valuation $ w' $ which is $ x_i $-equivalent to $ v' $ with $ w'\sb{\psi\rb{x_1}} = F $. Note that as $ i \ne 1 $,
\begin{equation}
\label{eq:5}
w'\rb{x_1} = v'\rb{x_1} = v\rb{t}.
\end{equation}
Define a valuation $ w $ by
$$ w\rb{x_j} = \begin{cases} v\rb{x_j} & j \ne 1, i \\ w'\rb{x_i} & j = i \\ v\rb{x_1} & j = 1 \end{cases}. $$
So $ w $ is $ x_1 $-equivalent to $ w' $ and $ x_i $-equivalent to $ v $, noting that $ v, v' $ are $ x_i $-equivalent and $ w, v' $ are $ x_i $-equivalent. As $ x_i $ does not occur in $ t $ we have, by \ref{thm:2.3.3} and $ \rb{\ref{eq:5}} $,
$$ w\rb{t} = v\rb{t} = w'\rb{x_1}. $$
We can now apply the induction hypothesis to $ w $, $ w' $, and $ \psi $. We obtain that $ w\sb{\psi\rb{t}} = w'\sb{\psi\rb{x_1}} = F $. As $ w, v $ are $ x_i $-equivalent, it follows that
$$ v\sb{\fab{x_i}\psi\rb{t}} = F. $$
So $ v\sb{\phi\rb{t}} = F $, as required. We now prove the converse direction. We cannot argue by symmetry here. So suppose $ v\sb{\phi\rb{t}} = F $. There is a valuation $ w $ which is $ x_i $-equivalent to $ v $ with $ w\sb{\psi\rb{t}} = F $. Let $ w' $ be the valuation $ x_1 $-equivalent to $ w $ with
$$ w'\rb{x_1} = w\rb{t} = v\rb{t} = v'\rb{x_1}. $$
The fact that $ w\rb{t} = v\rb{t} $ is as before. By the inductive hypothesis, $ w'\sb{\psi\rb{x_1}} = w\rb{\psi\rb{t}} = F $. As $ w' $ is $ x_i $-equivalent to $ v' $ we have
$$ v'\sb{\fab{x_i}\psi\rb{x_1}} = F. $$
So $ v'\sb{\phi\rb{x_1}} = F $. This completes the inductive step.
\end{enumerate}
\end{proof}

\begin{proof}[Proof of \ref{thm:2.3.6}]
Suppose $ v $ is a valuation with $ v\sb{\phi\rb{t}} = F $. Show $ v\sb{\fab{x_1}\phi\rb{x_1}} = F $. Then
$$ v\sb{\impb{\fab{x_1}\phi\rb{x_1}}{\phi\rb{t}}} = T. $$
Take $ v' $ $ x_1 $-equivalent to $ v $ and $ v'\rb{x_1} = v\rb{t} $. Then by \ref{lem:2.3.7}, $ v'\sb{\phi\rb{x_1}} = F $, so $ v\sb{\fab{x_1}\phi\rb{x_1}} = F $.
\end{proof}

\subsection{The formal system $ K_{\L} $}

\begin{definition}
Suppose $ \L $ is a first-order language. The formal system \textbf{$ K_{\L} $} has as formulas $ \L $-formulas, and the following.
\begin{enumerate}
\item Axioms. For $ \phi, \chi, \psi $ $ \L $-formulas,
\begin{enumerate}[label=(A\arabic*)]
\item $ \impb{\phi}{\impb{\psi}{\phi}} $,
\item $ \impb{\impb{\phi}{\impb{\psi}{\chi}}}{\impb{\impb{\phi}{\psi}}{\impb{\phi}{\chi}}} $,
\item $ \impb{\impb{\notb{\phi}}{\notb{\psi}}}{\impb{\psi}{\phi}} $,
\item[(K1)] $ \impb{\fab{x_i}\phi\rb{x_i}}{\phi\rb{t}} $, where $ t $ is a term free for $ x_i $ in $ \phi $ and $ \phi $ can have other free variables, and
\item[(K2)] $ \impb{\fab{x_i}\impb{\phi}{\psi}}{\impb{\phi}{\fab{x_i}\psi}} $, if $ x_i $ is not free in $ \phi $.
\end{enumerate}
\item Deduction rules.
\begin{enumerate}
\item Modus Ponens (MP), from formulas $ \phi $ and $ \impb{\phi}{\psi} $ deduce $ \psi $, and
\item \textbf{Generalisation} (Gen), from formula $ \phi $ deduce $ \fab{x_i}\phi $.
\end{enumerate}
\end{enumerate}
A proof in $ K_{\L} $ is a finite sequence of $ \L $-formulas each of which is an axiom, or deduced from previous formulas in the proof using a rule of deduction. A theorem of $ K_{\L} $ is the last formula in some proof. Write $ \vdash_{K_{\L}} \phi $ for $ \phi $ is a theorem in $ K_{\L} $.
\end{definition}

\begin{note}
Books do not always use $ K_{\L} $, that is they write $ \vdash \phi $.
\end{note}

\begin{definition}
Suppose $ \Sigma $ is a set of $ \L $-formulas and $ \psi $ an $ \L $-formula. A deduction of $ \psi $ from $ \Sigma $ is a finite sequence of formulas, ending with $ \psi $, each of which is one of
\begin{enumerate}
\item an axiom,
\item a formula in $ \Sigma $, or
\item obtained from earlier formulas in the deduction using MP or Gen, with the restriction that when Gen is applied it does not involve a variable occurring freely in a formula in $ \Sigma $.
\end{enumerate}
Write $ \Sigma \vdash_{K_{\L}} \psi $ if there is a deduction from $ \Sigma $ to $ \psi $.
\end{definition}

\marginpar{Lecture 13 \\ Thursday \\ 01/11/18}

Lecture 13 is a problem class.

\marginpar{Lecture 14 \\ Friday \\ 02/11/18}

\begin{remark}
\hfill
\begin{enumerate}
\item If $ \Sigma $ consists of closed formulas, do not need to worry about the restriction on Gen.
\item $ \phi \vdash \fab{x_1}\phi $.
\end{enumerate}
\end{remark}

\begin{theorem}
\label{thm:2.4.4}
Suppose $ \phi $ is an $ \L $-formula which is a substitution instance of a tautology in propositional logic. Then $ \vdash_{K_{\L}} \phi $.
\end{theorem}

\begin{example}
$ \impb{\notb{\notb{\phi}}}{\phi} $ for an $ \L $-formula $ \phi $, as this is a substitution instance of $ \impb{\notb{\notb{p_1}}}{p_1} $. There is a tautology $ \chi $ with propositional variables $ p_1, \dots, p_n $ and $ \L $-formulas $ \psi_1, \dots, \psi_n $ such that $ \phi $ is obtained from $ \chi $ by substituting $ \psi_i $ for $ p_i $ for $ i = 1, \dots, n $. By Completeness of propositional logic in \ref{thm:1.3.4} there is a proof in $ L $ of $ \chi $ by $ \chi_1, \dots, \chi_r $, where each $ \chi_i $ is a propositional formula, that is in $ L $, and $ \chi_r = \chi $. If we substitute $ \psi_1, \dots, \psi_n $ for $ p_1, \dots, p_n $ in all $ \chi_j $ we obtain a sequence of $ \L $-formulas $ \phi_1, \dots, \phi_r $ which is a proof of $ \phi = \phi_r $ in $ K_{\L} $.
\end{example}

\begin{theorem}[Soundness theorem of $ K_{\L} $]
\label{thm:2.4.5}
If $ \vdash_{K_{\L}} \phi $ then $ \vDash \phi $, that is it is logically valid.
\end{theorem}

\begin{proof}
Like in the proof for $ L $, we need to show
\begin{enumerate}
\item axioms are logically valid, and
\item deduction rules preserve logical validity.
\end{enumerate}
For axioms, A1, A2, A3 are substitution instances of propositional tautologies in \ref{def:2.2.1} so are logically valid by \ref{thm:2.4.4}. K1 is logically valid by \ref{thm:2.3.6}. K2 is $ \impb{\fab{x_i}\impb{\phi}{\psi}}{\impb{\phi}{\fab{x_i}\psi}} $ if $ x_i $ is not free in $ \phi $. Suppose we have valuation $ v $ such that $ v\sb{\impb{\phi}{\fab{x_i}\psi}} = F $. So $ v\sb{\phi} = T $ and $ v\sb{\fab{x_i}\psi} = F $. So there is a valuation $ v' $ $ x_i $-equivalent to $ v $ with $ v'\sb{\psi} = F $. $ v $ and $ v' $ agree on all variables free in $ \phi $. So by \ref{thm:2.3.3} $ v\sb{\phi} = v'\sb{\phi} = T $, so $ v'\sb{\impb{\phi}{\psi}} = F $. So $ v\sb{\fab{x_i}\impb{\phi}{\psi}} = F $. So $ v\sb{K_2} = T $. For deduction rules, MP is if $ \vDash \phi $ and $ \vDash \impb{\phi}{\psi} $ then $ \vDash \psi $, and Gen is if $ \vDash \phi $ then $ \vDash \fab{x_i}\phi $. (TODO Exercise)
\end{proof}

TODO Exercise: Suppose $ \Sigma \vdash \psi $ then for every valuation $ v $ with $ v\sb{\sigma} = T $ for all $ \sigma \in \Sigma $ we have $ v\sb{\psi} = T $.

\begin{corollary}
There is no $ \L $-formula $ \phi $ with $ \vdash_{K_{\L}} \phi $ and $ \vdash_{K_{\L}} \notb{\phi} $.
\end{corollary}

\begin{theorem}[Deduction theorem]
Suppose $ \L $ is a first-order language, $ \Sigma $ is a set of $ \L $-formulas, and $ \phi, \psi $ are $ \L $-formulas. Then if $ \Sigma \cup \cb{\phi} \vdash \psi $ then $ \Sigma \vdash \impb{\phi}{\psi} $.
\end{theorem}

\begin{proof}
Follows proof of deduction theorem for $ L $ in \ref{thm:1.2.5} by induction on the length of the deduction.
\begin{enumerate}
\item Base case is one line deduction. Argue exactly as in \ref{thm:1.2.5}. Note that $ \vdash_{K_{\L}} \impb{\phi}{\phi} $ by \ref{thm:2.4.4}.
\item Inductive step. Suppose $ \psi $ follows from earlier formulas in the deduction using MP or Gen. MP is exactly as in \ref{thm:1.2.5}. For Gen, suppose $ \psi $ is obtained using Gen then $ \psi $ is $ \fab{x_i}\theta $ and $ \Sigma \cup \cb{\phi} \vdash \theta $ and $ x_i $ is not free in any formula in $ \Sigma \cup \cb{\phi} $. By induction we have $ \Sigma \vdash \impb{\phi}{\theta} $. By K2 $ \Sigma \vdash \impb{\fab{x_i}\impb{\phi}{\theta}}{\impb{\phi}{\fab{x_i}\theta}} $. By Gen $ \Sigma \vdash \fab{x_i}\impb{\phi}{\theta} $ for $ x_i $ not free in any formula in $ \Sigma $. So by MP we get $ \Sigma \vdash \impb{\phi}{\fab{x_i}\theta} $ which is $ \Sigma \vdash \impb{\phi}{\psi} $.
\end{enumerate}
\end{proof}

\marginpar{Lecture 15 \\ Monday \\ 05/11/18}

\subsection{Gödel's completeness theorem}

\begin{definition}
A set $ \Sigma $ of $ \L $-formulas is consistent if there is no formula $ \phi $ with $ \Sigma \vdash_{K_{\L}} \phi $ and $ \Sigma \vdash_{K_{\L}} \notb{\phi} $.
\end{definition}

By Soundness theorem \ref{thm:2.4.5} $ \emptyset $ is consistent, so $ K_{\L} $ is consistent.

\begin{remark}
If $ \Sigma $ is inconsistent then $ \Sigma \vdash \chi $ for any $ \L $-formula $ \chi $.
\end{remark}

Recall that a closed $ \L $-formula is one without free variables, sometimes called a sentence of $ \L $. Show that if $ \Sigma $ is a set of closed $ \L $-formulas which is consistent then there is an $ \L $-structure $ \A $ with $ \A \vDash \sigma $ for all $ \sigma \in \Sigma $. For a simplification, suppose that $ \L $ is countable, that is the variables are $ x_0, x_1, \dots $ and there are countably many relation, function, and constant symbols. So we can enumerate the $ \L $-formulas, or any subset thereof, as a list indexed by $ \N $. Enumerate the closed $ \L $-formulas as $ \psi_0, \psi_1, \dots $.

\begin{proposition}
\label{prop:2.5.2}
Suppose $ \Sigma $ is a consistent set of closed $ \L $-formulas and $ \phi $ is a closed $ \L $-formula.
\begin{enumerate}
\item Compare \ref{prop:1.3.7}. If $ \Sigma \not\vdash_{K_{\L}} \phi $ then $ \Sigma \cup \cb{\notb{\phi}} $ is consistent.
\item Compare Lindenbaum's lemma \ref{prop:1.3.8}. There is a consistent set $ \Sigma^* \supseteq \Sigma $ of closed $ \L $-formulas such that, for every closed $ \L $-formula $ \psi $ either $ \Sigma^* \vdash \psi $ or $ \Sigma^* \vdash \notb{\psi} $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item As in \ref{prop:1.3.7}, used deduction theorem and $ \vdash_{K_{\L}} \impb{\impb{\notb{\phi}}{\phi}}{\phi} $.
\item Uses $ 1 $ and the enumeration $ \psi_0, \psi_1, \dots $ of the closed $ \L $-formulas.
\end{enumerate}
\end{proof}

\begin{theorem}
\label{thm:2.5.3}
Suppose $ \Sigma $ is a consistent set of closed $ \L $-formulas. Then there is a countable $ \L $-structure $ \A $ with $ \A \vDash \Sigma $, that is $ \A \vDash \sigma $ for all $ \sigma \in \Sigma $.
\end{theorem}

\begin{theorem}
\label{thm:2.5.4}
Let $ \Sigma $ be a set of closed $ \L $-formulas and $ \phi $ a closed $ \L $-formula. If every model of $ \Sigma $ is a model of $ \phi $, that is if $ \A \vDash \Sigma $ or $ \A \vDash \sigma $ for all $ \sigma \in \Sigma $ then $ \A \vDash \phi $, then $ \Sigma \vdash_{K_{\L}} \phi $.
\end{theorem}

Notation is $ \Sigma \vDash \phi $. Then $ \Sigma \vDash \phi $ gives $ \Sigma \vdash \phi $. The converse is Soundness theorem.

\begin{proof}
May assume $ \Sigma $ is consistent, otherwise, everything is a consequence of $ \Sigma $. By assumption there is no model of $ \Sigma \cup \cb{\notb{\phi}} $. So by \ref{thm:2.5.3}, $ \Sigma \cup \cb{\notb{\phi}} $ is inconsistent. So by \ref{prop:2.5.2}(1), $ \Sigma \vdash \phi $.
\end{proof}

\begin{theorem}[Gödel's completeness theorem for $ K_{\L} $, 1929]
If $ \phi $ is an $ \L $-formula with $ \vDash \phi $, then $ \phi $ is a theorem of $ K_{\L} $, that is $ \vdash_{K_{\L}} \phi $.
\end{theorem}

\begin{proof}
If $ \phi $ is closed this follows from \ref{thm:2.5.4} with $ \Sigma = \emptyset $. Suppose $ \phi $ has free variables amongst $ x_1, \dots, x_n $ and consider the closed formula $ \psi $, $ \fab{x_1} \dots \fab{x_n}\phi $. As $ \vDash \phi $ we obtain $ \vDash \psi $. So by the closed case $ \vdash \psi $, that is
\begin{equation}
\label{eq:6}
\vdash \fab{x_1} \dots \fab{x_n}\phi.
\end{equation}
If $ \theta $ is any formula then $ \vdash \impb{\fab{x_i}\theta}{\theta} $ by the K1 axiom. So from $ \rb{\ref{eq:6}} $ and this fact and MP applied $ n $ times we obtain $ \vdash_{K_{\L}} \phi $.
\end{proof}

\begin{corollary}[Compactness theorem for $ K_{\L} $]
\label{cor:2.5.6}
Suppose $ \Sigma $ is a set of closed $ \L $-formulas and every finite subset of $ \Sigma $ has a model. Then $ \Sigma $ has a model.
\end{corollary}

\begin{proof}
Suppose $ \Sigma $ has no model. By \ref{thm:2.5.3} $ \Sigma $ is inconsistent so there is a formula $ \phi $ with $ \Sigma \vdash \phi $ and $ \Sigma \vdash \notb{\phi} $. Deductions only involve finitely many formulas in $ \Sigma $. So there is a finite $ \Sigma_0 \subseteq \Sigma $ with $ \Sigma_0 \vdash \phi $ and $ \Sigma_0 \vdash \notb{\phi} $. But then $ \Sigma_0 $ is inconsistent so has no model, a contradiction.
\end{proof}

\marginpar{Lecture 16 \\ Thursday \\ 08/11/18}

\begin{proof}[Sketch of proof of \ref{thm:2.5.3}]
Proof is in a series of steps. Notation is cumulative.
\begin{enumerate}
\item Let $ b_0, b_1, \dots $ be new constant symbols. Form $ \L^+ $ by adding these to the symbols of $ \L $. Regard $ \Sigma $ as a set of $ \L^+ $-formulas. Check $ \Sigma $ is still consistent in the formal system $ K_{\L^+} $. Note that $ \L^+ $ is still a countable language.
\item Adding witnesses. Use a lemma that there is a consistent set of closed $ \L^+ $-formulas $ \Sigma_\infty \supseteq \Sigma $ such that for every $ \L^+ $-formula $ \theta\rb{x_i} $ with one free variable there is some $ b_j $ with
$$ \Sigma_\infty \vdash_{K_{\L^+}} \impb{\notb{\fab{x_i}\theta\rb{x_i}}}{\notb{\theta\rb{b_j}}}. $$
Think of $ \theta\rb{x_i} $ as $ \notb{\chi\rb{x_i}} $. Then this formula is essentially $ \impb{\teb{x_i}\chi\rb{x_i}}{\chi\rb{b_j}} $, so $ b_j $ witnesses the existence of $ x_i $ satisfying $ x_i $.
\item By Lindenbaum's lemma \ref{prop:2.5.2} there is a consistent set $ \Sigma^* \supseteq \Sigma_\infty $ of closed $ \L^+ $-formulas such that for every closed $ \phi $ either $ \Sigma^* \vdash_{K_{\L^+}} \phi $ or $ \Sigma^* \vdash_{K_{\L^+}} \notb{\phi} $.
\item Building a structure. Let $ A = \cb{\overline{t}} $ where $ t $ is a closed term of $ \L^+ $. Note that
\begin{enumerate}
\item a term is closed if it only involves constant symbols and function symbols, and no variables,
\item use the $ \overline{\cdot} $ to distinguish when we are thinking of a term as an element of $ A $, and
\item as $ \L^+ $ is countable, $ A $ is countable.
\end{enumerate}
Make $ A $ into an $ \L^+ $ structure.
\begin{enumerate}
\item Each constant symbol $ c $ of $ \L^+ $ is interpreted as $ \overline{c} \in A $.
\item Suppose $ R $ is an $ n $-ary relation symbol. Define the relation $ \overline{R} \subseteq A^n $ by $ \rb{\overline{t_1}, \dots, \overline{t_n}} \in \overline{R} $ iff $ \Sigma^* \vdash R\rb{t_1, \dots, t_n} $, a closed atomic $ \L^+ $-formula, where $ t_1, \dots, t_n $ are closed $ \L^+ $-terms.
\item Suppose $ f $ is an $ m $-ary function symbol. Define a function $ \overline{f} : A^m \to A $ by $ \overline{f}\rb{\overline{t_1}, \dots, \overline{t_m}} = \overline{f\rb{t_1, \dots, t_m}} $ for closed terms $ t_1, \dots, t_m $.
\end{enumerate}
Call this structure $ \A $. Note that if $ v $ is a valuation in $ \A $ and $ t $ is a closed term, then $ v\rb{t} = \overline{t} $ by (a) and (c) here.
\item Use the main lemma that for every closed $ \L^+ $-formula $ \phi $
\begin{equation}
\label{eq:7}
\Sigma^* \vdash_{K_{\L^+}} \phi \qquad \iff \qquad \A \vDash \phi.
\end{equation}
Proof by induction on number of connectives and quantifiers in $ \phi $.
\begin{enumerate}
\item Base case. $ \phi $ is atomic, that is $ \phi $ is $ R\rb{t_1, \dots, t_n} $ for some closed terms $ t_i $, and relation symbol $ R $. $ \rb{\ref{eq:7}} $ holds by $ (b) $ in definition of $ \A $.
\item Inductive step. Assume $ \rb{\ref{eq:7}} $ holds for closed formulas involving fewer connectives and quantifiers.
\begin{enumerate}
\item $ \phi $ is $ \notb{\psi} $.
\item $ \phi $ is $ \impb{\psi}{\chi} $.
\item $ \phi $ is $ \fab{x_i}\psi $.
\end{enumerate}
In cases i and ii $ \psi, \chi $ are closed. So $ \rb{\ref{eq:7}} $ holds for these.
\begin{enumerate}
\item $ \phi $ is $ \notb{\psi} $, so $ \A \vDash \phi $ iff $ \A \not\vDash \psi $ by \ref{thm:2.3.3}, iff $ \Sigma^* \not\vdash \psi $ by $ \rb{\ref{eq:7}} $, iff $ \Sigma^* \vdash \notb{\psi} $ by step $ 3 $.
\item TODO Exercise.
\item $ \phi $ is $ \fab{x_i}\psi $.
\begin{enumerate}
\item $ x_i $ is not free in $ \psi $. So $ \psi $ is closed and we can use inductive hypothesis.
\item $ x_i $ is free in $ \psi $. So $ \psi\rb{x_i} $ has a single free variable.
\end{enumerate}
\end{enumerate}
\end{enumerate}
Suppose for a contradiction that $ \A \vDash \phi $ and $ \Sigma^* \not\vdash \phi $. Then by step $ 3 $ $ \Sigma^* \vdash \notb{\phi} $. By step $ 2 $, $ \Sigma^* \vdash \impb{\notb{\fab{x_i}\psi\rb{x_i}}}{\notb{\psi\rb{b_j}}} $ for some constant symbol $ b_j $, that is $ \Sigma^* \vdash \impb{\notb{\phi}}{\notb{\psi\rb{b_j}}} $. So $ \Sigma^* \vdash \notb{\psi\rb{b_j}} $. $ \notb{\psi\rb{b_j}} $ is closed and by case $ i $, $ \rb{\ref{eq:7}} $ applies. We obtain
\begin{equation}
\label{eq:8}
\A \vDash \notb{\psi\rb{b_j}}.
\end{equation}
This contradicts $ \A \vDash \fab{x_i}\psi $. Take a valuation $ v $ is $ \A $ with $ v\rb{x_i} = \overline{b_j} $, then $ v $ does not satisfy $ \psi $, by $ \rb{\ref{eq:8}} $.
\end{enumerate}
\end{proof}

TODO Exercise: think about this where $ \Sigma $ consists of the group axioms. What is $ \A $? Is it a group?

\marginpar{Lecture 17 \\ Friday \\ 09/11/18}

\subsection{Equality}

\begin{example}
In the language of groups, have a binary relation symbol $ E\rb{x_1, x_2} $ for equality $ x_1 = x_2 $.
\end{example}

\begin{definition}
Suppose $ \L^E $ is a first-order language with a distinguished binary relation symbol $ E $.
\begin{enumerate}
\item An $ \L^E $-structure in which $ E $ is interpreted as equality $ = $ is a \textbf{normal} $ \L^E $-structure.
\item The following are the axioms of equality, $ \Sigma_E $.
\begin{enumerate}
\item $ \fab{x_1}E\rb{x_1, x_2} $.
\item $ \fab{x_1}\fab{x_2}\impb{E\rb{x_1, x_2}}{E\rb{x_2, x_1}} $.
\item $ \fab{x_1}\fab{x_2}\fab{x_3}\impb{E\rb{x_1, x_2}}{\impb{E\rb{x_2, x_3}}{E\rb{x_1, x_3}}} $.
\end{enumerate}
\item For each $ n $-ary relation symbol $ R $ of $ \L^E $,
$$ \fab{x_1}\dots\fab{x_n}\fab{y_1}\dots\fab{y_n}\impb{\rb{R\rb{x_1, \dots, x_n} \land E\rb{x_1, y_1} \land \dots \land E\rb{x_n, y_n}}}{R\rb{y_1, \dots, y_n}}. $$
\item For each $ m $-ary function symbol $ f $ of $ \L^E $,
$$ \fab{x_1}\dots\fab{x_m}\fab{y_1}\dots\fab{y_m}\impb{\rb{E\rb{x_1, y_1} \land \dots \land E\rb{x_m, y_m}}}{E\rb{f\rb{x_1, \dots, x_m}, f\rb{y_1, \dots, y_m}}}. $$
\end{enumerate}
\end{definition}

\begin{definition}
\hfill
\begin{enumerate}
\item If $ \A $ is a normal $ \L^E $-structure then $ \A \vDash \Sigma_E $.
\item Suppose $ \A = \ab{A; \overline{E}, \dots} $ is an $ \L^E $-structure and $ \A \vDash \Sigma_E $. Then $ \overline{E} $ is an equivalence relation on $ A $. Denote, for $ a \in A $ $ \widehat{a} = \cb{b \in A \mid \overline{E}\rb{a, b}} $, the equivalence class of $ a $. Let $ \widehat{A} = \cb{\widehat{a} \mid a \in A} $. Make $ \widehat{A} $ into an $ \L^E $-structure $ \widehat{\A} $.
\begin{enumerate}
\item If $ R $ is an $ n $-ary relation symbol and $ \widehat{a_1}, \dots, \widehat{a_n} \in \widehat{A} $ then say $ \overline{R}\rb{\widehat{a_1}, \dots, \widehat{a_n}} $ holds in $ \widehat{\A} $ iff $ \overline{R}\rb{a_1, \dots, a_n} $ holds in $ \A $. This is well-defined by $ \Sigma_E $.
\item Similarly if $ f $ is an $ m $-ary function symbol and $ \widehat{a_1}, \dots, \widehat{a_m} \in \widehat{A} $ let $ \overline{f}\rb{\widehat{a_1}, \dots, \widehat{a_m}} = \widehat{\overline{f}\rb{a_1, \dots, a_m}} $. This is also well-defined by $ \Sigma_E $.
\item If $ c $ is a constant symbol, then interpret $ c $ as $ \widehat{\overline{c}} $ in $ \widehat{A} $, where $ \overline{c} $ is the interpretation in $ \A $.
\end{enumerate}
Note that in $ \widehat{\A} $ $ \overline{E}\rb{\widehat{a_1}, \widehat{a_2}} $ iff $ \overline{E}\rb{a_1, a_2} $ in $ \A $, iff $ \widehat{a_1} = \widehat{a_2} $. So $ \widehat{\A} $ is a normal $ \L^E $-structure.
\end{enumerate}
\end{definition}

\begin{lemma}
\label{lem:2.6.3}
Suppose $ \A $ is an $ \L^E $-structure with $ \A \vDash \Sigma_E $. Let $ v $ be a valuation in $ \A $. Let $ \widehat{\A} $ be as given above. Let $ \widehat{v} $ be the valuation in $ \widehat{\A} $ with $ \widehat{v}\rb{x_i} = \widehat{v\rb{x_i}} $. Then for every $ \L^E $-formula $ \phi $ $ \widehat{v} $ satisfies $ \phi $ in $ \widehat{\A} $ iff $ v $ satisfies $ \phi $ in $ \A $. In particular, if $ \phi $ is closed then $ \A \vDash \phi $ iff $ \widehat{\A} \vDash \phi $.
\end{lemma}

\begin{note}
If $ t $ is any term then $ \widehat{v}\rb{t} = \widehat{v\rb{t}} $ by definition of $ \overline{f} $ on the structure $ \widehat{\A} $.
\end{note}

\begin{proof}
The result \ref{lem:2.6.3} is proved by induction on the number of connectives and quantifiers in $ \phi $.
\begin{enumerate}
\item Base step. $ \phi $ is an atomic formula $ R\rb{t_1, \dots, t_n} $, where $ R $ is an $ n $-ary relation symbol and $ t_1, \dots, t_n $ are terms. Then $ v\sb{\phi} = T $ iff $ \overline{R}\rb{v\rb{t_1}, \dots, v\rb{t_n}} $ holds in $ \A $, iff $ \overline{R}\rb{\widehat{v\rb{t_1}}, \dots, \widehat{v\rb{t_n}}} $ holds in $ \A $ by definition of $ \overline{R} $ in $ \widehat{\A} $, iff $ \overline{R}\rb{\widehat{v}\rb{t_1}, \dots, \widehat{v}\rb{t_n}} $ in $ \A $, iff $ \widehat{v}\sb{\phi} = T $, as required.
\item Inductive step.
\begin{enumerate}
\item $ \phi $ is $ \notb{\psi} $. (TODO Exercise)
\item $ \phi $ is $ \impb{\theta}{\chi} $ (TODO Exercise)
\item $ \phi $ is $ \fab{x_i}\psi $.
\begin{itemize}
\item[$ \implies $] If $ v\sb{\fab{x_i}\psi} = F $ there is a $ v' $ $ x_i $-equivalent to $ v $ with $ v'\sb{\psi} = F $. Then $ \widehat{v'} $ is $ x_i $-equivalent to $ \widehat{v} $ and by the induction hypothesis $ \widehat{v'}\sb{\psi} = F $. So $ \widehat{v}\sb{\fab{x_i}\psi} = F $.
\item[$ \impliedby $] Suppose $ \widehat{v}\sb{\fab{x_i}\psi} = F $. So there is a valuation $ w $ in $ \widehat{\A} $ which is $ x_i $-equivalent to $ \widehat{v} $ and $ w\sb{\psi} = F $. There is a valuation $ v' $ in $ \A $ $ x_i $-equivalent to $ v $ with $ \widehat{v'} = w $. We just change $ v\rb{x_i} $ so $ \widehat{v'\rb{x_i}} = w\rb{x_i} $. Then $ v'\sb{\psi} = F $ by inductive hypothesis. So $ v\sb{\fab{x_i}\psi} = F $.
\end{itemize}
\end{enumerate}
\end{enumerate}
\end{proof}

\begin{lemma}
\label{lem:2.6.4}
Suppose $ \Delta $ is a set of closed $ \L^E $-formulas. Then $ \Delta $ has a normal model, that is a normal $ \L^E $-structure $ \B $ with $ \B \vDash \sigma $ for all $ \sigma \in \Delta $, iff $ \Delta \cup \Sigma_E $ has a model.
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}
\item[$ \implies $] Trivial as $ \Sigma_E $ holds in a normal $ \L^E $-structure.
\item[$ \impliedby $] If $ \A \vDash \Delta \cup \Sigma_E $ then by \ref{lem:2.6.3} $ \widehat{\A} \vDash \Delta $ and $ \widehat{\A} $ is a normal $ \L^E $-structure.
\end{itemize}
\end{proof}

\begin{theorem}[Compactness theorem for normal models]
Suppose $ \L^E $ is a countable language with equality and $ \Delta $ is a set of closed $ \L^E $-formulas such that every finite subset of $ \Delta $ has a normal model. Then $ \Delta $ has a normal model.
\end{theorem}

\begin{proof}
Every normal $ \L^E $-structure is a model of $ \Sigma_E $, so every finite subset of $ \Delta \cup \Sigma_E $ has a model. By \ref{cor:2.5.6} $ \Delta \cup \Sigma_E $ has a model $ \A $. Then by \ref{lem:2.6.3} or \ref{lem:2.6.4} $ \widehat{\A} $ is a normal model of $ \Delta $.
\end{proof}

From now on, write $ \L^= $ instead of $ \L^E $ and $ x_1 = x_2 $ instead of $ E\rb{x_1, x_2} $ etc.

\marginpar{Lecture 18 \\ Monday \\ 12/11/18}

\begin{theorem}[Countable downward Löwenheim-Skolem theorem]
Suppose $ \L^= $ is a countable first-order language with equality, and $ \B $ a normal $ \L^= $ structure. Then there is a countable normal $ \L^= $-structure $ \A $ such that for every closed $ \L^= $-formula $ \phi $ $ \B \vDash \phi $ iff $ \A \vDash \phi $.
\end{theorem}

\begin{example}
$ \B = \ab{\R; +, \cdot, 0, 1, \le, \exp} $ has $ \A = ? $.
\end{example}

\begin{proof}
Let $ \Sigma $ be the closed $ \phi $ such that $ \B \vDash \phi $, called the \textbf{theory} of $ \B $. Then $ \Sigma \supseteq \Sigma_E $ with the axioms of equality, and $ \Sigma $ is consistent. By \ref{thm:2.5.3} $ \Sigma $ has a countable model $ \mathcal{C} $. Then $ \widehat{\mathcal{C}} $ is a countable normal model of $ \Sigma $ by \ref{lem:2.6.3}. So if $ \phi $ is closed and $ \B \vDash \phi $ then $ \widehat{\mathcal{C}} \vDash \phi $. Conversely if $ \phi $ is closed and $ \B \not\vDash \phi $ then $ \B \vDash \notb{\phi} $ by \ref{thm:2.3.3}, so $ \widehat{\mathcal{C}} \vDash \notb{\phi} $ so $ \widehat{\mathcal{C}} \not\vDash \phi $. Take $ \A = \widehat{\mathcal{C}} $.
\end{proof}

\subsection{Examples and applications}

Let $ \L^= $ be a first-order language with equality and a binary relation symbol $ \le $.

\begin{definition}
A \textbf{linear order} or \textbf{loset} $ \A = \ab{A; \le_A} $ is a normal model of
\begin{enumerate}
\item $ \phi_1 $, $ \fab{x_1}\fab{x_2}\iffb{\andb{\rb{x_1 \le x_2}}{\rb{x_2 \le x_1}}}{\eqb{x_1}{x_2}} $,
\item $ \phi_2 $, $ \fab{x_1}\fab{x_2}\fab{x_3}\impb{\andb{\rb{x_1 \le x_2}}{\rb{x_2 \le x_3}}}{\rb{x_1 \le x_3}} $, and
\item $ \phi_3 $, $ \fab{x_1}\fab{x_2}\orb{\rb{x_1 \le x_2}}{\rb{x_2 \le x_1}} $.
\end{enumerate}
It is \textbf{dense} if also
\begin{enumerate}
\setcounter{enumi}{3}
\item $ \phi_4 $, $ \fab{x_1}\fab{x_2}\teb{x_3}\impb{\rb{x_1 < x_2}}{\andb{\rb{x_1 < x_3}}{\rb{x_3 < x_2}}} $,
\end{enumerate}
where $ \rb{x_1 < x_2} $ is an abbreviation for $ \andb{\rb{x_1 \le x_2}}{\rb{x_1 \ne x_2}} $. It is \textbf{without endpoints} if
\begin{enumerate}
\setcounter{enumi}{4}
\item $ \phi_5 $, $ \fab{x_1}\teb{x_2}\rb{x_1 < x_2} $, and
\item $ \phi_6 $, $ \fab{x_1}\teb{x_2}\rb{x_2 < x_1} $.
\end{enumerate}
Let $ \Delta = \cb{\phi_1, \dots, \phi_6} $. $ \mathcal{Q} = \ab{\Q; \le} $ is a normal model of $ \Delta $. $ \mathcal{R} = \ab{\R; \le} $ is also a model of $ \Delta $.
\end{definition}

Will prove the following.

\begin{theorem}
\label{thm:2.7.2}
\hfill
\begin{enumerate}
\item For every closed $ \L^= $-formula $ \phi $ $ \mathcal{Q} \vDash \phi $ iff $ \mathcal{R} \vDash \phi $.
\item There is an algorithm to decide, given a closed $ \L^= $-formula $ \phi $, whether $ \mathcal{Q} \vDash \phi $ or $ \mathcal{Q} \vDash \notb{\phi} $.
\end{enumerate}
\end{theorem}

\begin{definition}
\label{def:2.7.3}
\hfill
\begin{enumerate}
\item Losets $ \A = \ab{A; \le_A} $ and $ \B = \ab{B; \le_B} $ are \textbf{isomorphic} if there is a bijection $ \alpha : A \to B $ such that for all $ a, a' \in A $ $ a \le_A a' $ iff $ \alpha\rb{a} \le_B \alpha\rb{a'} $.
\item If $ \A, \B $ are isomorphic and $ \phi $ is closed then $ \A \vDash \phi $ iff $ \B \vDash \phi $.
\end{enumerate}
\end{definition}

\begin{theorem}[Cantor]
\label{thm:2.7.4}
If $ \A, \B $ are countable dense losets without endpoints, then $ \A, \B $ are isomorphic.
\end{theorem}

\begin{lemma}[Los-Vaught test]
\label{lem:2.7.5}
Let $ \Sigma = \Sigma_E \cup \Delta $. Then for every closed $ \L^= $-formula $ \phi $, we have either $ \Sigma \vdash \phi $ or $ \Sigma \vdash \notb{\phi} $. Say $ \Sigma $ is complete.
\end{lemma}

\begin{proof}
Suppose not. Then as $ \Sigma $ is consistent, it has a model, we can use \ref{prop:2.5.2} to get $ \Sigma_1 = \Sigma \cup \cb{\notb{\phi}} $ and $ \Sigma_2 = \Sigma \cup \cb{\notb{\notb{\phi}}} $ are consistent. So $ \Sigma \cup \cb{\phi} $ is consistent. By \ref{thm:2.5.3}, \ref{lem:2.6.4} it follows that $ \Sigma_1, \Sigma_2 $ have countable normal models $ \A_1, \A_2 $. So $ \A_1, \A_2 $ are countable dense l without endpoints and $ \A_1 \vDash \notb{\phi} $ and $ \A_2 \vDash \phi $. This contradicts \ref{thm:2.7.4} and \ref{def:2.7.3}(2).
\end{proof}

\begin{proof}[Proof of \ref{thm:2.7.2}(1)]
Show $ \mathcal{Q} \vDash \phi $ iff $ \Sigma \vdash \phi $.
\begin{itemize}
\item[$ \impliedby $] As $ \mathcal{Q} \vDash \Sigma $ this is \ref{thm:2.4.5}.
\item[$ \implies $] If $ \Sigma \not\vdash \phi $ then by \ref{lem:2.7.5} $ \Sigma \vdash \notb{\phi} $. So $ \mathcal{Q} \vDash \notb{\phi} $, so $ \mathcal{Q} \not\vDash \phi $.
\end{itemize}
Similarly $ \mathcal{R} \vDash \phi $ iff $ \Sigma \vdash \phi $. So $ \mathcal{R} \vDash \phi $ iff $ \Sigma \vdash \phi $, iff $ \mathcal{Q} \vDash \phi $.
\end{proof}

\marginpar{Lecture 19 \\ Thursday \\ 15/11/18}

Lecture 19 is a problem class.

\marginpar{Lecture 20 \\ Friday \\ 16/11/18}

Want an algorithm which decides, given closed $ \theta $, whether $ \ab{\Q; \le} \vDash \theta $ or $ \ab{\Q; \le} \not\vDash \theta $, that is $ \ab{\Q; \le} \vDash \notb{\theta} $, by \ref{thm:2.3.3}. $ \Sigma $ is a \textbf{recursively enumerable} set of formulas, that is we can write an algorithm to systematically generate the formulas in $ \Sigma $. Note that the set of axioms for $ K_{\L} $ is also recursively enumerable. So the set of deductions from $ \Sigma $ is recursively enumerable. Therefore the set of consequences of $ \Sigma $ is recursively enumerable. Method is to run the algorithm which generates all consequences of $ \Sigma $. By \ref{thm:2.7.2}(1) at some point, we will see either $ \theta $ or $ \notb{\theta} $. At this point, the method stops.

\begin{note}
\hfill
\begin{enumerate}
\item Depends on
\begin{enumerate}
\item the Completeness theorem, and
\item the axioms $ \Delta $ for $ \ab{\Q; \le} $,
\end{enumerate}
\item Works for some other structures. Can have better algorithms.
\item But there is no such algorithm for $ \ab{\N; +, \cdot, 0} $. This is Gödel's incompleteness theorem.
\end{enumerate}
\end{note}

\section{Set theory}

\setcounter{subsection}{-1}

\subsection{Basic set theory}

\begin{enumerate}
\addtocounter{enumi}{-1}
\item Extensionality. Sets $ A $ and $ B $ are equal iff $ \fab{x}\iffb{\inb{x}{A}}{\inb{x}{B}} $.
\item Natural numbers $ \N = \cb{0, 1, \dots} $. Think of $ 0 = \emptyset $ and $ n + 1 = \cb{0, \dots, n} $. Note that for $ m, n \in \N $, $ m < n $ iff $ m \in n $, iff $ m \subsetneq n $.
\item Ordered pairs. The ordered pair $ \rb{x, y} $ is the set $ \cb{\cb{x}, \cb{x, y}} $. For example, for any $ x, y, z, w $, $ \rb{x, y} = \rb{z, w} $ iff $ x = z $ and $ y = w $. If $ A, B $ are sets, then $ A \times B = \cb{\rb{a, b} \mid a \in A, \ b \in B} $. $ A^2 = A \times A $ and $ A^{n + 1} = A^n \times A $. The set of finite sequences of elements of $ A $ is $ \cup_{n \in \N} A^n $. $ A^0 = \cb{\emptyset} $.
\item Functions. Think of a function $ f : A \to B $ as a subset of $ A \times B $. $ A = dom\rb{f} $ is the domain and $ B = ran\rb{f} $ is the range. If $ X \subseteq A $ $ f\sb{X} = \cb{f\rb{a} \mid a \in X} \subseteq B $. Set of functions from $ A $ to $ B $ is $ B^A \subseteq \wp\rb{A \times B} $, where $ \wp $ is the powerset, that is the set of all subsets.
\end{enumerate}

\subsection{Cardinality}

\begin{definition}
Sets $ A, B $ are \textbf{equinumerous}, or of the \textbf{same cardinality}, if there is a bijection $ f : A \to B $. Write $ A \approx B $ or $ \abs{A} = \abs{B} $.
\end{definition}

\begin{definition}
A set $ A $ is \textbf{finite} if it is equinumerous with some element of $ \N $. $ n = \cb{0, \dots, n - 1} $. A set $ A $ is \textbf{countably infinite} if it is equinumerous with $ \N $. \textbf{Countable} is finite or countably infinite.
\end{definition}

\begin{proposition}
The following are basic facts.
\begin{enumerate}
\item Every subset of a countable set is countable.
\item A set $ A $ is countable iff there is an injective function $ f : A \to \N $.
\item If $ A, B $ are countable, then $ A \times B $ is countable.
\item If $ A_0, A_1, \dots $ are countable then $ \cup_{i \in \N} A_i $ is countable.
\end{enumerate}
\end{proposition}

Proof of $ 4 $ uses axiom of choice.

\begin{example}
\hfill
\begin{enumerate}
\item $ \Q $ is countable.
\item $ \cup_{n \in \N} A^n $ is countable if $ A $ is countable.
\item $ \R $ is not countable by Cantor.
\end{enumerate}
\end{example}

\begin{theorem}[Cantor]
\label{thm:3.1.4}
If $ X $ is any set, then $ \wp\rb{X} $ is the set of all subsets of $ X $. There is no surjective function $ f : X \to \wp\rb{X} $.
\end{theorem}

\begin{proof}
Suppose there is such an $ f $. Let $ Y = \cb{y \in X \mid y \notin f\rb{y}} $. There is $ z \in X $ with $ f\rb{z} = Y $. If $ z \in Y $ then $ z \notin f\rb{z} = Y $. If $ z \notin Y $ then $ z \notin f\rb{z} $ so $ z \in Y $. Contradiction.
\end{proof}

\marginpar{Lecture 21 \\ Monday \\ 19/11/18}

\begin{definition}
For sets $ A, B $ write $ \abs{A} \le \abs{B} $ or $ A \le B $ if there is an injective function $ f : A \to B $.
\end{definition}

\begin{note}
$ \abs{x} \le \abs{\wp\rb{x}} $ use $ x \mapsto \cb{x} $. So, as $ \abs{x} \ne \abs{\wp\rb{x}} $ by \ref{thm:3.1.4}, we have $ \abs{x} < \abs{ \wp\rb{x}} $.
\end{note}

\begin{example}
If $ \abs{A} \le \abs{B} $ and $ \abs{B} \le \abs{C} $ then $ \abs{A} \le \abs{C} $.
\end{example}

\begin{theorem}[Schröder-Bernstein]
\label{thm:3.1.6}
Suppose $ A, B $ are sets and $ f : A \to B $ and $ g : B \to A $ are injective functions. Then $ A \approx B $. That is $ \abs{A} \le \abs{B} $ and $ \abs{B} \le \abs{A} $ then $ \abs{A} = \abs{B} $.
\end{theorem}

\begin{proof}
Let $ h = g \circ f : A \to A $. Let $ A_0 = A \setminus g\sb{B} $ and for $ n > 0 $ let $ A_n = h\sb{A_{n - 1}} $. Let $ A^* = \cup_{n \in \N} A_n $ and $ B^* = f\sb{A^*} $. Note that $ h\sb{A^*} \subseteq A^* $ so $ g\sb{B^*} = h\sb{A^*} \subseteq A^* $. Claim that $ g\sb{B \setminus B^*} = A \setminus A^* $. Once we have this $ f $ gives a bijection $ A^* \to B^* $ and $ g $ gives a bijection $ B \setminus B^* \to A \setminus A^*$. So
$$ k\rb{a} = \begin{cases} f\rb{a} & a \in A^* \\ g^{-1}\rb{a} & a \in A \setminus A^* \end{cases} $$
is a bijection.
\begin{enumerate}
\item Let $ a \in A \setminus A^* $. As $ a \notin A_0 $ there is $ b \in B $ with $ g\rb{b} = a $. Then $ b \notin B^* $ as $ b \in B^* = f\sb{A^*} $ gives $ a = g\rb{b} \in h\sb{A^*} \subseteq A^* $, a contradiction, so $ g\sb{B \setminus B^*} \supseteq A \setminus A^* $.
\item Let $ b \in B $. Suppose $ g\rb{b} \in A^* $. Show $ b \in B^* $. As $ g\rb{b} \notin A_0 = A \setminus g\sb{B} $ we have $ g\rb{b} \in A_n $ for some $ n > 0 $. So $ g\rb{b} = h\rb{a} $ for some $ a \in A_{n - 1} $. So $ g\rb{b} = g\rb{f\rb{a}} $, so $ b = f\rb{a} $ for some $ a \in A^* $. Thus $ b \in f\sb{A^*} = B^* $.
\end{enumerate}
\end{proof}

\begin{example}
The following sets are equinumerous.
\begin{enumerate}
\item $ S_1 = \cb{0, 1}^\N $, the set of all sequences of zeroes and ones.
\item $ S_2 = \R $.
\item $ S_3 = \wp\rb{\N} $.
\item $ S_4 = \wp\rb{\N \times \N} $.
\item $ S_5 = \N^\N $, the set of all sequences of natural numbers.
\end{enumerate}
Find injective functions $ f_{i, j} : S_i \to S_j $ for $ i, j \in \cb{1, \dots, 5} $. Then use \ref{thm:3.1.6}. As $ \N \times \N \approx \N $ we get $ S_3 \approx S_4 $. Also $ S_1 \subseteq S_5 \subseteq S_4 $. Have a bijection $ f_{3, 1} : \wp\rb{\N} \to \cb{0, 1}^\N $. For $ X \subseteq \N $ $ f_{3, 1}\rb{X} = \rb{a_n}_{n \in \N} $ where
$$ a_n = \begin{cases} 0 & n \notin X \\ 1 & n \in X \end{cases}. $$
$ f_{1, 2} : \cb{0, 1}^\N \to \R $ by $ \rb{a_n}_{n \in \N} \mapsto 0 . a_1a_2 \dots $, the decimal expansion, is injective. $ f_{2, 5} : \R \to \N^\N $ by
$$ n . m_1m_2 \dots \mapsto \begin{cases} \rb{0, n, m_1, m_2, \dots} & n \ge 0 \\ \rb{1, -n, m_1, m_2, \dots} & n < 0 \end{cases}. $$
\end{example}

The following are questions.
\begin{enumerate}
\item If $ A, B $ are sets do we have $ \abs{A} \le \abs{B} $ or $ \abs{B} \le \abs{A} $? If we assume axiom of choice, yes.
\item Is there $ X \subseteq \R $ with $ \abs{\N} < \abs{X} < \abs{\R} $? Continuum hypothesis says no.
\end{enumerate}

\subsection{Axioms for set theory}

\textbf{Zermelo-Fraenkel axioms} say how we are allowed to build sets. All can be expressed in a first-order language with equality using a single binary relation symbol $ \in $. Have to avoid Russell paradox, $ S = \cb{x \mid x \notin x} $. If this is a set, is $ S \in S $? $ \teb{S}\fab{x}\iffb{\inb{x}{S}}{\nib{x}{x}} $ leads to inconsistency.

\begin{axiom}[Axiom of extensionality]
Two sets are equal iff they have the same elements.
$$ \fab{x}\fab{y}\iffb{\eqb{x}{y}}{\fab{z}\iffb{\inb{z}{x}}{\inb{z}{y}}}. $$
\end{axiom}

\begin{axiom}[Empty set axiom]
$$ \teb{x}\fab{y}\nib{y}{x}. $$
There is a unique set $ x $ with this property, $ \emptyset $.
\end{axiom}

\marginpar{Lecture 22 \\ Thursday \\ 22/11/18}

\begin{axiom}[Pairing axiom]
Given sets $ x, y $ then we can form $ z = \cb{x, y} $.
$$ \fab{x}\fab{y}\teb{z}\fab{w}\iffb{\inb{w}{z}}{\orb{\eqb{w}{x}}{\eqb{w}{y}}}. $$
\end{axiom}

\begin{note}
\hfill
\begin{enumerate}
\item Use twice to form $ \rb{x, y} = \cb{\cb{x}, \cb{x, y}} $.
\item Use to produce $ 0 = \emptyset $, $ 1 = \cb{\emptyset} $, $ 2 = \cb{0, 1} $.
\end{enumerate}
\end{note}

\begin{axiom}[Union axiom]
For any set $ A $ there is a set $ B = \cup A $.
$$ \fab{A}\teb{B}\fab{x}\iffb{\inb{x}{B}}{\teb{z}\andb{\inb{z}{A}}{\inb{x}{z}}}. $$
So $ B = \cup \cb{z \mid z \in A} $. If $ A = \cb{x, y} $ then $ B = x \cup y $.
\end{axiom}

\begin{example}
$ 3 = \cb{0, 1, 2} = \cb{0, 1} \cup \cb{2} $.
\end{example}

\begin{axiom}[Power set axiom]
For any set $ A $, there is a set $ \wp\rb{A} $ whose elements are the subsets of $ A $.
$$ \fab{A}\teb{B}\fab{z}\iffb{\inb{z}{B}}{\subb{z}{A}}. $$
$ \subb{z}{A} $ means $ \fab{y}\impb{\inb{y}{z}}{\inb{y}{A}} $.
\end{axiom}

\begin{axiom}[Axiom scheme of specification]
Suppose $ P\rb{x, y_1, \dots, y_r} $ is a formula in our language. Then we have an axiom
$$ \fab{A}\fab{y_1} \dots \fab{y_r}\teb{B}\fab{x}\iffb{\inb{x}{B}}{\andb{\inb{x}{A}}{P\rb{x, y_1, \dots, y_r}}}. $$
So this guarantees we can form the subset of $ A $, $ B = \cb{x \in A \mid P\rb{x, y_1, \dots, y_r}} $, for all given sets $ A, y_1, \dots, y_r $.
\end{axiom}

\begin{example}
\hfill
\begin{enumerate}
\item Let $ C $ be any non-empty set and $ A \in C $. Then $ \cap C = \cb{x \in A \mid P\rb{x, C} = \fab{z}\impb{\inb{z}{C}}{\inb{x}{z}}} $.
\item $ A \times B = \cb{w \in \wp\rb{\wp\rb{A \cup B}} \mid \teb{a}\teb{b}\rb{\inb{a}{A} \land \inb{b}{A} \land \eqb{w}{\cb{\cb{a}, \cb{a, b}}}}} $.
\end{enumerate}
\end{example}

\begin{definition}
For a set $ a $ the \textbf{successor} of $ a $ is $ a^\dagger = a \cup \cb{a} $. A set $ A $ is \textbf{inductive} if
$$ \andb{\inb{\emptyset}{A}}{\fab{x}\impb{\inb{x}{A}}{\inb{x^\dagger}{A}}}. $$
\end{definition}

\begin{example}
$ 2 = \cb{0, 1} = \cb{0} \cup \cb{1} = 1^\dagger $.
\end{example}

\begin{axiom}[Axiom of infinity]
$$ \teb{A}\andb{\inb{\emptyset}{A}}{\fab{x}\impb{\inb{x}{A}}{\inb{x^\dagger}{A}}}. $$
\end{axiom}

\begin{definition}
Let $ A $ be an inductive set. We can form using specification the set
$$ \N = \cb{x \in A \mid \text{if } B \text{ is an inductive set, then } x \in B}. $$
Informally, this is the intersection of all inductive sets. This does not depend on the choice of $ A $. Also denote this by $ \omega $.
\end{definition}

\begin{theorem}
\label{thm:3.2.3}
\hfill
\begin{enumerate}
\item $ \N $ is an inductive set, and if $ B $ is an inductive set, then $ \N \subseteq B $.
\item Proof by induction works. Suppose $ P\rb{x} $ is a property of sets, that is a formula, such that
\begin{enumerate}
\item $ P\rb{\emptyset} $ holds, and
\item for every $ k \in \N $, if $ P\rb{k} $ holds, then $ P\rb{k^\dagger} $ holds.
\end{enumerate}
Then $ P\rb{n} $ holds for all $ n \in \N $.
\end{enumerate}
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}
\item TODO Exercise: use definition.
\item Consider $ B \subseteq \N $ given by $ B = \cb{x \in \N \mid P\rb{x}} $. (a), (b) say that $ B $ is an inductive set. So by $ 1 $, $ \N \subseteq B $. Thus $ \N = B $.
\end{enumerate}
\end{proof}

Could develop arithmetic in $ \N $, using $ n^\dagger $ as $ n + 1 $, etc, and in $ \Z, \Q, \R $ in the usual way using Zermelo-Fraenkel $ 1 $ to $ 7 $. (TODO Exercise: hard, for $ m, n \in \N $ write $ m \le n $ to mean $ \orb{\eqb{m}{n}}{\inb{m}{n}} $, then this is a well-ordering on $ \N $)

\subsection{Well orderings}

\begin{definition}
A loset $ \ab{A; \le} $ is a \textbf{well-ordering} or a \textbf{woset} if every non-empty subset of $ A $ has a least element.
$$ \fab{X}\impb{\andb{\subb{X}{A}}{\rb{X \ne \emptyset}}}{\teb{x}\andb{\inb{x}{X}}{\fab{y}\impb{\inb{y}{X}}{\inb{x}{y}}}}. $$
\end{definition}

\begin{example}
$ \ab{\Z; \le} $ is not a woset. $ \ab{\N; \le} $ is a woset.
\end{example}

\marginpar{Lecture 23 \\ Friday \\ 23/11/18}

Suppose $ \A_1 = \ab{A_1; \le_1} $ and $ \A_2 = \ab{A_2; \le_2} $ are losets.

\begin{definition}
Say $ \A_1, \A_2 $ are \textbf{similar} or isomorphic if there is a bijection $ \alpha : A_1 \to A_2 $ with for all $ a, b \in A_1 $ $ a <_1 b $ iff $ \alpha\rb{a} <_2 \alpha\rb{b} $. Write $ \A_1 \simeq \mathcal \A_2 $. Say $ \alpha $ is a \textbf{similarity}. If $ a <_1 b $ gives $ \alpha\rb{a} <_2 \alpha\rb{b} $ say $ \alpha $ is \textbf{order-preserving}.
\end{definition}

\begin{definition}
\hfill
\begin{enumerate}
\item \textbf{Reverse-lexicographic product} $ \A_1 \times \A_2 = \ab{A_1 \times A_2; \le} $. $ \rb{a_1, a_2} \le \rb{a_1', a_2'} $ iff $ a_2 <_2 a_2' $ or ($ \rb{a_2 = a_2'} $ and $ \rb{a_1 \le_1 a_1'} $). In $ \A_2 $ replace each element by a copy of $ \A_1 $.
\item \textbf{Sum}. Regard $ A_1, A_2 $ as disjoint, by replacing them by similar orderings on disjoint sets, such as $ \cb{\rb{a, 0} : a \in A_1} $ and $ \cb{\rb{b, 1} \mid b \in A_2} $, and define $ \A_1 + \A_2 = \ab{A_1 \cup A_2; \le} $ where $ \le $ is the union of $ \le_1, \le_2 $ and $ a_1 \le a_2 $ for $ a_1 \in A_1 $ and $ a_2 \in A_2 $.
\end{enumerate}
\end{definition}

\begin{example}
\hfill
\begin{enumerate}
\item $ \N + \N $.
$$
\begin{array}{ccccccccccc}
\N & & & \qquad & 0 & 1 & \dots & \quad & & & \\
& & \N & \qquad & & & & \quad & 0 & 1 & \dots \\
\N & + & \N & \qquad & 0 & 1 & \dots & \quad & 0 & 1 & \dots
\end{array}.
$$
\item $ \cb{0, 1} \times \N $.
$$
\begin{array}{ccccccccccccccc}
& & \N & \qquad & & 0 & & \quad & & 1 & & \quad & & \dots & \\
\cb{0, 1} & \times & \N & \qquad & 0 & & 1 & \quad & 0 & & 1 & \quad & \dots & & \dots
\end{array}.
$$
Thus $ \cb{0, 1} \times \N \simeq \N $.
\item $ \N \times \cb{0, 1} $.
$$
\begin{array}{ccccccccccc}
\cb{0, 1} & & & \qquad & & 0 & & & & 1 & \\
\cb{0, 1} & \times & \N & \qquad & 0 & 1 & \dots & \quad & 0 & 1 & \dots
\end{array}.
$$
Thus $ \N \times \cb{0, 1} \simeq \N + \N $.
\end{enumerate}
\end{example}

\begin{lemma}
\hfill
\begin{enumerate}
\item $ \A_1 + \A_2 $, $ \A_1 \times \A_2 $ are losets.
\item If $ \A_1, \A_2 $ are wosets then so are $ \A_1 + \A_2 $ and $ \A_1 \times A_2 $.
\end{enumerate}
\end{lemma}

\begin{proof}
(TODO Exercise: complete proof) $ \A_1 \times \A_2 $ is a woset. Let $ \emptyset \ne X \subsetneq A_1 \times A_2 $. Let $ Y = \cb{b \in A_2 \mid \exists a \in A_1, \ \rb{a, b} \in X} \subseteq A_2 $. Let $ y $ be the least element of $ Y $. Let $ Z = \cb{z \in A_1 \mid \rb{z, y} \in X} $. This has a least element $ x $. Then $ \rb{x, y} $ is the least element of $ X $.
\end{proof}

\begin{definition}
Suppose $ \A = \ab{A; \le} $ is a loset. A subset $ X \subseteq A $ is an \textbf{initial segment} of $ A $ if for all $ x \in X $, for all $ a \in A $, if $ a < x $, then $ a \in X $. It is \textbf{proper} if $ X \ne A $.
\end{definition}

\begin{example}
Let $ b \in A $.
\begin{enumerate}
\item $ A\sb{b} = \cb{x \in A \mid x < b} $ is a proper initial segment.
\item $ A\sb{\le b} = \cb{x \in A \mid x \le b} $ is an initial segment.
\end{enumerate}
\end{example}

\begin{lemma}
\label{lem:3.3.6}
If $ \A = \ab{A; \le} $ is a woset, then every proper initial segment $ X $ is of the form $ A\sb{b} $ for some $ b \in A $.
\end{lemma}

\begin{note}
Not true for losets in general.
\end{note}

\begin{example}
$ \cb{x \in \Q \mid x < \pi} \subseteq \Q $ is not of the form $ \Q\sb{b} $ for some $ b \in \Q $.
\end{example}

\begin{proof}
Let $ b $ be the minimal element of $ A \setminus X $.
\end{proof}

\begin{theorem}
\label{thm:3.3.7}
Suppose $ \A_1 = \ab{A_1; \le_1} $ and $ \A_2 = \ab{A_2; \le_2} $ are wosets. Then exactly one of the following holds.
\begin{enumerate}
\item $ \A_1, \A_2 $ are similar,
\item $ \A_1 $ is similar to a proper initial segment of $ \A_2 $, or
\item $ \A_2 $ is similar to a proper initial segment of $ \A_1 $.
\end{enumerate}
In each case the similarity is unique.
\end{theorem}

\begin{proof}
For uniqueness, suppose we have order preserving $ \alpha, \beta : A_1 \to A_2 $ whose images are initial segments of $ A_2 $. Show $ \alpha = \beta $.
\begin{enumerate}
\item Check that if $ b \in A_1 $ then $ \alpha\rb{A_1\sb{b}} = A_2\sb{\alpha\rb{b}} $.
\item If $ \alpha \ne \beta $ take $ b \in A_1 $ minimal with $ \alpha\rb{b} \ne \beta\rb{b} $, so $ \alpha\rb{A_1\sb{b}} = \beta\rb{A_1\sb{b}} $. By step $ 1 $ $ A_2\sb{\alpha\rb{b}} = A_2\sb{\beta\rb{b}} $. Conclude that $ \alpha\rb{b} = \beta\rb{b} $, a contradiction.
\end{enumerate}
This shows
\begin{enumerate}
\item by taking $ A_1 = A_2 $ and $ \alpha $ the identity obtain that $ A_1 $ is not similar to a proper initial segment of itself, and
\item it follows that we cannot have two of $ 1 $, $ 2 $, $ 3 $ holding.
\end{enumerate}
For existence, suppose $ A_2 $ is not similar to an initial segment of $ A_1 $. Show $ A_1 $ is similar to a proper initial segment of $ A_2 $. Look at $ C $, where $ C $ is the $ c \in A_1 $ such that there is a similarity between $ A_1\sb{\le c} $ and an initial segment of $ A_2 $. If $ c \in C $ there is a unique $ \alpha_c : A_1\sb{\le c} \to A_2 $ with image an initial segment, by uniqueness part. Note that
\begin{enumerate}
\item $ C $ is an initial segment of $ A_1 $,
\item if $ c_1 < c_2 \in C $ then $ \alpha_{c_1} $ is the restriction of $ \alpha_{c_2} $ to $ A_1\sb{\le c_1} $, and
\item let $ \alpha = \cup \cb{\alpha_c \mid c \in C} $, then $ \alpha $ is a similarity between $ C $ and an initial segment of $ A_2 $.
\end{enumerate}
If $ C = A_1 $, done. Suppose $ C \ne A_1 $. Let $ a $ be the minimal element of $ A_1 \setminus C $. $ \alpha\rb{C} \ne A_2 $ otherwise $ A_2 $ is similar to $ C $ so $ 3 $ holds. So $ \alpha\rb{C} = A_2\sb{b} $ for some $ b \in A_2 $. Can extend $ \alpha $ by sending $ a $ to $ b $ and get $ A_1\sb{\le a} \simeq A_2\sb{\le b} $. Thus $ a \in C $, a contradiction.
\end{proof}

\marginpar{Lecture 24 \\ Monday \\ 26/11/18}

\begin{note}
In the notation of \ref{thm:3.3.7}, we have, in particular, an injective function $ A_1 \to A_2 $ for cases $ 1 $ and $ 2 $ or an injective function $ A_2 \to A_1 $. So either $ \abs{A_1} \le \abs{A_2} $ or $ \abs{A_2} \le \abs{A_1} $.
\end{note}

Axiom of choice gives any set $ A $ can be well-ordered. Putting this together with \ref{thm:3.3.7} gives for any sets $ A_1, A_2 $ $ \abs{A_1} \le \abs{A_2} $ or $ \abs{A_2} \le \abs{A_1} $.

\subsection{Ordinals}

We now define some very particular wosets which generalise the natural
numbers,
$$ 0 = \emptyset, \qquad 1 = 0^\dagger = \cb{\emptyset}, \qquad 2 = 1^\dagger = \cb{0, 1}, \qquad 3 = 2^\dagger = \cb{0, 1, 2}, \qquad \dots. $$
to the transfinite. For $ m, n \in \omega $ $ m < n $ iff $ m \in n $.


\begin{definition}
\hfill
\begin{enumerate}
\item A set $ X $ is a \textbf{transitive set} if every element of $ X $ is also a subset of $ X $, that is if $ y \in x \in X $ then $ y \in X $.
\item A set $ \alpha $ is an \textbf{ordinal} if
\begin{enumerate}
\item $ \alpha $ is a transitive set, and
\item the relation $ < $ on $ \alpha $ given by, for $ x, y \in \alpha $,
$$ x < y \qquad \iff \qquad x \in y $$
is a strict well-ordering on $ \alpha $.
\end{enumerate}
\end{enumerate}
\end{definition}

\begin{note}
As part of the definition, we have $ \alpha \notin \alpha $ for an ordinal $ \alpha $.
\end{note}

It is standard to use lower case Greek letters for ordinals. The ordering on an ordinal $ \alpha $ is sometimes denoted by $ \in_\alpha $.

\begin{lemma}
\label{lem:3.4.2}
If $ \alpha $ is an ordinal, then so is $ \alpha^\dagger = \alpha \cup \cb{\alpha} $.
\end{lemma}

\begin{proof}
As $ \alpha $ is a transitive set, then so is $ \alpha^\dagger = \alpha \cup \cb{\alpha} $. Moreover, the ordering $ \in $ restricted to $ \alpha^\dagger $ is an ordering. We have the ordering on $ \alpha $ with the extra element $ \alpha $ added on the end as the greatest element. This is a well-ordering, as the ordering on $ \alpha $ is a well-ordering.
\end{proof}

We also denote the ordinal $ \alpha^\dagger $ by $ \alpha + 1 $. It is of course similar to the ordered set $ \alpha + 1 $ as defined previously.

\begin{corollary}
If $ n \in \omega $, then $ n $ is an ordinal.
\end{corollary}

\begin{proof}
As $ \emptyset $ is an ordinal, this follows by induction \ref{thm:3.2.3} using \ref{lem:3.4.2} above.
\end{proof}

\begin{proposition}
\label{prop:3.4.4}
\hfill
\begin{enumerate}
\item If $ \alpha $ is an ordinal then $ \alpha \notin \alpha $.
\item If $ \alpha $ is an ordinal and $ \beta \in \alpha $ then $ \beta $ is an ordinal.
\item If $ \alpha, \beta $ are ordinals and $ \alpha \subsetneq \beta $ then $ \alpha \in \beta $.
\item If $ \alpha $ is an ordinal then $ \alpha $ is the set of $ \beta $ such that $ \beta $ is an ordinal and $ \beta \in \alpha $.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Otherwise $ \alpha $ has an element $ x = \alpha $ with $ x \in x $. But in terms of the ordering on $ \alpha $ this says $ x < x $, which is impossible.
\item First show $ \beta $ is a transitive set. So let $ x \in \beta $ and $ y \in x $. We want $ y \in \beta $. But we have $ y \in x \in \beta \in \alpha $. Using twice that $ \alpha $ is a transitive set we get that $ x, y \in \alpha $. So as the restriction of $ \in $ to $ \alpha $ is an ordering we get $ y \in \beta $. As $ \alpha $ is a transitive set $ \in_\beta $ is simply the restriction of $ \in_\alpha $ to $ \beta $, so this is a well-ordering.
\item Note that as $ \alpha \subsetneq \beta $, $ \beta \setminus \alpha $ is non-empty, so has a least element $ \gamma $, under $ \in_\beta $. We aim to show that $ \alpha = \gamma $. Think about $ \alpha $ and $ \beta $ as natural numbers to see why this is plausible. If $ x \in \gamma $ then $ x \in \beta $, so $ x \in \alpha $, as $ \gamma $ is the least element of $ \beta \setminus \alpha $. Thus $ \gamma \subseteq \alpha $. Conversely suppose there is some $ y \in \alpha \setminus \gamma $. Then, as $ \in $ is an ordering on $ \beta $ and $ y \notin \gamma $, either $ y = \gamma $ or $ \gamma \in y $. But in either case we get $ \gamma \in \alpha $ as $ \alpha $ is a transitive set. A contradiction. So $ \alpha \subseteq \gamma $.
\item Trivial, by $ 2 $.
\end{enumerate}
\end{proof}

\begin{definition}
If $ \alpha, \beta $ are ordinals we write $ \alpha < \beta $ to indicate that $ \alpha \in \beta $, and $ \alpha \le \beta $ has the obvious meaning.
\end{definition}

\begin{note}
By \ref{prop:3.4.4} above $ \alpha \le \beta $ iff $ \alpha \subseteq \beta $.
\end{note}

The following theorems can be paraphrased informally as saying that the class of all ordinals is well-ordered by $ \le $.

\begin{theorem}
\label{thm:3.4.6}
Suppose $ \alpha, \beta, \gamma $ are ordinals.
\begin{enumerate}
\item If $ \alpha < \beta $ and $ \beta < \gamma $ then $ \alpha < \gamma $.
\item If $ \alpha \le \beta $ and $ \beta \le \alpha $ then $ \alpha = \beta $.
\item Exactly one of $ \alpha < \beta $, $ \alpha = \beta $, $ \beta < \alpha $ holds.
\item If $ X $ is a non-empty set of ordinals, then $ X $ has a least element $ \delta $, and moreover, $ \delta = \cap X $.
\end{enumerate}
\end{theorem}

\begin{proof}
\hfill
\begin{enumerate}
\item If $ \alpha \in \beta \in \gamma $ then $ \alpha \in \gamma $ as $ \gamma $ is a transitive set.
\item Otherwise we have $ \alpha \in \beta $ and $ \beta \in \gamma $ whence $ \alpha \in \alpha $, contradicting \ref{prop:3.4.4}.
\item Certainly we already know that no more than one of these holds. Consider $ \alpha \cap \beta $. This is also an ordinal by $ 4 $. (TODO Exercise) Show that if $ \alpha \ne \beta $ then $ \alpha \subsetneq \beta $ or $ \beta \subsetneq \alpha $. If, for example $ \alpha \cap \beta = \alpha $ then $ \alpha \subseteq \beta $ and so $ \alpha \le \beta $. So for a contradiction, suppose $ \alpha \cap \beta $ is a proper subset of both $ \alpha $ and $ \beta $. Thus, by \ref{prop:3.4.4}(3), $ \alpha \cap \beta \in \alpha $ and $ \alpha \cap \beta \in \beta $. So $ \alpha \cap \beta \in \alpha \cap \beta $, a contradiction, all using $ \alpha \cap \beta $ is an ordinal.
\item Let $ \alpha \in X $ be any element and consider $ \alpha \cap X $. So this is the set of elements of $ X $ which are less than $ \alpha $. If this is empty then $ \alpha $ is the least element of $ X $. Otherwise, it is a non-empty subset of $ \alpha $ so has a least element $ \beta $. It is then obvious that $ \beta $ is the least element of $ X $. If $ \delta $ is the least element of $ X $, then $ \delta \subseteq \eta $ for all $ \eta \in X $. It follows that $ \delta = \cap X $.
\end{enumerate}
\end{proof}

\begin{corollary}
\hfill
\begin{enumerate}
\item If $ X $ is a non-empty set of ordinals, then $ \cup X $ is an ordinal.
\item $ \omega $ is an ordinal.
\end{enumerate}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item By \ref{thm:3.4.6}, $ X $ is well-ordered by $ \in $. So it is enough to show that $ \cup X $ is a transitive set. If $ y \in z \in \cup X $, there is $ x \in X $ with $ z \in x $. So $ y \in z \in x $ and therefore $ y \in x $. So $ y \in \cup X $, as required.
\item Check that $ \cup \omega = \omega $, and use $ 1 $.
\end{enumerate}
\end{proof}

So we can now form ordinals
$$ \omega^\dagger = \cb{0, 1, \dots, \omega}, \qquad \rb{\omega^\dagger}^\dagger = \cb{0, 1, \dots, \omega, \omega^+}, \qquad \dots. $$
Just as the natural numbers provided us with canonical examples of finite sets, we will now show that ordinals do the same thing for all wosets.

\begin{theorem}
\label{thm:3.4.8}
If $ \ab{A; \le} $ is a woset, then there is a unique ordinal $ \alpha $ which is similar to $ \ab{A; \le} $.
\end{theorem}

\begin{proof}
For uniqueness, suppose $ \ab{A; \le} $ is similar to ordinals $ \alpha, \beta $. Then $ \alpha $ and $ \beta $ are similar. Without loss of generality, may assume $ \alpha \le \beta $, so if $ \alpha \ne \beta $ we have that $ \alpha < \beta $. $ \alpha $ is therefore a proper initial segment of $ \beta $, and so $ \beta $ is similar to a proper initial segment of itself, which contradicts \ref{thm:3.3.7}. This establishes the uniqueness part of the statement. Now for existence, we show that there is some ordinal similar to $ A $. Let
$$ X = \cb{x \in A \mid \text{the initial segment } A\sb{x} \text{ is similar to an ordinal}}. $$
Note that if $ A \ne \emptyset $, then the least element of $ A $ is in $ X $. Note that by uniqueness, if $ x \in X $ then $ A\sb{x} $ is similar to a unique ordinal $ \alpha_x $. Let
$$ S = \cb{\alpha_x \mid x \in X}. $$
So $ S $ is a set of ordinals. In fact, $ S $ is an ordinal. To see this note that we need to only show that it is a transitive set, that is if $ \beta \in \alpha_x \in S $ then $ \beta \in S $. Let $ \alpha_x \in S $ and let $ \pi : A\sb{x} \to \alpha_x $ be a similarity. If $ \beta \in \alpha_x $ let $ y = \pi^{-1}\rb{\beta} $. Then the restriction of $ \pi $ to $ A\sb{y} $ gives a similarity $ A\sb{y} \to \cb{\delta \in \alpha_x \mid \delta < \beta} = \beta $. So $ \beta = \alpha_y \in S $. So now write $ \alpha $ instead of $ S $. By what we already did, this argument also shows that $ X $ is an initial segment of $ A $. If we knew that $ A = X $, then we would be done as the function $ X \to \alpha $ given by $ x \mapsto \alpha_x $ is easily seen to be a similarity $ A \to \alpha $. So suppose that $ X \ne A $, so $ X $ is a proper initial segment of $ A $. By \ref{lem:3.3.6} we have that $ X = A\sb{z} $ for some $ z \in A \setminus X $. Know that $ x \mapsto \alpha_x $ gives a similarity $ X \to \alpha $. But then $ z \in X = A\sb{z} $, by definition of $ X $, a contradiction. So $ X = A $ and $ A \simeq \alpha $.
\end{proof}

\marginpar{Lecture 25 \\ Thursday \\ 29/11/18}

There is a problem with this proof. Why is $ S $ a set? No combination of the axioms we have given so far actually justifies the existence of such a set. There is no alternative but to assume another axiom about how we are allowed to create new sets from old ones.

\begin{definition}
\label{def:3.4.9}
Suppose $ F\rb{x, y, z_1, \dots, z_r} $ is a property of sets, expressible in our first-order language such that, whenever $ s_1, \dots, s_r $ are sets, for every set $ b $ there is a unique set $ a $ where $ F\rb{a, b, s_1, \dots, s_r} $ holds. $ F $ is called an \textbf{operation} on sets, with $ z_1, \dots, z_r $ being \textbf{parameter variables}, and the $ s_1, \dots, s_r $ are referred to as the \textbf{parameters} of the operation, and $ F\rb{x, y, s_1, \dots, s_r} $ gives us a function on sets $ b \mapsto a $.
\end{definition}

\begin{example}
$ F\rb{a, b} $ says $ a $ is the power set of $ b $ has no parameter variables. $ F\rb{a, b, c} $ says $ a $ is the set of functions from $ b $ to $ c $ has a parameter $ c $.
\end{example}

\begin{axiom}[Axiom of replacement]
Suppose $ F\rb{x, y, z_1, \dots, z_r} $ is an operation on sets as above and $ s_1, \dots, s_r $ are sets and $ B $ is a set. Then there is a set $ A $ such that
$$ A = \cb{a \mid \exists b \in B, \ F\rb{a, b, s_1, \dots, s_r}}. $$
\end{axiom}

So here the set $ A $ is obtained from $ B $ by replacing each $ b \in B $ by the corresponding set $ a $ for which $ F\rb{a, b, s_1, \dots, s_r} $ holds. If we allow ourselves this axiom then the set $ S $ in the above proof of \ref{thm:3.4.8} is justified. Obtain $ S $ from $ X $ using the operation $ F\rb{a, b} $ to say either $ b $ is a woset similar to the ordinal $ a $, or $ b $ is not a woset and $ a = \emptyset $. Then apply this to $ B = \cb{A\sb{x} \mid x \in X} $ to get $ S = \cb{x \mid \exists y \in X, \ F\rb{x, A\sb{y}}} $.

\subsection{Transfinite induction}

\begin{theorem}[Transfinite induction]
Suppose $ P\rb{x} $ is a property of sets. Assume that for all ordinals $ \alpha $, if $ P\rb{\beta} $ holds for all ordinals $ \beta < \alpha $, then $ P\rb{\alpha} $ holds. Then $ P\rb{\gamma} $ holds for all ordinals $ \gamma $.
\end{theorem}

\begin{proof}
Note that if $ \alpha = 0 = \emptyset $ then $ P\rb{\beta} $ holds for all $ \beta < \alpha $, vacuously. So by assumption $ P\rb{0} $ holds. Suppose for a contradiction that there is some ordinal $ \gamma $ such that $ P\rb{\gamma} $ does not hold. There is a least such $ \gamma $, call it $ \alpha $, by applying \ref{thm:3.4.6}(4) to $ \cb{\beta \mid \beta \le \gamma, \ \neg P\rb{\beta}} $. Thus, for an ordinal $ \beta < \alpha $, $ P\rb{\beta} $ holds. By assumption, $ P\rb{\alpha} $ holds, a contradiction.
\end{proof}

\begin{theorem}
\label{thm:3.5.2}
Suppose $ \alpha $ is an infinite ordinal, that is $ \omega \le \alpha $. Then $ \alpha \approx \alpha \times \alpha $.
\end{theorem}

\begin{corollary}
\hfill
\begin{enumerate}
\item If $ \ab{A; \le} $ is an infinite woset then $ \abs{A} = \abs{A \times A} $.
\item Assuming axiom of choice, if $ A $ is any infinite set then $ \abs{A} = \abs{A \times A} $.
\end{enumerate}
\end{corollary}

\begin{proof}
\hfill
\begin{enumerate}
\item By \ref{thm:3.4.8}, there is an ordinal $ \alpha $ with $ \alpha \approx A $. So $ \abs{A} = \abs{A \times A} $ follows from \ref{thm:3.5.2}.
\item By axiom of choice, $ A $ can be well-ordered, so $ 2 $ follows from $ 1 $.
\end{enumerate}
\end{proof}

$ 2 $ is called the \textbf{fundamental theorem of cardinal arithmetic}.

\marginpar{Lecture 26 \\ Friday \\ 30/11/18}

\begin{proof}[Proof of Theorem \ref{thm:3.5.2}]
Assume if $ \omega \ne \beta < \alpha $ then $ \beta \approx \beta \times \beta $, by transfinite induction hypothesis, and deduce $ \alpha \approx \alpha \times \alpha $. May assume if $ \beta < \alpha $ then $ \abs{\beta} < \abs{\alpha} $. Implies $ \abs{\beta^\dagger} < \abs{\alpha} $. Enough to show $ \abs{\alpha \times \alpha} \le \abs{\alpha} $, by \ref{thm:3.1.6}.
\begin{enumerate}
\item Prove that suppose we have a well-ordering $ \le $ of $ A = \alpha \times \alpha $ such that for all $ x \in A $ $ \abs{A\sb{x}} = \cb{y \in A \mid y \le x} < \abs{\alpha} $, then $ \abs{\alpha \times \alpha} = \abs{\alpha} $. By \ref{thm:3.4.6} there is an ordinal $ \gamma $ which is similar to $ \ab{A; \le} $. Let $ f : \gamma \to A $ be the similarity. Show $ \gamma \subseteq \alpha $, so $ \abs{\gamma} \le \abs{\alpha} $, so $ \abs{A} \le \abs{\alpha} $. Let $ \eta \in \gamma $, so $ \eta < \gamma $. As $ f $ is a similarity, it gives a bijection $ \eta = \cb{\delta \in \gamma \mid \delta < \eta} \to A\sb{f\rb{\eta}} $. So $ \abs{\eta} = \abs{A\sb{f\rb{\eta}}} < \abs{\alpha} $. Thus $ \eta < \alpha $, otherwise $ \alpha \le \eta $, so $ \alpha \subseteq \eta $ and then $ \abs{\alpha} \le \abs{\eta} $, a contradiction. Thus $ \eta \in \alpha $.
\item Find an ordering $ \le $ on $ \alpha \times \alpha = A $ as in step $ 1 $. For $ \lambda < \alpha $ let $ A_\lambda = \cb{\rb{\theta, \zeta} \in \alpha \times \alpha \mid \max\rb{\theta, \zeta} = \lambda} $. Define $ \le $ on $ A $ by $ \rb{\theta', \zeta'} < \rb{\theta, \zeta} $ iff $ \max\rb{\theta', \zeta'} < \max\rb{\theta, \zeta} $ or $ \max\rb{\theta', \zeta'} = \lambda = \max\rb{\theta, \zeta} $ and one of
\begin{enumerate}
\item $ \zeta = \zeta' = \lambda $ and $ \theta' < \theta $,
\item $ \zeta' < \zeta = \lambda $, or
\item $ \theta = \theta' = \lambda $ and $ \zeta < \zeta' $.
\end{enumerate}
(TODO Exercise: check $ \le $ is a well-ordering on $ A $) Show property in step $ 1 $ holds. Let $ x = \rb{\theta, \zeta} \in A $. Let $ \lambda = \max\rb{\theta, \zeta} $. May assume $ \lambda \ge \omega $. Let $ \mu = \lambda^\dagger $. So $ \mu < \alpha $ and by inductive hypothesis $ \abs{\mu \times \mu} = \abs{\mu} < \abs{\alpha} $. $ \cb{y \in A \mid y < x} \subseteq \cb{\rb{\theta', \zeta'} \in A \mid \max\rb{\theta', \zeta'} \le \lambda} \subseteq \mu \times \mu $. Thus $ \abs{A\sb{x}} \le \abs{\mu \times \mu} < \abs{\alpha} $.
\end{enumerate}
\end{proof}

\subsection{Transfinite recursion}

Allows us to construct, for ordinals $ \alpha $, sets $ G\rb{\alpha} $ so that $ G\rb{\alpha} $ is obtained from sets $ G\rb{\beta} $ for $ \beta < \alpha $ by applying some operation $ F : G\rb{0}, \dots, G\rb{\beta} \to G\rb{\alpha} $, where $ G \upharpoonright \alpha = G\rb{0}, \dots, G\rb{\beta} $. $ G $ is also an operation. $ G \upharpoonright \alpha : \alpha \to \cb{G\rb{\beta} \mid \beta < \alpha} $, which is a set by axiom of replacement. Let $ F $ be an operation on sets. Denote by $ F\rb{b} $ the result of applying $ F $ to the set $ b $ by \ref{def:3.4.9}.

\begin{theorem}[Transfinite recursion]
Suppose $ F $ is an operation. Then there is an operation $ G $ such that for all ordinals $ \alpha $ we have $ G\rb{\alpha} = F\rb{G \upharpoonright \alpha} $. If $ G' $ is another such operation then $ G\rb{\alpha} = G'\rb{\alpha} $ for all ordinals $ \alpha $.
\end{theorem}

In practice, we usually do not write $ F $ down explicitly as a first-order formula.

\begin{remark}
An application is Lindenbaum's lemma, compare \ref{prop:1.3.8} and \ref{prop:2.5.2}. Suppose $ \L $ is a first order language whose alphabet of symbols can be well-ordered. Suppose $ \Sigma $ is a consistent set of closed $ \L $-formulas. Then there is a consistent set $ \Sigma^* \supseteq \Sigma $ of closed $ \L $-formulas such that for every closed $ \L $-formula $ \psi $ either $ \Sigma^* \vdash \psi $ or $ \Sigma^* \vdash \notb{\psi} $.
\end{remark}

\begin{proof}
The set of $ \L $-formulas can be well-ordered. Any subset of a woset is well-ordered so the set of closed $ \L $-formulas is well-ordered. Any woset is similar to some ordinal by \ref{thm:3.4.8}. So we can write the set of closed $ \L $-formulas as $ \cb{\phi_\alpha \mid \alpha < \lambda} $ for some ordinal $ \lambda $.
\end{proof}

\end{document}
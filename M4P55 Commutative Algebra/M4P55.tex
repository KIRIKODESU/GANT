\def\module{M4P55 Commutative Algebra}
\def\lecturer{Prof Alexei Skorobogatov}
\def\term{Autumn 2018}
\def\cover{
$$
\begin{tikzpicture}
\draw [fill=black, opacity=0.2, very thick] (0, 2) circle (7.5);
\draw (0, 9) node{Modules};
\draw [fill=black, opacity=0.2, very thick] (0, -1.25) ellipse (5 and 4.25);
\draw (0, -5) node{Noetherian modules};
\draw [fill=black, opacity=0.2, very thick] (0, 2) circle (6.5);
\draw (0, 8) node{Rings};
\draw [fill=black, opacity=0.2, very thick] (0, -0.75) ellipse (4.5 and 3.75);
\draw (0, -4) node{Noetherian rings};
\draw [fill=black, opacity=0.2, very thick] (0, 2) circle (5.5);
\draw (0, 6.5) node{Integral domains};
\draw [fill=black, opacity=0.2, very thick] (0, -0.25) ellipse (4.25 and 3.25);
\draw (0, -3) node{Noetherian domains};
\draw [fill=black, opacity=0.2, very thick] (0, 1.75) ellipse (4.75 and 4.25);
\draw (0, 5) node{Integrally closed domains};
\draw [fill=black, opacity=0.2, very thick] (0, 1.75) ellipse (4 and 2.75);
\draw (0, 3.5) node{Unique factorisation domains};
\draw [fill=black, opacity=0.2, very thick] (0, 0.25) ellipse (4 and 2.75);
\draw (0, -2) node{Dedekind domains};
\draw (0, 2.5) node{Principal ideal domains};
\draw [fill=darkgray, opacity=0.2, very thick] (0, 0.5) ellipse (2.5 and 1.5);
\draw (0, 1.5) node{Euclidean domains};
\draw [fill=darkgray, opacity=0.2, very thick] (0, 0) circle (1);
\draw (0, 0) node{Fields};
\end{tikzpicture}
$$
}
\def\syllabus{Rings. Ideals. Zero divisors. Nilpotents. Prime ideals. Maximal ideals. Radicals of ideals. Nilradicals. Jacobson radicals. Localisation. Modules. Nakayama's lemma. Noetherian rings. Artinian rings. Primary decomposition. Valuation rings. Discrete valuation rings.}

\def\thm{section}

\input{../style/header}

\begin{document}

\input{../style/main}

\section{Introduction}

\lecture{1}{Friday}{05/10/18}

Why study commutative algebra? Number theory and algebraic geometry use this language. The following are references.
\begin{itemize}
\item M Reid, Undergraduate commutative algebra, 1995
\item M Atiyah and I G Macdonald, Introduction to commutative algebra, 1969
\end{itemize}

\section{Rings and ideals}

\begin{definition}
A commutative \textbf{ring} with 1 is a set $ A $ with two operations $ + $ and $ \cdot $, and two elements $ 0 $ and $ 1 $ such that the following holds.
\begin{itemize}
\item $ \rb{A, +} $ is a group with zero $ 0 $.
\item Multiplication is
\begin{itemize}
\item associative ($ \rb{xy}z = x\rb{yz} $ for all $ x, y, z \in A $),
\item commutative ($ xy = yx $ for all $ x, y \in A $), and
\item distributive over addition ($ x\rb{y + z} = xy + xz $ for all $ x, y, z \in A $).
\end{itemize}
\item $ x \cdot 1 = 1 \cdot x = x $ for all $ x \in A $.
\end{itemize}
\end{definition}

\begin{example*}
$ \Z $ is a ring. The set of even integers $ 2\Z $ is not a ring because it does not contain $ 1 $.
\end{example*}

\begin{remark}
Can it happen that $ 0 = 1 $? $ x \cdot 0 = x \cdot \rb{0 + 0} = x \cdot 0 + x \cdot 0 $ gives $ x \cdot 0 = 0 $. But $ x \cdot 1 = x $. Then $ x = 0 $ for all $ x \in A $, so $ A = \cb{0} $.
\end{remark}

Let $ A $ be a commutative ring with $ 1 $.

\begin{definition}
A \textbf{ring homomorphism} $ f : A \to B $ is a homomorphism of abelian groups such that $ f\rb{xy} = f\rb{x}f\rb{y} $ for any $ x, y \in A $ and $ f\rb{1} = 1 $.
\end{definition}

\begin{proposition}
A composition of homomorphisms is a homomorphism.
\end{proposition}

An \textbf{isomorphism} is a bijective homomorphism. If $ f : A \to B $ is an isomorphism, we write $ A \cong B $.

\lecture{2}{Monday}{08/10/18}

\begin{definition}
A subset $ I \subset A $ is called an \textbf{ideal} if $ I $ is a subgroup of $ \rb{A, +} $ and $ AI = I $. Equivalently, for any $ a \in A $ and any $ x \in I $ we have $ ax \in I $. The \textbf{quotient ring} $ A / I $ is the quotient group $ \cb{a + I \mid a \in A} $, which is actually a ring by $ \rb{a + I}\rb{b + I} = ab + I $. $ 1 + I $ is the $ 1 $ in $ A / I $. $ f : A \to A / I $ such that $ f\rb{a} = a + I $ is a surjective ring homomorphism. An ideal $ I \subset A $ is \textbf{principal} if there is $ r \in A $ such that $ I = rA $.
\end{definition}

\begin{proposition}
There is a natural bijection between the ideals of $ A $ that contain a fixed ideal $ I $ and the ideals of $ A / I $.
\end{proposition}

\begin{proof}
Suppose $ J \subset A $ is an ideal containing $ I $. Then associate to $ J $ its image $ f\rb{J} \subset A / I $. To check this, note that since $ f : A \to A / I $ is surjective, for any $ x \in A / I $ there is a $ y \in A $ such that $ f\rb{y} = x $. Hence $ xf\rb{J} = f\rb{y}f\rb{J} = f\rb{yJ} \subset f\rb{J} $. Conversely, take an ideal $ M \subset A / I $ and associate to it $ f^{-1}\rb{M} \subset A $. This is an ideal in $ A $. To check that for all $ a \in A $ we have $ af^{-1}\rb{M} \subset f^{-1}\rb{M} $, we note that this is equivalent to $ f\rb{a}M \subset M $, which is true. These maps are inverses to each other.
\end{proof}

\begin{definition}
Let $ g : A \to B $ be a homomorphism of rings. The \textbf{image} is the subset $ Im\rb{g} = \cb{x \in B \mid \exists y \in A, \ g\rb{y} = x} $. The \textbf{kernel} is the subset $ Ker\rb{g} = \cb{y \in A \mid g\rb{y} = 0} $.
\end{definition}

The image is a subring of $ \rb{B, +} $ but not necessarily an ideal, but the kernel is.

\begin{example*}
Let $ g : \Z \hookrightarrow \Q $. $ 2\Z $ is an ideal in $ \Z $, but not in $ \Q $.
\end{example*}

An isomorphism theorem states that $ A / Ker\rb{g} \cong Im\rb{g} = g\rb{A} $ by $ a \mapsto a + Ker\rb{g} $.

\pagebreak

\section{Polynomial rings}

Let $ R $ be a ring. Define $ R\sb{X} $ as the ring of polynomials $ \sum_{i = 0}^n a_iX^i $ with coefficients $ a_i \in R $ and
$$ \rb{\sum_{i = 0}^k a_iX^i}\rb{\sum_{j = 0}^m b_jX^i} = \sum_{k = 0}^{n + m} \rb{\sum_{k = i + j} a_ib_j}X^k. $$
Define $ R\sb{X_1, X_2} $ to be the ring $ R\sb{X_1}\sb{X_2} $. In general, $ R\sb{X_1, \dots, X_n} = R\sb{X_1} \dots \sb{X_2} $.

\section{Zero-divisors, nilpotent elements, units}

\begin{definition}
A \textbf{zero-divisor} in $ A $ is an element $ x \in A $ such that there exists $ y \in A $, $ y \ne 0 $, with the property that $ xy = 0 $. A ring with no non-zero zero-divisors is called an \textbf{integral domain}. A \textbf{nilpotent} is an element $ x \in A $ such that $ x^n = 0 $ for some $ n \ge 1 $. A \textbf{unit} $ a \in A $ is an element such that there exists $ b \in A $ with the property that $ ab = 1 $. Such elements are also called \textbf{invertible}. $ b $ is denoted by $ a^{-1} $. The units form a group under multiplication, denoted by $ A^* $.
\end{definition}

\begin{example*}
In $ A = \Z $, $ \Z^* = \cb{1, -1} $ and $ \Z $ is an integral domain. In $ A = \Z / 4 = \cb{4\Z, 1 + 4\Z, 2 + 4\Z, 3 + 4\Z} $, $ 2 + 4\Z $ is a zero-divisor in $ \Z / 4 $ that is also nilpotent.
\end{example*}

\lecture{3}{Tuesday}{09/10/18}

\begin{definition}
A \textbf{field} is a ring in which $ 0 \ne 1 $ and every non-zero element is a unit. So if $ k $ is a field, then $ k \setminus \cb{0} = k^* $.
\end{definition}

\begin{proposition}
Let $ A $ be a non-zero ring. Then the following are equivalent.
\begin{enumerate}
\item $ A $ is a field.
\item The only ideals in $ A $ are $ \rb{0} = \cb{0} $ and $ \rb{1} = A $.
\item Every homomorphism $ A \to B $, where $ B \ne 0 $, is injective.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $] Let $ I \subset A $ be a non-zero ideal. Then there exists $ x \in I $, $ x \ne 0 $. Then $ x $ is a unit, i.e. there exists $ y \in A $ such that $ xy = 1 $. For all $ a \in A $, $ a = a.1 = a.y.x \in \rb{x} $. Thus $ I = A $.
\item[$ 2 \implies 3 $] Let $ f : A \to B $. $ Ker\rb{f} $ is an ideal of $ A $. If $ Ker\rb{f} \ne \cb{0} $, then $ Ker\rb{f} = A $. But then $ 1 \in Ker\rb{f} $ and $ f\rb{1} = 0 $ but $ f\rb{1} = 1 $ so in $ B $ we have that $ 0 = 1 $. Then $ B = \cb{0} $, which is a contradiction.
\item[$ 3 \implies 1 $] Let $ x \in A $, $ x \ne 0 $. If $ 1 \in \rb{x} = xA $, then $ x $ is a unit. If $ 1 \notin \rb{x} $, then $ x $ is not a unit. If $ 1 \notin \rb{x} $, then consider the map $ A \to A / \rb{x} $ sending $ a \mapsto a + \rb{x} $. Since $ 1 \notin \rb{x} $, $ 1 + \rb{x} $ is not zero in $ A / \rb{x} $. So this is a non-injective homomorphism to a non-zero ring. This contradicts $ 3 $.
\end{itemize}
\end{proof}

\pagebreak

\section{Prime ideals and maximal ideals}

\begin{definition}
An ideal $ P \subset A $ is a \textbf{prime ideal} if for any $ x, y \in A $, $ xy \in P $ implies $ x \in P $ or $ y \in P $. An ideal $ M \subset A $ is called \textbf{maximal} if there does not exist an ideal $ I $ in $ A $ such that $ M \subsetneq I \subsetneq A $.
\end{definition}

\begin{lemma}
An ideal $ P \subset A $ is prime if and only if $ A / P $ is an integral domain. An ideal $ M \subset A $ is maximal if and only if $ A / M $ is a field.
\end{lemma}

\begin{proof}
Let $ x, y \in A $ such that $ xy \in P $. Then $ \rb{x + P}\rb{y + P} = xy + P = P $. If $ x \notin P $ and $ y \notin P $, then $ x + P \ne P $ and $ y + P \ne P $. These are zero-divisors in $ A / P $. Conversely, if $ A / P $ is not an integral domain, then it has zero-divisors. So there exist $ x, y \in A $ such that $ \rb{x + P}\rb{y + P} = P $. This implies $ xy \in P $. Since $ P $ is prime, $ x \in P $ or $ y \in P $. So one of $ x + P $ and $ y + P $ is zero in $ A / P $. Recall that there is a bijection between the ideals in $ A $ containing $ M $ with the ideals in $ A / M $. Thus $ M \subset A $ is maximal if and only if the only ideals in $ A / M $ are $ \rb{0} $ and $ \rb{1} $, if and only if $ A / M $ is a field.
\end{proof}

\begin{remark}
Every field is an integral domain, hence every maximal ideal is prime. The converse is false. Take any integral domain which is not a field, such as $ \Z $. Then $ \rb{0} \in \Z $ is a prime ideal which is not a maximal ideal.
\end{remark}

\begin{proposition}
If $ f : A \to B $ is a homomorphism of rings, and $ P \subset B $ is a prime ideal, then $ f^{-1}\rb{P} $ is a prime ideal in $ A $.
\end{proposition}

\begin{proof}
Assume that for some $ x, y \in A $ we have $ xy \in f^{-1}\rb{P} $. Then $ f\rb{xy} = f\rb{x}f\rb{y} \in P $. Then $ f\rb{x} \in P $ or $ f\rb{y} \in P $. Then $ x \in f^{-1}\rb{P} $ or $ y \in f^{-1}\rb{P} $.
\end{proof}

\begin{remark}
This does not hold for maximal ideals. Let $ f : \Z \hookrightarrow \Q $. $ f^{-1}\rb{\rb{0}} = \rb{0} $, but $ \rb{0} $ is maximal in $ \Q $ and not maximal in $ \Z $. But if $ f : A \to B $ is a surjective homomorphism of rings, then $ f^{-1} $ sends maximal ideals of $ B $ to maximal ideals of $ A $. (Exercise)
\end{remark}

\begin{theorem}
\label{thm:4.6}
Every non-zero ring contains at least one maximal ideal.
\end{theorem}

We need Zorn's lemma, which belongs to set theory. A \textbf{partially ordered set} or \textbf{poset} is a set $ S $ equipped with a \textbf{partial order}. By definition it is a reflexive, transitive, antisymmetric binary relation $ \le $,
$$ x \le x, \qquad x \le y, y \le z \implies x \le z, \qquad x \le y, y \le x \implies x = y. $$
We don't require that for arbitrary $ x $ and $ y $ in $ S $, we have either $ x \le y $ or $ y \le x $. A subset $ T \subset S $ is called a \textbf{chain} if for any $ x \in T $, $ y \in T $ we have $ x \le y $ or $ y \le x $. An \textbf{upper bound} for a subset $ T \subset S $ is an element $ x \in S $ such that for any $ t \in T $ we have $ t \le s $. A \textbf{maximal element} in $ S $ is an element $ x \in S $ such that if $ y \in S $ and $ y \ge x $, then $ y = x $.

\lecture{4}{Friday}{12/10/18}

\begin{theorem}[Zorn's lemma]
If $ S $ is a non-empty partially ordered set such that every chain in $ S $ has an upper bound in $ S $, then $ S $ contains a maximal element.
\end{theorem}

\begin{proof}[Proof of Theorem \ref{thm:4.6}]
Let $ A $ be a non-zero ring. To apply Zorn's lemma it is enough to show that every growing chain of ideals $ I_1 \subset I_2 \subset \dots $, such that $ 1 \in I_i $ for all $ i $, has an upper bound which is an ideal not equal to $ A $, so not containing $ 1 $. Then Zorn's lemma applied to the set of ideals of $ A $ not containing $ 1 $ and ordered by inclusion, implies the existence of a maximal ideal. So we have a chain $ I_j $, where $ j $ is an element of a set $ J $. Consider $ I = \bigcup_{j \in J} I_j $. Claim that $ I $ is an ideal in $ A $ and $ 1 \notin I $.
\begin{itemize}
\item $ 1 \notin I $ is clear. Because otherwise $ 1 \in I $ gives $ 1 \in I_j $ for $ j \in J $, but it is a contradiction.
\item For any $ a \in A $ we have $ aI \subset I $, so for all $ x \in I $, $ ax \in I $. But then $ x \in I_j $ for some $ j $. Then $ ax \in I_j \subset I $.
\item Suppose $ x, y \in I $. Must show $ x + y \in I $. There exists $ j_1 \in J $ such that $ x \in I_{j_1} $. Similarly, there exists $ j_2 \in J $ such that $ y \in I_{j_2} $. Recall that $ I_j $ for $ j \in J $ is a chain. Hence either $ j_1 \le j_2 $ or $ j_2 \le j_1 $. This means that either $ I_{j_1} \subset I_{j_2} $ or $ I_{j_2} \subset I_{j_1} $. Without loss of generality assume that $ I_{j_1} \subset I_{j_2} $. Then $ x, y \in I_{j_2} $. Hence $ x + y \in I_{j_2} $, hence $ x + y \in I $. This proves that $ I $ is an ideal not containing $ 1 $.
\end{itemize}
\end{proof}

\pagebreak

\begin{definition}
A ring with a unique maximal ideal is called a \textbf{local ring}.
\end{definition}

\begin{corollary}
\label{cor:4.9}
Let $ I $ be an ideal of $ A $ and $ I \ne A $. Then $ I $ is contained in a maximal ideal of $ A $.
\end{corollary}

\begin{proof}
There is a bijection between the ideals of $ A $ containing $ I $ and the ideals in $ A / I $. If $ I \subset J \subset A $, then $ J \mapsto J / I $. $ J / I $ is an ideal in $ A / I $. By Theorem \ref{thm:4.6}, $ A / I $ contains a maximal ideal, say $ M \subset A / I $. Let $ f : A \to A / I $ be the map sending $ x \mapsto x + I $. Consider $ f^{-1}\rb{M} \subset A $. This is an ideal in $ A $. In general, if $ I \subset J \subset A $ are ideals, then $ f $ induces an isomorphism of rings $ A / J \to \rb{A / I}\rb{J / I} $. For additive groups, this is one of the standard isomorphisms theorems, but this respects multiplication, so is an isomorphism of rings. Now, we know that $ M $ maximal in $ A / I $ implies that $ \rb{A / I} $ is a field. This ring is isomorphic to $ A / f^{-1}\rb{M} $. Hence $ A / f^{-1}\rb{M} $ is also a field. Therefore, $ f^{-1}\rb{M} $ is maximal in $ A $.
\end{proof}

\begin{corollary}
\label{cor:4.10}
Every non-unit is contained in a maximal ideal.
\end{corollary}

\begin{proof}
If $ x \in A $ is a non-unit, consider $ \rb{x} $. $ 1 \notin \rb{x} $, otherwise $ x $ is a unit. By Corollary \ref{cor:4.9} $ \rb{x} $ is contained in a maximal ideal of $ A $.
\end{proof}

\begin{example*}
\hfill
\begin{itemize}
\item Every field is a local ring. In this case $ \rb{0} $ is a maximal ideal.
\item Let $ k $ be a field. Consider the ring of formal power series $ k\sb{\sb{t}} = \cb{a_0 + a_1t + \dots \mid a_i \in k} $, such that
$$ \rb{\sum_{i = 0}^\infty a_it^i}\rb{\sum_{j = 0}^\infty b_jt^j} = a_0b_0 + \rb{a_0b_1 + a_1b_0}t + \dots. $$
Then the principal ideal $ \rb{t} $ is a maximal ideal. Indeed, $ k\sb{\sb{t}} / \rb{t} \cong k $ is a field. (Exercise: $ k\sb{\sb{t}} \setminus \rb{t} = k\sb{\sb{t}}^* $)
\item $ \Z_{\rb{p}} = \cb{a / b \mid a, b \in \Z, \ b \ne 0, \ p \nmid b} $. (Exercise: $ \rb{p} $ is a maximal ideal and there are no other maximal ideals)
\end{itemize}
\end{example*}

If $ A $ is a local ring with maximal ideal $ M $, then $ A / M $ is called the \textbf{residue field} of $ A $.

\begin{lemma}[Prime avoidance]
\label{lem:4.12}
Let $ A $ be a ring and $ P \subset A $ be a prime ideal. Suppose that $ I_1, \dots, I_n $ are ideals in $ A $ such that $ \bigcap_{i = 1}^n I_i \subset P $. Then there exists $ j $, $ 1 \le j \le n $, such that $ I_j \subset P $. If $ \bigcap_{i = 1}^n I_i = P $, then there exists $ j $, $ 1 \le j \le n $, such that $ I_j = P $.
\end{lemma}

\begin{proof}
Suppose our claim is false. Then there exists $ a_j \in I_j $ such that $ a_j \notin P $ for $ j = 1, \dots, n $. Then $ a_1 \dots a_n \in \bigcap_{j = 1}^n I_i \subset P $. $ \rb{a_1 \dots a_{n - 1}}a_n \in P $ gives $ a_1 \dots a_{n - 1} \in P $ or $ a_n \in P $. But $ a_n \notin P $, so $ a_1 \dots a_{n - 2} \in P $, a contradiction. The second statement follows. We know that $ I_k \subset P $ for some $ k $, $ 1 \le k \le n $, but $ P = \bigcap_{j = 1}^n I_j \subset I_k $. Hence $ P = I_k $.
\end{proof}

\pagebreak

\section{Nilradical and the Jacobson radical}

\lecture{5}{Monday}{15/10/18}

\begin{proposition}
Let $ A $ be a ring. The set $ N\rb{A} $ of all nilpotent elements of $ A $ is an ideal in $ A $. It is called the \textbf{nilradical} of $ A $. The quotient ring $ A / N\rb{A} $ has no non-zero nilpotents.
\end{proposition}

\begin{proof}
Clearly, if $ x^n = 0 $ and $ y^n = 0 $, then $ \rb{xy}^n = 0 $, if $ n \ge m $. $ \rb{x + y}^{n + m} $ is the sum with coefficients of of monomials in which either the power of $ x $ is $ \ge n $ or the power of $ y $ is $ \ge m $. So this is zero. Let $ a \in A $. Then $ \rb{ax}^n = 0 $. Therefore, $ N\rb{A} $ is an ideal. Now let $ t + N\rb{A} $ for $ t \in A $ be a nilpotent element in $ A / N\rb{A} $. For some $ k $ we have $ t^k + N\rb{A} $ is the trivial coset, that is $ t^k \in N\rb{A} $. Thus $ \rb{t^k}^l = 0 $ for some $ l > 0 $. Hence $ t \in N\rb{A} $ , so $ t + N\rb{A} $ is the zero element of $ A / N\rb{A} $.
\end{proof}

\begin{proposition}
The nilradical $ N\rb{A} $ is the intersection of all prime ideals of $ A $.
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}
\item[$ \subset $] $ N\rb{A} \subset \bigcap_{P \subset A} P $, where $ P $ is a prime ideal of $ A $. Take $ x \in A $, $ x^n = 0 $. Take a prime ideal $ P \subset A $. We have that $ P \ni x^n = x \dots x $ gives $ x \in P $.
\item[$ \supset $] Now let $ f \in A $ be a non-nilpotent element, that is $ 0 \notin \cb{f^i \mid i \ge 1} $. Let $ \Sigma $ be the set of ideals of $ A $ that do not intersect $ \cb{f^i \mid i \ge 1} $. $ \Sigma $ contains the zero ideal $ \rb{0} $, so $ \Sigma \ne \emptyset $. Order the elements of $ \Sigma $ by inclusion. Every chain in $ \Sigma $ has an upper bound. If $ I_j $ for $ j \in J $ is a chain, then $ \bigcup_{j \in J} I_j $ is an ideal of $ A $. Moreover, if $ f^k \in \bigcup_{j \in J} I_j $, then $ f^k \in I_{j_0} $ for some $ j_0 \in J $, but this is impossible. By Zorn's lemma, we know that $ \Sigma $ has a maximal element. Call it $ P $. Claim that $ P $ is a prime ideal. To prove this, assume that $ x, y \in A $ such that $ x, y \notin P $. We must show that $ xy \notin P $. Consider $ P + \rb{x} $, all elements of the form $ \alpha + rx $, where $ \alpha \in P $ and $ r \in A $. $ x \notin P $ gives $ P \ne P + \rb{x} $. By construction, $ P $ is maximal in $ \Sigma $, hence $ P + \sigma $ is not in $ \Sigma $, that is there exists $ n \ge 1 $ such that $ f^n \in P + \rb{x} $. Similarly, there exists $ m $ such that $ f^m \in P + \rb{y} $. Therefore, $ f^{n + m} $ belongs to $ P + \rb{xy} $. If $ xy \in P $, then $ P + \rb{xy} = P $ but then $ f^{n + m} \in P $, which is absurd because $ P \in \Sigma $. Thus $ xy \notin P $. This shows that $ P $ is a prime ideal and $ f \notin P $.
\end{itemize}
\end{proof}

What happens if we consider the intersection of all maximal ideals of $ A $. This intersection is called the \textbf{Jacobson radical} of $ A $. It is denoted by $ J\rb{A} $.

\begin{proposition}
\label{prop:5.3}
$ x \in J\rb{A} $ if and only if $ 1 - xy $ is a unit in $ A $ for all $ y \in A $.
\end{proposition}

\begin{proof}
Suppose that $ x \in J\rb{A} $, that is $ x $ is contained in every maximal ideal of $ A $, but $ 1 - xy $ is not a unit for some $ y \in A $. By Corollary \ref{cor:4.10} every non-unit is contained in some maximal ideal, so there exists a maximal ideal $ M \subset A $ such that $ 1 - xy \in M $. Since $ x \in M $ we conclude that $ 1 \in M $, which is impossible. Conversely, suppose $ x \notin J\rb{A} $, that is $ x \notin M $ for some maximal ideal $ M \subset A $. Consider the sum of two ideals $ M + \rb{x} $. This is an ideal in $ A $, such that $ M \subsetneq M + \rb{x} $. Since $ M $ is maximal, we have $ M + \rb{x} = A $. Therefore $ 1 = m + xy $, where $ m \in A $ and $ y \in A $. Now $ 1 - xy = m \in M $ cannot be a unit.
\end{proof}

Let $ I \subset A $ be an ideal. The \textbf{radical} $ rad\rb{I} $ or $ r\rb{I} $ or $ \sqrt{I} $ is defined as $ \cb{x \in A \mid \exists n \ge 1, \ x^n \in I} $.

\begin{proposition}
$ r\rb{I} $ is the intersection of all prime ideals of $ A $ that contain $ I $.
\end{proposition}

\begin{proof}
Use the bijection between ideals containing $ I $ and the ideals in $ A / I $.
\end{proof}

\lecture{6}{Tuesday}{16/10/18}

\begin{definition}
Let $ J $ be an index set. Suppose we have a ring $ R_j $ for $ j \in J $. $ \prod_{j \in J} R_j $ has a natural structure of a ring. $ 0 $ in $ \prod_{j \in J} R_j $ is $ \rb{0, \dots, 0} $ and $ 1 $ in $ \prod_{j \in J} $ is defined as $ \rb{1, \dots, 1} $, $ \rb{r_j}_{j \in J} + \rb{r'_j}_{j \in J} = \rb{r_j + r'_j}_{j \in J} $, and $ \rb{r_j}_{j \in J} \cdot \rb{r'_j}_{j \in J} = \rb{r_j \cdot r'_j}_{j \in J} $.
$ \prod_{j \in J} R_j $ is called the \textbf{product of rings} $ R_j $ for $ j \in J $. If $ R $ is a ring equipped with homomorphisms $ f_j : R \to R_j $ for each $ j \in J $, then $ \rb{f_j} : R \to \prod_{j \in J} R_j $ is a homomorphism of rings.
\end{definition}

Recall that $ N\rb{R} = \bigcap_{P \subset R} P $, where $ P $ are prime ideals of $ R $. Consider the product ring $ \prod_{P \subset R} R / P $. Putting together the canonical surjective maps $ R \to R / P $ by $ x \mapsto x + P $ for all $ P \subset R $ we obtain a homomorphism $ f : R \to \prod_{P \subset R} R / P $. $ Ker\rb{f} = \bigcup_{P \subset R} Ker\sb{R \to R / P} = \bigcap_{P \subset R} = N\rb{R} $. Hence we get an injective homomorphism $ R / N\rb{R} \to \prod_{P \subset R} R / P $. Similarly, we get an injective homomorphism $ R / J\rb{R} \to \prod_{M \subset R} R / M $, where $ M $ are maximal ideals of $ R $ and $ J\rb{R} $ is the Jacobson radical of $ R $.

\pagebreak

\section{Localisation of rings}

Localisation refers to introducing denominators.

\begin{example*}
From $ R = \Z $ to $ \Q = \cb{a / b \mid a, b \in \Z, \ b \ne 0} $.
\end{example*}

\begin{definition}
A subset $ S \subset A $ is called a \textbf{multiplicative set} if $ 1 \in S $, $ 0 \not\in S $, and if $ a, b \in S $, then $ ab \in S $, that is $ S $ is closed under multiplication.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item Take any $ a \in A $ which is not nilpotent, that is $ a^n = 0 $ for $ n \ge 1 $. Then $ \cb{1, a, a^2, \dots} $ is a multiplicative set.
\item Let $ P \subset A $ be a prime ideal. Then $ A \setminus P $ is a multiplicative set. Indeed, $ x, y \notin P $ gives $ xy \notin P $.
\item Let $ P_j \subset A $, for $ j \in J $, be a family of prime ideals of $ A $. Then $ A \setminus \bigcup_{j \in J} P_j = \bigcap_{j \in J} \rb{A \setminus P_j} $ is a multiplicative set.
\item $ A^* $ is a multiplicative set in $ A $.
\item The set of all non-zero-divisors of $ A $ is a multiplicative set.
\item Let $ I \subset A $ be an ideal. Then $ 1 + I = \cb{1 + x \mid x \in I} $ is a multiplicative set.
\end{itemize}
\end{example*}

\begin{definition}
Let $ A $ be a ring with a multiplicative set $ S $. Consider $ A \times S $, that is the set of pairs of elements $ \rb{a, s} $, where $ a \in A $ and $ s \in S $. Define an equivalence relation $ \sim $ as follows. $ \rb{a, s} \sim \rb{b, t} $ if and only if there exists $ u \in S $ such that $ u\rb{at - bs} = 0 $. Define $ S^{-1}A $ to be the set of equivalence classes of $ \sim $. Write the equivalence class of $ \rb{a, s} $ as $ a / s $. Define multiplication on $ S^{-1}A $ as
$$ \dfrac{a}{s} \cdot \dfrac{b}{t} = \dfrac{ab}{st}. $$
Define addition on $ S^{-1}A $ as
$$ \dfrac{a}{s} + \dfrac{b}{t} = \dfrac{at + bs}{st}. $$
Define $ 0 $ in $ S^{-1}A $ as $ 0 / 1 $ and we define $ 1 $ in $ S^{-1}A $ as $ 1 / 1 $.
\begin{itemize}
\item Exercise: check that if $ \rb{a, s} \sim \rb{a', s'} $ and $ \rb{b, t} \sim \rb{b', t'} $, then $ \rb{ab, st} \sim \rb{a'b', s't'} $.
\item Exercise: check that if $ \rb{a, s} \sim \rb{a', s'} $ and $ \rb{b, t} \sim \rb{b', t'} $, then $ \rb{at + bs, st} \sim \rb{a't' + b's', s't'} $.
\item Exercise: with this definition $ S^{-1}A $ is a ring.
\end{itemize}
\end{definition}

\begin{remark}
$ \sim $ is indeed an equivalence relation. $ \rb{a, s} \sim \rb{a, s} $, $ \rb{a, s} \sim \rb{b, t} $ gives $ \rb{b, t} \sim \rb{a, s} $. Let us check that if $ \rb{a, s} \sim \rb{b, t} $ and $ \rb{b, t} \sim \rb{c, r} $, then $ \rb{a, s} \sim \rb{c, r} $. There exist $ u, v \in S $ such that $ u\rb{at - bs} = 0 $ and $ v\rb{br - ct} = 0 $. Then $ uv\rb{atr - bsr} = 0 $ and $ uv\rb{brs - cts} = 0 $, so $ uvt\rb{ar - bs} = 0 $.
\end{remark}

\begin{lemma}
Let $ A $ be a ring with a multiplicative set $ S $. Then $ f : A \to S^{-1}A $ defined by $ f\rb{x} = x / 1 $ is a homomorphism of rings. $ Ker\rb{f} = 0 $ if and only if $ S $ contains no zero-divisors.
\end{lemma}

\begin{proof}
$$ f\rb{x + y} = \dfrac{x + y}{1} = \dfrac{x}{1} + \dfrac{y}{1}, \qquad f\rb{xy} = \dfrac{xy}{1} = \dfrac{x}{1} \cdot \dfrac{y}{1}. $$
$ Ker\rb{f} = \cb{x \mid \exists u \in S, \ ux = 0} $ since $ x / 1 = 0 / 1 $ if and only if there exists $ u \in S $ such that $ u\rb{x \cdot 1 - 0 \cdot 1} = 0 $.
\end{proof}

\begin{example*}
Let $ k $ be a field. Explore what happens when $ A = k\sb{x, y} / \rb{xy} $ and $ S = \cb{1, x, \dots} $. Determine $ S^{-1}A $ and $ Ker\rb{f} $.
\end{example*}

\lecture{7}{Friday}{19/10/18}

Lecture 7 is a problem class.

\pagebreak

\lecture{8}{Monday}{22/10/18}

\begin{lemma}[Universal property of localisation]
Let $ A $ be a ring with a multiplicative set $ S \subset A $. Suppose $ g : A \to B $ is a homomorphism such that $ g\rb{S} \subset B^* $, that is for all $ s \in S $, $ g\rb{s} $ is a unit in $ B $. Then there exists a unique homomorphism $ h : S^{-1}A \to B $ such that $ g = h \circ f $, where $ f : A \to S^{-1}A $ is the canonical map.
\end{lemma}

\begin{proof}
Define $ h\rb{a / s} = g\rb{a}g\rb{s}^{-1} $ since $ g $ invertible. Check that $ h $ is well-defined, that is if $ a / s = a' / s' $, then $ u\rb{as' - a's} = 0 $ for $ u \in S $. Apply $ g $ and get $ g\rb{u}\rb{g\rb{a}g\rb{s'} - g\rb{a'}g\rb{s}} = 0 $. $ g\rb{u} \in B^* $ and $ g\rb{a}g\rb{s'} = g\rb{a'}g\rb{s} $. Hence $ g\rb{a}g\rb{s}^{-1} = g\rb{a'}g\rb{s'}^{-1} $. Take any $ a \in A $. Then $ f\rb{a} = a / 1 $, hence $ \rb{h \circ f}\rb{a} = g\rb{a} $. Finally, let us show there is only one homomorphism $ h : S^{-1}A \to B $ such that $ g = h \circ f $. Suppose $ h' : S^{-1}A \to B $ is such that $ g = h' \circ f $, so that for any $ a \in A $ we have $ g\rb{a} = h'\rb{a} $. For any $ s \in S $, $ s^{-1} $ is an element of $ S^{-1}A $, and so is $ s $. $ 1 = s^{-1}s $ gives $ 1 = h'\rb{1} = h'\rb{s^{-1}}h'\rb{s} $. Thus $ h'\rb{s^{-1}} = h'\rb{s}^{-1} = g\rb{s}^{-1} $ because $ h' $ on the image of $ A $ in $ S^{-1}A $ is the same as $ g $. Comparing this with the definition of $ h $ we see that $ h' = h $.
\end{proof}

Let $ I \subset A $ be an ideal. Define $ S^{-1}I = \cb{x / s \mid x \in I, \ s \in S} $. This is an ideal in $ S^{-1}I $. It is the ideal generated by $ f\rb{I} \subset S^{-1}A $.

\begin{proposition}
Let $ A $ be a ring with a multiplicative set $ S $. Let $ I_1, \dots, I_n $ be ideals in $ A $. Then
\begin{itemize}
\item $ S^{-1}\rb{I_1 + \dots + I_n} = S^{-1}I_1 + \dots + S^{-1}I_n $,
\item $ S^{-1}\rb{I_1 \dots I_n} = S^{-1}I_1 \dots S^{-1}I_n $,
\item $ S^{-1}\rb{\bigcap_{j = 1}^n I_j} = \bigcap_{j = 1}^n S^{-1}I_j $, and
\item $ r\rb{S^{-1}I} = S^{-1}r\rb{I} $, where $ r\rb{I} $ is the radical of $ I $.
\end{itemize}
\end{proposition}

\begin{proposition}
\label{prop:6.8}
Every ideal of $ S^{-1}A $ is of the form $ S^{-1}I $ for some ideal $ I \subset A $.
\end{proposition}

\begin{proof}
Start with an ideal $ J \subset S^{-1}A $. Consider $ f^{-1}\rb{J} \subset A $. This is an ideal. Call it $ I $. Claim that $ J = S^{-1}I $. Pick any element $ a / s \in J $. Then $ a \in J $. Since $ f\rb{a} = a / 1 \in J $ we have that $ a \in I $. Therefore, $ a / s \in S^{-1}I $. This proves $ J \subset S^{-1}I $. But it is clear that $ S^{-1}I \subset J $. Indeed, $ x \in I $ then $ x / 1 \in J $. But $ J $ is an ideal, hence $ x / s \in J $.
\end{proof}

\begin{theorem}
\label{thm:6.9}
The prime ideals in $ S^{-1}A $ are the ideals $ S^{-1}P $, where $ P $ is a prime ideal of $ A $ such that $ P \cap S \ne \emptyset $. Thus we have a bijection between the set of prime ideals in $ S^{-1}A $ and the set of prime ideals in $ A $ that do not intersect $ S $.
\end{theorem}

\begin{proof}
Suppose that $ P $ is a prime ideal in $ A $, $ P \cap S \ne \emptyset $. Claim that $ S^{-1}P $ is a prime ideal in $ S^{-1}A $. If $ \rb{a / s}\rb{b / t} \in S^{-1}P $, then $ \rb{a / s}\rb{b / t} = c / u $, where $ c \in P $, $ u \in S $. This is equivalent to $ v\rb{abu - cst} = 0 $ for some $ v \in S $. $ \rb{ab}\rb{vu} = c \in P $ such that $ v \in P $. $ vu \in S $ and $ S \cap P = \emptyset $, so $ vu \notin P $. But $ P \subset A $ is a prime ideal, hence $ ab \in P $. Thus $ a \in P $ gives $ a / s \in S^{-1}P $ or $ b \in P $ gives $ b / t \in S^{-1}P $. This proves $ S^{-1}P \subset S^{-1}A $ is prime. For any ideal $ J \subset S^{-1}A $, we know that $ f^{-1}J $ is an ideal in $ S $. Moreover, if $ J $ is prime, then $ f^{-1}J \subset A $ is prime. Let us show that $ f^{-1}J \cap S = \emptyset $. Otherwise, take $ s \in S \cap f^{-1}J $, so $ s / 1 \in J $. But $ 1 / s \in J^{-1}A $, hence $ 1 = \rb{1 / s}s \in J $, so $ J = S^{-1}A $. But $ J $ is a prime ideal, so $ J \ne S^{-1}A $. To show that $ P \mapsto S^{-1}P $ and $ J \mapsto f^{-1}J $ are the identity maps, we need to check that $ P = f^{-1}\rb{S^{-1}P} $ and $ J = S^{-1}f^{-1}\rb{J} $. $ S^{-1}P = \cb{x / s \mid x \in P, \ s \in S} $. If $ y \in f^{-1}\rb{S^{-1}P} \subset A $  is such that $ f\rb{y} = x / s $, then $ y / 1 = x / s $. Hence $ ys = x \in P $. Since $ P \cap S = \emptyset $, $ s \notin P $. Therefore, $ y \in P $. Hence $ P = f^{-1}\rb{S^{-1}A} $. Now let us prove that $ J = S^{-1}f^{-1}\rb{J} $. But in Proposition \ref{prop:6.8} we showed that there is an ideal $ I \subset A $ such that $ J = S^{-1}I $. In the proof of Proposition \ref{prop:6.8} we have taken $ I = f^{-1}\rb{J} $. So we are done.
\end{proof}

\pagebreak

\section{Determinants}

\lecture{9}{Tuesday}{23/10/18}

\begin{lemma}
Let $ f\rb{x_1, \dots, x_n} \in \Z\sb{x_1, \dots, x_n} $. If $ f $ as a function $ \Z^n \to \Z $ is zero, that is $ f $ only takes zero values on arbitrary elements of $ \Z^n $, then $ f $ is the zero polynomial.
\end{lemma}

\begin{proof}
Induction in $ n $. If $ n = 1 $, then $ f\rb{x} $ is a polynomial with infinitely many roots. So $ f\rb{x} $ is the zero polynomial, so cannot have more than $ \deg\rb{f} $ roots. Assume we know the lemma for $ n - 1 $ variables. Write $ f\rb{x_1, \dots, x_n} = \sum_{i = 0}^N f_i\rb{x_1, \dots, x_{n - 1}}x_n^i $ for $ f_j\rb{x_1, \dots, x_{n - 1}} \in \Z\sb{x_1, \dots, x_{n - 1}} $. Fix $ x_1, \dots, x_{n - 1} $. We get a polynomial in one variable $ x_n $, so this polynomial has zero coefficients. This implies that each $ f_i\rb{x_1, \dots, x_n} $ takes only zero values. By the induction assumption, each $ f_i $ is the zero polynomial.
\end{proof}

\begin{remark}
\label{rem:7.2}
This means that if a polynomial formula with coefficients in $ \Z $ is true in $ \Z $, this is true in an arbitrary commutative ring.
\end{remark}

\begin{example*}
$ \rb{x + y}^n = \sum_{i = 0}^n \twobyone{n}{i}x^iy^{n - i} $ is true in any ring.
\end{example*}

The underlying fact is the existence of a canonical map $ \Z \to R $ by $ 1 \mapsto 1 $.

\begin{definition}
Let $ R $ be a commutative ring. Let $ A = \rb{a_{ij}} $ be a square matrix for $ 1 \le i \le n $ and $ 1 \le j \le n $, with entries in $ R $. Then $ \det\rb{A} $ is defined as $ \rb{-1}^{i + 1}a_{i1}M_{i1} + \dots \rb{-1}^{i + n}a_{in}M_{in} $ for $ i $ fixed. Here $ M_{ij} $ is the determinant of the $ \rb{n - 1} \times \rb{n - 1} $ submatrix of $ A $ obtained by removing the $ i $-th row and the $ j $-th column.
\end{definition}

\begin{proposition}
$ \det\rb{A} = \rb{-1}^{i + 1}a_{i1}M_{i1} + \dots \rb{-1}^{i + n}a_{in}M_{in} $.
\end{proposition}

\begin{proof}
This is known for matrices with entries in $ \C $, so by Remark \ref{rem:7.2} this holds in any commutative ring.
\end{proof}

\begin{remark}
The official definition is
$$ \det\rb{A} = \sum_{\pi \in S_n} sgn\rb{\pi}a_{1\pi\rb{1}} \dots a_{n\pi\rb{n}}, $$
where $ sgn : S_n \to \cb{\pm 1} $.
\end{remark}

\begin{proposition}
For $ i \ne j $,
$$ \rb{-1}^{j + 1}a_{i1}M_{j1} + \dots + \rb{-1}^{j + n}a_{in}M_{jn} = 0, $$
$$ \rb{-1}^{j + 1}a_{1i}M_{1j} + \dots + \rb{-1}^{j + n}a_{ni}M_{nj} = 0. $$
\end{proposition}

Define the \textbf{adjacent} matrix as an $ n \times n $ matrix $ A^v_{ij} = \rb{-1}^{i + j}M_{ji} $. Putting together all the previous identities we get the following.

\begin{theorem}
$ A \cdot A^v = A^v \cdot A = \det\rb{A} I_n $.
\end{theorem}

\pagebreak

\section{Modules}

\lecture{10}{Friday}{26/10/18}

\begin{definition}
Let $ A $ be a ring. A \textbf{module} $ M $ over $ A $ is an abelian group $ \rb{M, 0, +} $ with an action $ \cdot $ of $ A $ on $ M $, that is $ A \times M \to M $ by $ a \cdot m = am $, such that the following axioms hold.
\begin{itemize}
\item $ 1 \cdot m = m $ for all $ m \in M $ and $ a \in A $.
\item $ \mu \cdot \rb{\lambda \cdot m} = \rb{\mu\lambda} \cdot m $ $ \lambda, \mu \in A $.
\item $ \lambda\rb{x + y} = \lambda x + \lambda y $ for all $ \lambda \in A $ and $ x, y \in M $.
\item $ \rb{\mu + \lambda}x = \mu x + \lambda x $ for all $ \mu, \lambda \in A $ and $ x \in M $.
\end{itemize}
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item $ M = A $. More generally, consider an ideal $ I \subset A $. $ A $ acts on $ I $ by $ A \times I \to I $ by $ a \cdot x = ax $.
\item If $ A $ is a field, then an $ A $-module is the same as a vector space over this field.
\item Take $ M $ to be any abelian group. Take $ A = \Z $. Define an action of $ \Z $ as follows. $ 1 \cdot m = m $ and $ n \cdot m = \rb{1 + \dots + 1} \cdot m = m + \dots + m = nm $. $ 0 = n + \rb{- n} \in \Z $, then $ 0 = \rb{n + \rb{-n}} \cdot m = nm + \rb{-n}m $. Hence $ \rb{-n} \cdot m = -\rb{n \cdot m} = -\rb{m + \dots + m} $. So, there is exactly one way to equip any abelian group with the structure of a $ \Z $-module.
\item Let $ k $ be a field and let $ A = k\sb{x} $. A $ k\sb{x} $-module is a vector space over $ k $ with extra structure $ x \times M \to M $. This is a linear transformation of $ M $. It can be arbitrary. Thus a $ k\sb{x} $-module is a pair $ \rb{M, f} $, where $ M $ is a $ k $-vector space and $ f : M \to M $ is linear transformation of $ M $.
\end{itemize}
\end{example*}

\begin{definition}
Let $ M $ and $ N $ be $ A $-modules. A map $ f : M \to N $ is called a \textbf{homomorphism of $ A $-modules} if $ f $ is a homomorphism of abelian groups and $ f\rb{a, m} = af\rb{m} $ for any $ a \in A $ and $ m \in M $. If $ f : M \to N $ and $ g : M \to N $ are homomorphisms of $ A $-modules, then so is $ f + g $, so we get $ Hom_A\rb{M, N} $, a group of such homomorphisms. This is also an $ A $-module via the action $ \rb{a, f\rb{a}} \mapsto a \cdot f\rb{a} $.
\end{definition}

\begin{definition}
A \textbf{submodule} $ N \subset M $ is a subgroup, stable under the action of $ A $. Then $ M / N $ is naturally an $ A $-module with $ A $-action inherited from $ M $. Define $ \rb{N : M} = \cb{a \in A \mid raM \subset rN \subset N} $. This is an ideal in $ A $. In particular, can do this when $ N = 0 $. Note $ Ann\rb{M} = \rb{0 : M} = \cb{a \in A \mid aM = 0} $. This is called the \textbf{annihilator} of $ M $.
\end{definition}

\begin{definition}
If $ f : M \to N $ is a homomorphism of $ A $-modules, then $ Ker\rb{f} $ is an $ A $-module and $ Im\rb{f} \cong M / Ker\rb{f} $ is as isomorphism of $ A $-modules.
\end{definition}

\begin{definition}
An $ A $-module $ M $ is \textbf{finitely generated} if there exist $ m_1, \dots, m_n $ in $ M $ such that $ M = \cb{a_1m_1 + \dots + a_nm_n \mid a_i \in A} $.
\end{definition}

\begin{example*}
A \textbf{free} $ A $-module of rank $ n $ is the set $ A^n = \cb{\rb{a_1, \dots, a_n} \mid a_i \in A} $ with coordinate-wise addition. $ a \in A $ acts on $ \rb{a_1, \dots, a_n} $ by sending it to $ \rb{aa_1, \dots, aa_n} $. If $ f\rb{1, 0, \dots, 0} = m_1 $, $ f : A^m \to M $ is an example of an $ A $-module homomorphism.
\end{example*}

\pagebreak

\begin{lemma}
\label{lem:8.7}
Let $ A $ be a ring. Let $ M $ be a finitely generated $ A $-module and let $ A \subset A $ be an ideal such that $ JM = M $, that is sums of $ xm $, where $ x \in J $ and $ m \in M $, give all of $ M $. Then there exists $ a \in J $ such that $ \rb{1 - a}M = 0 $.
\end{lemma}

\begin{proof}
Let $ m_1, \dots, m_n $ be a set of generators of $ M $. $ m_i \in M = JM $, so $ m_i = x_{i1}m_1 + \dots + x_{in}m_n $, where $ x_{ij} \in J $. Let $ X = \rb{x_{ij}}_{1 \le i, j \le n} $, so
$$ \rb{I_n - X}\threebyone{m_1}{\vdots}{m_n} = 0. $$
Let $ \rb{I_n - X}^v $ be the adjunct matrix of $ I_n - X $. Then $ \rb{I_n - X}^v\rb{I_n - X} = \det\rb{I_n - X}I_n $. Hence
$$ \det\rb{I_n - X}\threebyone{m_1}{\vdots}{m_n} = \threebyone{0}{\vdots}{0}. $$
$ \det\rb{I_n - X} = \prod_{i = 1}^n \rb{1 - x_{ii}} + J \equiv 1 \mod J $. So $ \det\rb{I_n - X} = 1 - a $, where $ a \in J $. $ \rb{1 - a}m_i = 0 $ for all $ i $ gives $ \rb{1 - a}M = 0 $.
\end{proof}

\lecture{11}{Monday}{29/10/18}

\begin{corollary}[Nakayama's lemma]
Let $ A $ be a ring and let $ M $ be an $ A $-module, which is finitely generated. Let $ I \subset A $ be an ideal contained in the Jacobson radical $ J\rb{A} $. Then $ IM = M $ implies $ M = 0 $.
\end{corollary}

\begin{proof}
Lemma \ref{lem:8.7} gives an $ a \in I $ such that $ \rb{1 - a}M $. But $ a \in J\rb{A} $. By Proposition \ref{prop:5.3} $ 1 - a \in A^* $ so that there exists $ u \in A^* $ such that $ u\rb{1 - a} = 1 $, so $ M = 1 \cdot M  = u\rb{1 - a} \cdot M = 0 $.
\end{proof}

Another proof considers $ M = \rb{m_1, \dots, m_n} $. Let us call a generating set minimal, if no proper set is a generating set. Assume that $ m_1, \dots, m_n $ is a minimal generating set. $ IM = M $ implies that $ m_1 = a_1m_1 + \dots + a_nm_n $, where $ a_i \in I $. $ \rb{1 - a_1}m_1 = a_2m_2 + \dots + a_nm_n $. Proposition \ref{prop:5.3} says that $ 1 - a_1 \in A^* $. Hence $ m_1 = \rb{1 - a_1}^{-1}a_2m_2 + \dots + \rb{1 - a_1}^{-1}a_nm_n $. This is a contradiction, because $ m_2, \dots, m_n $ is a generating set.

\pagebreak

\section{Localisation of modules}

\begin{definition}
Let $ A $ be a ring with a multiplicative set $ S $, and let $ M $ be an $ A $-module. Define $ \sim $ on $ M \times S $ by $ \rb{m, s} \sim \rb{n, t} $ if and only if there exists $ u \in S $ such that $ u\rb{tm - sn} = 0 $. This is an equivalence relation. Denote the equivalence class of $ \rb{m, s} $ by $ m / s $. Then the set of these equivalence classes form a module denoted by $ S^{-1}M $ over $ S^{-1}A $. The action of $ S^{-1}A $ on $ S^{-1}M $ is $ \rb{a / s}\rb{m / t} = \rb{am / st} $. $ m / s + n / t = \rb{mt + ns} / st $. The zero in $ S^{-1}M $ is $ 0 / 1 $.
\end{definition}

\begin{definition}
Let $ A $ be a ring and let $ P \subset A $ be a prime ideal. Then $ S = A \setminus P $ is a multiplicative set. The ring $ S^{-1}A $ is denoted $ A_P $. It is called the localisation of $ A $ at $ P $. Recall that by Theorem \ref{thm:6.9} the prime ideals of $ A_P $ are of the form $ S^{-1}I $, where $ I \subset A $ is a prime ideal such that $ I \cap \rb{A \setminus P} = \emptyset $, if and only if $ I \subset P $.
\end{definition}

\begin{theorem}
Let $ A $ be a ring with a prime ideal $ P $. Then $ a \in A_P $ is a unit if and only if $ a \notin PA_P = S^{-1}P = \rb{A \setminus P}^{-1}P $. The ideal $ PA_P $ is the unique maximal ideal of $ A_P $. So $ A_P $ is a local ring.
\end{theorem}

\begin{proof}
Suppose $ a / s \in A_P $ is a unit. Then for some $ b / t \in A_P $ we have $ \rb{a / s}\rb{b / t} = 1 $. $ ab / st - 1 / 1 = 0 $ if and only if there exists $ u \in S $ such that $ u\rb{ab - st} = 0 $. $ uab = ust \in S = A \setminus P $. Hence $ a \notin P $, so that $ a / s \notin PA_P $. Conversely, if $ a / s \notin PA_P $, then $ a \notin P $ and $ s \in S $ gives $ a \in S = A \setminus P $. So $ a / s $ is a unit whose inverse is $ s / a $. $ PA_P $ is a maximal ideal, because joining any new element will be the whole ring, as this element must be a unit.
\end{proof}

\begin{example*}
$ \Z_{\rb{p}} = \cb{a / b \mid a, b \in \Z, \ \rb{p, b} = 1} $ and
$$ p\Z_{\rb{p}} = \cb{\dfrac{a}{b} \ \Bigg| \ a, b \in \Z, \ p \mid a, \ \rb{p, b} = 1}, \qquad \Z_{\rb{p}}^* = \cb{\dfrac{a}{b} \ \Bigg| \ a, b \in \Z, \ p \nmid a, \ \rb{p, b} = 1}. $$
Do the same for $ A = k\sb{x} $ and $ P = \rb{f\rb{x}} $, where $ f\rb{x} $ is irreducible.
\end{example*}

\begin{proposition}
Let $ M $ be an $ A $-module. Then $ M = 0 $ if and only if $ M_P = 0 $ for all maximal ideals $ P \subset A $.
\end{proposition}

\begin{proof}
Suppose $ M \ne 0 $. Choose $ x \in M $, $ x \ne 0 $. Define $ I = Ann\rb{x} = \cb{a \in A \mid ax = 0} $. This is an ideal in $ A $, and $ I \ne A $ because $ 1 \cdot x = x $, so $ 1 \notin I $. Let $ P $ be a maximal ideal such that $ I \subset P $. Claim that $ M_P \ne 0 $. Consider $ x / 1 \in M_P $. If $ M_P = 0 $, then $ x / 0 = 0 / 1 $, so $ ux = 0 $ for some $ u \in A \setminus P $. $ u \in I = Ann\rb{x} $ but $ u \notin P $. This is a contradiction because $ I \subset P $.
\end{proof}

\pagebreak

\section{Chain conditions}

\lecture{12}{Tuesday}{30/10/18}

\begin{lemma}
Let $ \Sigma $ be a partially ordered set. Then the following properties are equivalent.
\begin{enumerate}
\item Every non-empty subset of $ \Sigma $ has a maximal element.
\item Every ascending chain $ x_1 \le x_2 \le \dots $ is stationary, that is there exists $ n $ such that for any $ m \ge 0 $ we have $ x_{n + m} = x_n $.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $] Any ascending chain has a maximal element, say $ x_n $. Hence $ x_{m + n} = x_n $, for all $ m \ge 0 $.
\item[$ 2 \implies 1 $] Suppose $ S \subset \Sigma $ does not have a maximal element. Choose $ x_1 \in S $. There exists $ x_2 \in S $ such that $ x_2 > x_1 $. If $ x_1 < \dots < x_2 $ are chosen, then since $ x_n $ is not a maximal element, we can choose $ x_{n + 1} > x_n $. This constructs an ascending chain that is not stationary.
\end{itemize}
\end{proof}

\begin{definition}
A ring $ A $ is called \textbf{Noetherian} if every ascending chain of ideals in $ A $ is stationary. An $ A $-module $ M $ is Noetherian if every chain of submodules of $ M $ is stationary. In particular, a ring $ A $ is Noetherian if it is a Noetherian module over $ A $. A ring $ A $ is called \textbf{Artinian} if every descending chain of ideals is stationary. An $ A $-module $ M $ is Artinian if every descending chain of submodules is stationary.
\end{definition}

\begin{example*}
Let $ \Z \supset \rb{n} $ is Noetherian. $ \rb{a} \subset \rb{b} $ if and only if $ b $ divides $ a $. $ \rb{15} \subsetneq \rb{5} \subsetneq \rb{1} = \Z $. But $ \rb{2} \supsetneq \rb{4} \supsetneq \dots \supsetneq \rb{2^n} \supsetneq \dots $ is an infinite descending chain of ideals so $ \Z $ is not Artinian. If $ A $ is a finite ring, then it is trivially both Noetherian and Artinian.
\end{example*}

\begin{proposition}
Let $ A $ be a ring and let $ M $ be an $ A $-module. Then $ M $ is Noetherian if and only if every submodule of $ M $ is finitely generated.
\end{proposition}

\begin{proof}
Suppose $ M $ is Noetherian, but $ N \subset M $ is a submodule that is not finitely generated. Then take $ x_1 \in N $. Since $ N \ne \rb{x_1} $, the submodule generated by $ x_1 $, we can find $ x_2 \in N \setminus \rb{x_1} $. This gives $ \rb{x_1} \subsetneq \rb{x_1, x_2} $ and so on. This produces an ascending chain which is not stationary, a contradiction. Now suppose that every submodule of $ M $ is $ f \cdot g $. Consider any ascending chain $ M_1 \subset M_2 \subset \dots $. Let $ N = \bigcup_{i \ge 1} M_i $. This is a submodule of $ M $. By assumption $ N = \rb{x_1, \dots, x_n} $ for some $ x_i \in N $. For each $ x_i $ there is an $ M_j $ in our chain such that $ x_i \in M_j $. So there will be some $ M_l $ that contains $ x_1, \dots, x_n $. Then $ N = M_l $. And clearly for any $ m \ge 0 $ we have $ M_l \subset M_{l + m} \subset N = M_l $, so $ M_{l + m} = M_l $. So $ M $ is Noetherian.
\end{proof}

\begin{remark}
Applying this to the $ A $-module $ A $ we see that $ A $ is Noetherian if and only if every ideal is finitely generated. Hence every principal ideal domain is Noetherian.
\end{remark}

\begin{example*}
$ \Z $, $ k\sb{x} $, $ k\sb{x_1, \dots, x_n} $. Hilbert's basis theorem says that if $ R $ is Noetherian, then $ R\sb{x} $ is also Noetherian.
\end{example*}

\pagebreak

\begin{proposition}
\label{prop:10.4}
Let $ A $ be a ring. Let $ M $ be an $ A $-module and $ N \subset M $ a submodule. Then $ M $ is Noetherian if and only if $ N $ and $ M / N $ are both Noetherian $ A $-modules.
\end{proposition}

\begin{proof}
Suppose $ M $ is Noetherian. Then clearly $ N $ is Noetherian. $ M / N $ is Noetherian too. Indeed, let $ L $ be a submodule of $ M / N $. Let $ T $ be the inverse image of $ L $ in $ M $. Then we have a surjective homomorphism of $ A $-modules $ T \to L $. Since $ T $ is finitely generated, so that $ T = \rb{x_1, \dots, x_n} $ for some $ x_i \in T $. Then the images of $ x_1, \dots, x_n $ generate $ L $. Now assume $ N $ and $ M / N $ are Noetherian. This can also be proved using ascending chains. Take any ascending chain $ M_1 \subset M_2 \subset \dots $. Then $ N \cap M_1 \subset N \cap M_2 \subset \dots $ is an ascending chain of submodules of $ N $. Let $ n_1 \in \N $ be such that for all $ i \ge 0 $, $ N \cap M_{n + i} = N \cap M_{n_1} $. Consider $ \rb{M_i + N} / N \subset M / N $. This is just the set of cosets $ x + N $, where $ x \in M_i $. In fact $ \rb{M_i + N} / N \cong M_i / M \cap N $. We obtain an ascending chain $ \rb{M_1 + N} / N \subset \rb{M_2 + N} / N \subset \dots \subset \rb{M_{n_2} + N} / N = \rb{M_{n_1} + N} / N = \dots $. Take $ n = \max\cb{n_1, n_2} $. It works, that is $ M_n = M_{n + 1} = \dots $. Indeed, take any $ x \in M_{n + i} $ for $ i \ge 0 $. Then there exists $ y \in M_n $ such that $ x + N = y + N $. Thus $ x - y \in N \cap M_{n + i} $. But this is $ N \cap M_n $. So there exists $ z \in N \cap M_n $ such that $ x - y = z $. Hence $ x = y + z \in M_n $.
\end{proof}

\lecture{13}{Friday}{02/11/18}

Lecture 13 is a problem class.

\lecture{14}{Monday}{05/11/18}

\begin{corollary}
Let $ A $ be a Noetherian or Artinian ring. Let $ M $ be a finitely generated $ A $-module. Then $ M $ is Noetherian or Artinian.
\end{corollary}

\begin{proof}
Let $ M = \rb{m_1, \dots, m_n} $ for $ m_i \in M $, so
$$ M = \cb{a_1m_1 + \dots + a_nm_n \mid a_i \in A}. $$
Let $ A^{\oplus n} = \cb{\rb{a_1, \dots, a_n} \mid a_i \in A} $ be a free $ A $-module of rank $ n $. There is a homomorphism of $ A $-modules $ A^{\oplus n} \to M $ sending $ \rb{a_1, \dots, a_n} $ to $ a_1m_1 + \dots + a_nm_n $. It is surjective. By Proposition \ref{prop:10.4} it is enough to show that $ A^{\oplus n} $ is Noetherian. Prove by induction in $ n $. Clearly, $ A $ is Noetherian. $ A^{\oplus \rb{n - 1}} \subset A^{\oplus n} $. The quotient $ A^{\oplus n} / A^{\oplus \rb{n - 1}} \cong A $ by $ \rb{a_1, \dots, a_n} \mapsto a_n $. By Proposition \ref{prop:10.4} $ A^{\oplus \rb{n - 1}} $ and $ A $ Noetherian implies that $ A^{\oplus n} $ is Noetherian too. (Exercise: do the same in the Artinian case)
\end{proof}

\begin{corollary}
\label{cor:10.6}
Let $ A $ be a ring and let $ M $ be an $ A $-module. Suppose that we have $ 0 = M_0 \subset \dots M_n = M $ are $ A $-submodules of $ M $. Then $ M $ is Noetherian or Artinian if and only if each quotient $ M_{i + 1} / M_i $ is Noetherian or Artinian.
\end{corollary}

\begin{proof}
Use Proposition \ref{prop:10.4}.
\end{proof}

\begin{lemma}
Let $ A $ be a Noetherian ring. Let $ S \subset A $ be a multiplicative set. Then $ S^{-1}A $ is Noetherian.
\end{lemma}

\begin{proof}
Consider a non-empty set $ \Sigma $ of ideals of $ S^{-1}A $. There is a canonical homomorphism of rings $ f : A \to S^{-1}A $ by $ f\rb{a} = a / 1 $. If $ I $ is an ideal of $ S^{-1}A $, then $ f^{-1}\rb{I} $ is an ideal in $ A $. Then $ I = S^{-1}f^{-1}\rb{I} $. Now $ \Sigma $ gives a non-empty set of ideals of $ A $ under $ I \to f^{-1}\rb{I} $. Let $ J $ be a maximal element of this set. Then $ S^{-1}J $ is a maximal element of $ \Sigma $. Hence $ S^{-1}A $ is Noetherian.
\end{proof}

\pagebreak

\section{Primary decomposition}

\begin{definition}
An ideal $ Q $ in a ring $ R $ not equal to $ R $, that is a proper ideal, is called \textbf{primary} if all $ x, y \in R $ such that $ xy \in Q $ we have $ x \in Q $ or $ y^n \in Q $ for some $ n $. Equivalently, $ I \subsetneq R $ is called primary if every zero-divisor in $ R / I $ is nilpotent.
\end{definition}

\begin{example*}
Let $ p $ be a prime number. Then $ \rb{p^m} $ for $ m \ge 1 $ is a primary ideal in $ \Z $. $ ab \in \rb{p^m} $ if and only if $ p^m \mid ab $. Consider $ a $. If $ p \nmid a $, then $ p^m \mid b $, hence $ b \in \rb{p^m} $. Otherwise $ p \mid a $, then $ p^m \mid a^m $, so $ a^m \in \rb{p^m} $.
\end{example*}

\lecture{15}{Tuesday}{06/11/18}

Lecture 15 is a test.

\lecture{16}{Friday}{09/11/18}

\begin{example*}
$ \rb{f\rb{x}^n} \subset k\sb{x} $ for $ f\rb{x} $ irreducible is primary.
\end{example*}

\begin{example*}
Let $ R = k\sb{x, y} $ and $ I = \rb{x^3, y^5, xy} $. Claim that $ I $ is primary. Take any $ f\rb{x, y} = f_0 + xg\rb{x, y} + yh\rb{x, y} $. If $ f_0 = 0 $, since $ x $ and $ y $ are nilpotent, when considered as elements of $ R / I $, $ f\rb{x, y} $ is nilpotent. If $ f_0 \ne 0 $, $ f\rb{x, y} $ is a sum of a unit and a nilpotent, hence a unit. In particular, any zero-divisor in $ R / I $ is nilpotent.
\end{example*}

\begin{example*}
Let $ R = k\sb{x, y} $ and $ I = \rb{xy} $. $ xy \in I $, but $ x^n \notin I $ for all $ n \ge 0 $. Hence $ I $ is not a primary ideal.
\end{example*}

\begin{example*}
Even simpler, $ \rb{6} \subset \Z $ is not a primary ideal.
\end{example*}

\begin{proposition}
Let $ I \subset R $ be an ideal. If the radical $ r\rb{I} $ is a maximal ideal, then $ I $ is primary. In particular, any power of a maximal ideal is primary.
\end{proposition}

\begin{proof}
Consider $ R / I $. $ r\rb{I} / I $ is the nilradical of the ring $ R / I $, which is the intersection of all prime ideals of $ R / I $. We are given that $ r\rb{I} $ is a maximal ideal, so $ r\rb{I} / I $ is a maximal ideal of $ R / I $. Hence $ r\rb{I} / I $ is the unique prime ideal of $ R / I $. If $ x \notin r\rb{I} / I $, then $ x \in \rb{R / I}^* $. Indeed, every non-unit is contained in a maximal ideal by Corollary \ref{cor:4.10}, but there is only one maximal ideal and $ x $ is not in it. If $ x \in r\rb{I} / I $, then $ x $ is nilpotent. So all zero-divisor of $ R / I $ are nilpotent, hence $ I $ is a primary ideal of $ R $. Now let $ M \subset R $ be a maximal ideal. Then $ M^n $ is primary, since $ r\rb{M^n} = M $. Indeed, for any $ x \in M $ $ x^n \in M^n $, so $ M \subset r\rb{M^n} $. Since $ M $ is maximal we must have $ M = r\rb{M^n} $.
\end{proof}

\begin{example*}
In the example $ I = \rb{x^3, xy, y^5} \supset \rb{x, y}^5 $.
\end{example*}

\begin{proposition}
\label{prop:11.3}
Let $ I \subset R $ be a primary ideal. Then the radical $ r\rb{I} $ is a prime ideal of $ R $. It is the smallest prime ideal of $ R $ containing $ I $.
\end{proposition}

\begin{proof}
Let $ x, y \in R $ for $ xy \in r\rb{I} $. Then there exists $ n $ such that $ x^ny^n \in I $. If $ x^n \in I $, then $ x \in r\rb{I} $. Suppose $ x^n \notin I $. Since $ I $ is primary, there exists $ m $ such that $ \rb{y^n}^m \in I $. Then $ y \in r\rb{I} $. This proves that $ r\rb{I} $ is prime. Note that $ r\rb{I} $ is the intersection of all prime ideals containing $ I $. Hence if $ r\rb{I} $ is a prime ideal, it is the smallest prime ideal containing $ I $.
\end{proof}

\begin{definition}
Let $ P \subset R $ be a prime ideal. An ideal $ I \subset R $ is called \textbf{$ P $-primary}, if $ I $ is a primary ideal such that $ r\rb{I} = P $.
\end{definition}

\begin{lemma}
\label{lem:11.4}
Let $ I_1, \dots, I_n $ be $ P $-primary ideals in $ R $, where $ P $ is a prime ideal. Then $ \bigcap_{j = 1}^n I_j $ is also a $ P $-primary ideal.
\end{lemma}

\begin{proof}
Assume $ n = 2 $. The general case by induction. $ r\rb{I_1} = r\rb{I_2} = P $ and $ r\rb{I_1 \cap I_2} = r\rb{I_1} \cap r\rb{I_2} $. Hence $ r\rb{I_1 \cap I_2} = P $. Let us show that $ I_1 \cap I_2 $ is primary. Take $ x, y \in R $ such that $ xy \in I_1 \cap I_2 \subset I_1 $. If $ x \notin I_1 \cap I_2 $, then, say, $ x \in I_1 $. We know that $ y^n \in I_1 $ for some $ n \ge 0 $. Hence $ y \in r\rb{I_1} = P = r\rb{I_1 \cap I_2} $, so that $ y^m \in I_1 \cap I_2 $.
\end{proof}

Warning that it is not true in general that if $ r\rb{I} $ is prime, then $ I $ is primary. True if $ r\rb{I} $ is maximal though.

\pagebreak

\lecture{17}{Monday}{12/11/18}

\begin{definition}
Let $ R $ be a ring, and let $ I \subsetneq R $ be an ideal. Call $ I $ \textbf{irreducible} if for any two ideals $ J $ and $ K $ in $ R $ such that $ I = J \cap K $ we have either $ J = I $ or $ K = I $. $ I $ is \textbf{reducible}, that is not irreducible, if $ I = J_1 \cap J_2 $, where $ I \subsetneq J_i $ for $ i = 1, 2 $.
\end{definition}

\begin{note*}
$ x \in R $, which is not a unit, is irreducible if $ x $ is not a product of two non-units.
\end{note*}

\begin{proposition}
\label{prop:11.5}
\hfill
\begin{enumerate}
\item Any prime ideal is irreducible.
\item If $ R $ is Noetherian, then any irreducible ideal is primary.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item Let $ P $ be a prime ideal. Suppose $ P = I \cap J $. Note that $ IJ \subset I \cap J $. By the prime avoidance lemma \ref{lem:4.12} $ I \cap J \subset P $ implies that $ I \subset P $ or $ J \subset P $. Say, $ I \subset P = I \cap J \subset I $. Thus $ I = P $.
\item Let $ I \subset R $ be an irreducible ideal. Go over to $ R / I $. An equivalent statement is given that the zero ideal in a ring is irreducible, that is $ \rb{0} $ is not the intersection of two non-zero ideals, show that $ xy = 0 $, $ x \ne 0 $ implies $ y^n = 0 $ for some $ n $. So let $ A = R / I $. We work in $ A $, so $ x, y \in A $. $ R $ Noetherian gives $ A $ is Noetherian. Consider $ \cb{\alpha \in A \mid \alpha y = 0} = Ann\rb{y} \subset Ann\rb{y^2} \subset \dots $. These are ideals in $ A $. There is an $ n > 0 $ such that $ Ann\rb{y^n} = Ann\rb{y^{n + 1}} $. We want to show that some $ y^k = 0 $, that is $ \rb{y^k} = \rb{0} $. Claim that can take $ k = n $. Let us prove that $ 0 = \rb{x} \cap \rb{y^n} \ne \rb{0} \cap \rb{y^n} $. By the irreducibility of the zero ideal, this imply $ \rb{y^n} = 0 $. Suppose that there exists $ a \ne 0 $, $ \rb{a} \in \rb{x} \cap \rb{y^n} $. Then $ a = rx $ for some $ r \in A $. Then $ ay = rxy = 0 $. But $ a \in \rb{y^n} $, so $ a = by^n $ for some $ b \in A $. We obtain $ by^{n + 1} = 0 $. In other words, $ b \in Ann\rb{y^{n + 1}} = Ann\rb{y^n} $ so that $ by^n = 0 $ so $ a = 0 $. We proved that $ y^n = 0 $. Therefore, $ I \subset R $ is a primary ideal.
\end{enumerate}
\end{proof}

Let $ R $ be a ring and let $ I \subsetneq R $ be an ideal. A \textbf{primary decomposition} of $ I $ is an expression of $ I $ as an intersection of finitely many primary ideals.

\begin{theorem}[Noether]
Any proper ideal in a Noetherian ring has a primary decomposition.
\end{theorem}

\begin{proof}
Let $ I \subsetneq R $ be an ideal. We want to prove that $ I $ is an intersection of finitely many irreducible ideals using Proposition \ref{prop:11.5}. Suppose that this is not true. Look at all the ideals of $ R $ that cannot be written as intersections of finitely many irreducible ideals. Since $ R $ is Noetherian, this set has a maximal element, say $ J $. By construction, $ J $ is not an irreducible ideal of $ R $. Hence $ J $ is reducible, so $ J = J_1 \cap J_2 $, where $ J \subsetneq J_1 $ and $ J \subsetneq J_2 $. As $ J $ is a maximal element of our set of ideals, $ J_1 $ and $ J_2 $ are not in this set. Therefore, $ J_1 $ and $ J_2 $ each can be written as an intersection of finitely many irreducible ideals. Then $ J = J_1 \cap J_2 $ is also an intersection of finitely many irreducible ideals. This is a contradiction. Thus our set is empty, and so theorem is proved.
\end{proof}

\pagebreak

Recall that if $ I $ and $ J $ are ideals, then $ \rb{I : J} = \cb{r \in R \mid rJ \subset I} $.

\begin{lemma}
\label{lem:11.7}
Let $ R $ be a ring with a prime ideal $ P $. Let $ I \subset R $ be a $ P $-primary ideal, that is $ P = r\rb{I} $. Let $ x \in R $. Then
\begin{enumerate}
\item $ x \in I $, then $ \rb{I : \rb{x}} = R $.
\item $ x \notin I $, then $ \rb{I : \rb{x}} $ is a $ P $-primary ideal.
\item $ x \notin P $, then $ \rb{I : \rb{x}} = I $.
\end{enumerate}
\end{lemma}

\lecture{18}{Tuesday}{13/11/18}

\begin{proof}
\hfill
\begin{enumerate}
\item Obvious. $ x \in I $ gives $ 1 \cdot x \in I $ so $ 1 \in \rb{I : \rb{x}} $.
\item We want to prove the following.
\begin{itemize}
\item $ r\rb{\rb{I : \rb{x}}} = P $. Take $ y \in \rb{I : \rb{x}} $. Then $ yx \in I $. We know that $ I $ is primary and $ x \notin I $. Hence $ y^n \in I $ for some $ n \ge 1 $. Therefore, $ y \in r\rb{I} = P $. We proved that $ I \subset \rb{I : \rb{x}} \subset P $. This implies $ P = r\rb{I} \subset r\rb{\rb{I : \rb{x}}} \subset r\rb{P} = P $. This shows that $ r\rb{\rb{I : \rb{x}}} = P $. So $ 1 $ is proved.
\item $ \rb{I : \rb{x}} $ is primary. We need to show that if $ yz \in \rb{I : \rb{x}} $, so $ y\rb{xz} = xyz \in I $, and $ y \notin r\rb{\rb{I : \rb{x}}} $, so $ y^n \notin \rb{I : \rb{x}} $ for all $ n $ gives $ y^nx \notin I $, then we must show $ z \in \rb{I : \rb{x}} $. But $ I $ is primary and $ y^n \not I $ for all $ n $, by definition of primary ideals we must have $ xz \in I $. Hence $ z \in \rb{I : \rb{x}} $. So $ 2 $ is proved.
\end{itemize}
Hence $ 2 $ is proved.
\item Let $ y \in \rb{I : \rb{x}} $. Then $ xy \in I $. $ x \notin P = r\rb{I} $ hence no power of $ x $ is in $ I $. Hence $ y $ must be in $ I $.
\end{enumerate}
\end{proof}

We know that any ideal of a Noetherian ring has a primary decomposition $ I = I_1 \cap \dots \cap I_n $, where each $ I_i \subset R $ is primary. Let us call this decomposition \textbf{minimal} if $ r\rb{I_i} $ are distinct prime ideals for $ i = 1, \dots, n $. Indeed, this can be arranged with Lemma \ref{lem:11.4} because $ \bigcap_{s = 1}^n $, where each $ J_s $ is a $ P $-primary ideal, is again a $ P $-primary ideal and we have $ I_j \not\supset \bigcap_{l \ne j} I_l $, which can clearly be arranged by removing redundant ideals.

\begin{theorem}[First uniqueness theorem]
Let $ I = \bigcap_{j = i}^m I_j $ be a minimal primary decomposition. Then the prime ideals $ r\rb{I_1}, \dots, r\rb{I_n} $ are uniquely determined by $ I $, so they do not depend on the choice of a primary decomposition.
\end{theorem}

\begin{proof}
Consider $ \rb{I : \rb{x}} $ for $ x \in R $. Look at $ r\rb{\rb{I : \rb{x}}} $ and consider the prime ideals of $ R $ that can be written as $ r\rb{\rb{I : \rb{x}}} $. Claim that such prime ideals are precisely $ r\rb{I_1}, \dots, r\rb{I_n} $. $ \rb{I : \rb{x}} = \rb{\bigcap_{j = 1}^n I_j : \rb{x}} = \bigcap_{j = 1}^n \rb{I_j : \rb{x}} $. Hence $ r\rb{\rb{I : \rb{x}}} = \bigcap_{j = 1}^n r\rb{\rb{I : \rb{x}}} $. Lemma \ref{lem:11.7} gives
\begin{itemize}
\item $ x \in I_j $ gives $ \rb{I_j : \rb{x}} = R $, so $ r\rb{\rb{I_j : \rb{x}}} = R $, and
\item $ x \notin I_j $ gives $ \rb{I_j : \rb{x}} $ is $ P_j $-primary, so $ r\rb{\rb{I_j : \rb{x}}} = P_j $.
\end{itemize}
Therefore, $ r\rb{\rb{I : \rb{x}}} = \bigcap_{x \notin I_j} P_j $. If $ r\rb{\rb{I : \rb{x}}} $ is prime, we know by the prime avoidance lemma \ref{lem:4.12} that $ r\rb{\rb{I : \rb{x}}} = P_j $ for some $ P_j $. Conversely, for each $ j $, by minimality of our primary decomposition, there exists $ x_j \notin I_j $, but $ x_j \in \bigcap_{l \ne j} I_l $. Then $ r\rb{\rb{I_l : \rb{x_j}}} = R $ for $ l \ne j $, so $ r\rb{\rb{I_j : \rb{x_j}}} = P_j $. Hence $ r\rb{\rb{I : \rb{x_j}}} = P_j $.
\end{proof}

\lecture{19}{Friday}{16/11/18}

Lecture 19 is a problem class.

\pagebreak

\section{Artinian rings and modules}

\lecture{20}{Monday}{19/11/18}

\begin{definition}
Let $ A $ be a ring and let $ M $ be a non-zero $ A $-module. $ M $ is \textbf{simple} if and only if the only submodules of $ M $ are $ 0 $ and $ M $. Any $ A $-module $ M $ has a \textbf{composition series} if it contains submodules $ M = M_0 \supset \dots \supset M_n = 0 $ such that the quotients $ M_i / M_{i + 1} $ are simple $ A $-modules for $ i = 0, \dots, n - 1 $. Any such collection of submodules is called a composition series.
\end{definition}

\begin{proposition}
For any $ A $-module $ M $ the following are equivalent.
\begin{enumerate}
\item $ M $ is both Noetherian and Artinian.
\item $ M $ has a composition series.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $] Since $ M $ is Noetherian, $ M $ contains a maximal submodule. Any set of submodules of $ M $ has a maximal element. Call it $ M_1 $. Call $ M = M_0 $. Then $ M_1 / M_0 $ is simple by the choice of $ M_1 $. Continue, and find $ M_2 \subset M_1 $ maximal submodule. We construct a decreasing chain of submodules $ M = M_0 \supsetneq \dots \supsetneq M_0 = 0 $ because $ M $ is Artinian. So we obtain a composition series.
\item[$ 2 \implies 1 $] Assume $ M $ has a composition series $ M = M_0 \supsetneq M_n = 0 $. Any simple module is Noetherian and Artinian. Corollary \ref{cor:10.6} says that if $ L \subset N $ are $ A $-modules such that $ L $ and $ N / L $ are Artinian, then $ N $ is also Artinian. The same for Noetherian. Apply this to $ M_{n - 2} / M_{n - 1} $, where $ M_{n - 1} $ is simple. We know that $ M_{n - 2} / M_{n - 1} $ is also simple. Hence $ M_{n - 2} $ is Noetherian and Artinian. Then apply this to $ M_{n - 3} \supset M_{n - 2} $.
\end{itemize}
\end{proof}

\begin{proposition}
If $ M $ has a composition series of length $ n $, then any other composition series of $ M $ will have length $ n $.
\end{proposition}

\begin{proof}
Let $ l\rb{M} $ denote the smallest length of a composition series of $ M $. If $ M $ has no composition series, set $ l\rb{M} = \infty $.
\begin{itemize}
\item Let $ N \subsetneq M $ be a proper submodule. Then $ l\rb{N} < l\rb{M} $. Let $ n = l\rb{M} $ and suppose that $ M = M_0 \supsetneq \dots \supsetneq M_n = 0 $ is a composition series. Consider $ N_i = N \cap M_i $. $ N = N_0 \supset \dots \supset N_n = 0 $. $ N_{i + 1} = N_i \cap M_{i + 1} $. $ N_i / N_{i + 1} = N_i / \rb{N_i \cap M_{i + 1}} = \rb{N_i + M_{i + 1}} / M_{i + 1} \subset M_i / M_{i + 1} $, which is a simple module. Hence $ N_i / N_{i + 1} = 0 $ or $ N_i / N_{i + 1} = M_i / M_{i + 1} $. So remove repeated terms in $ N = N_0 \supset \dots N_n = 0 $. We obtain a composition series for $ N $. This proves that $ l\rb{N} \le n = l\rb{M} $. Assume that $ N \ne M $. Let us show that $ l\rb{N} \ne l\rb{M} $. Let us prove that if $ l\rb{N} = l\rb{M} $, then $ N = M $. We started with a composition series of length $ n = l\rb{M} $. If $ l\rb{N} = l\rb{M} $, then there were no repetitions in $ N = N_0 \supsetneq \dots \supsetneq N_n = 0 $. All inclusions here are strict. $ N_n = M_n = 0 $. $ N_{n - 1} = N \cap M_{n - 1} \ne 0 $ is a submodule of $ M_{n - 1} $, which is simple. Thus $ N_{n - 1} = M_{n - 1} $. Then $ N_{n - 2} = N \cap M_{n - 2} \ne N_{n - 1} = N \cap M_{n - 1} $. Therefore, $ 0 \ne N_{n - 2} / N_{n - 1} \subset M_{n - 2} / M_{n - 1} $ is an equality. Hence $ N_{n - 2} = M_{n - 2} $. Continue like this. The final shows that $ N_0 = M_0 $, that is $ N = M $.
\item Let $ M = M_0 \supsetneq \dots \supsetneq M_k = 0 $ be a composition series. We have $ k \ge l\rb{M} $. $ 1 $ gives that $ l\rb{M} = l\rb{M_0} > \dots > l\rb{M_k} = 0 $. Hence $ l\rb{M_{k - 1}} \ge 1, \dots, l\rb{M} \ge k $. Hence $ k = f\rb{M} $.
\end{itemize}
\end{proof}

\begin{definition}
If $ l\rb{M} < \infty $, then $ l\rb{M} $ is called the \textbf{length} of $ M $.
\end{definition}

\begin{proposition}
Let $ M $ be an $ A $-module and let $ N $ be a submodule of $ M $. Then $ N $ and $ M / N $ have finite length, then $ M $ has finite length and $ l\rb{M} = l\rb{N} + l\rb{M / N} $.
\end{proposition}

\begin{proof}
Take a composition series of $ M / N $ and pull it back to $ M $ via the map $ M \to M / N $. $ M = M_0 \supsetneq \dots \supsetneq N \supsetneq \dots $. Now take a composition series in $ N $ and combine it with the $ M_i $'s.
\end{proof}

\pagebreak

\lecture{21}{Tuesday}{20/11/18}

\begin{example*}
\hfill
\begin{itemize}
\item Any field is an Artinian ring.
\item A finite dimensional vector space over a field $ k $ is an Artinian $ k $-module.
\item Finite rings and finite modules are Artinian.
\item An example of a non-Artinian ring is $ k\sb{t} $.
\end{itemize}
\end{example*}

\begin{lemma}
\label{lem:12.6}
An Artinian integral domain is a field.
\end{lemma}

\begin{proof}
Let $ x \in A $, $ x \ne 0 $. Consider $ \rb{x} \supset \rb{x^2} \supset \dots $. This is a descending chain of ideals, hence is stationary, that is there exists $ n $ such that $ \rb{x^n} = \rb{x^{n + k}} $ for all $ k \ge 0 $. In particular, $ \rb{x^n} = \rb{x^{n + 1}} $, hence $ x^n = x^{n + 1}y $ for some $ y \in A $. $ A $ is an integral domain, hence $ x\rb{x^{n - 1} - x^ny} = 0 $ for $ x \ne 0 $ implies $ x^{n - 1} = x^ny $. Continue and obtain $ 1 = xy $. Hence $ x \in A^* $, so $ A $ is a field.
\end{proof}

\begin{corollary}
\label{cor:12.7}
In an Artinian ring any prime ideal is maximal.
\end{corollary}

\begin{proof}
Let $ P \subset A $ be a prime ideal. Then $ A / P $ is also an Artinian ring. $ A / P $ is an integral domain, hence a field by Lemma \ref{lem:12.6}. So $ P $ is maximal.
\end{proof}

\begin{corollary}
\label{cor:12.8}
In an Artinian ring the nilradical coincides with the Jacobson radical.
\end{corollary}

\begin{lemma}
\label{lem:12.9}
Let $ A $ be an Artinian ring. Then $ A $ has only finitely many maximal ideals.
\end{lemma}

\begin{proof}
For contradiction suppose we have countably many maximal ideals $ I_1, I_2, \dots $. $ I_1 \supset \dots \supset I_1 \cap \dots \cap I_n = I_1 \cap \dots \cap I_{n + 1} = \dots $. This implies that $ I_1 \cap \dots \cap I_n \subset I_{n + 1} $. Since $ I_{n + 1} $ is a prime ideal, there is a $ j \in \cb{1, \dots, n} $ such that $ I_j \subset I_{n + 1} $ by the prime avoidance lemma. But $ I_j $ is a maximal ideal, hence $ I_j = I_{n + 1} $, but we assumed that all the $ I_k $'s are pairwise different. Contradiction.
\end{proof}

\begin{lemma}
\label{lem:12.10}
The nilradical of an Artinian ring is nilpotent. In other words, there exist $ n \in \Z_{\ge 1} $ such that $ N\rb{A}^n = 0 $.
\end{lemma}

\begin{proof}
$ N\rb{A} \supset \dots \supset N\rb{A}^n = N\rb{A}^{n + 1} = \dots $. Such an $ n $ exists, because $ A $ is Artinian. We want to show that $ N\rb{A}^n = 0 $. Let $ C $ be the set of all ideals $ I \subset A $ such that $ I \cdot N\rb{A}^n \ne 0 $. For contradiction we assume $ N\rb{A}^n \ne 0 $. Then $ C $ is not empty, because $ C $ contains $ N\rb{A} $. Since $ A $ is Artinian, any non-empty set of ideals of $ A $ has a minimal element, say $ I $. So we have $ I \cdot N\rb{A}^n \ne 0 $. So there is an $ x \in I $ such that $ x \cdot N\rb{A}^n \ne 0 $. But then $ \rb{x} \cdot N\rb{A}^n \ne 0 $, so $ \rb{x} $ is in $ C $. Since $ I $ is minimal and $ \rb{x} \subset I $, we must have $ \rb{x} = I $. Let us observe that $ 0 \ne \rb{x} \cdot N\rb{A}^n = \rb{x} \cdot N\rb{A}^n \cdot N\rb{A}^n $. This shows that the ideal $ \rb{x} \cdot N\rb{A}^n $ is in $ C $, but $ \rb{x} \cdot N\rb{A}^n \subset \rb{x} = I $, which is minimal in $ C $. Therefore, $ \rb{x} \cdot N\rb{A}^n = \rb{x} \ni x $. This implies that $ x = xy $, where $ y \in N\rb{A}^n \subset N\rb{A} $. In particular, $ y $ is nilpotent, that is $ y^m = 0 $ for some $ m $. $ x = \dots = xy^m = 0 $, so $ x = 0 $. Hence $ I = 0 $. This is a contradiction as $ I \cdot N\rb{A}^n \ne 0 $. Thus $ N\rb{A}^n = 0 $.
\end{proof}

\pagebreak

\lecture{22}{Friday}{23/11/18}

\begin{lemma}
\label{lem:12.11}
Let $ k $ be a field and let $ V $ be a vector space over $ k $. The following are equivalent.
\begin{enumerate}
\item $ V $ is finite dimensional.
\item $ V $ is a Noetherian $ k $-module.
\item $ V $ is an Artinian $ k $-module.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $] Trivial.
\item[$ 2 \implies 3 $] Use the fact that $ V $ has a finite generating set.
\item[$ 3 \implies 1 $] Trivial.
\end{itemize}
\end{proof}

\begin{lemma}
\label{lem:12.12}
Let $ A $ be a ring. Suppose we have maximal ideals $ I_1, \dots, I_n $, possibly with repetitions. If $ I_1 \dots I_n = 0 $, then $ A $ is Artinian if and only if $ A $ is Noetherian.
\end{lemma}

\begin{proof}
Let $ M_1 = I_1 \supset \dots \supset M_n = I_1 \dots I_n = 0 $ and $ A $ be Noetherian, hence all the $ M_i $'s are Noetherian too. Hence $ M_i / M_{i + 1} $ are Noetherian $ A $-modules for all $ i $. Note that $ M_i \cdot I_{i + 1} = M_{i + 1} $, hence $ I_{i + 1} \subset A $ acts as zero on $ M_i / M_{i + 1} $. Therefore, $ M_i / M_{i + 1} $ is naturally a module for the quotient ring $ A / I_{i + 1} $. Since $ I_{i + 1} $ is a maximal ideal, the ring $ A / I_{i + 1} $ is a field, and $ M_i / M_{i + 1} $ is a vector space over $ A / I_{i + 1} $. Since $ M_i / M_{i + 1} $ is a Noetherian $ A $-module, this is a finite dimensional vector space over $ A / I_{i + 1} $. By Lemma \ref{lem:12.11}, $ M_i / M_{i + 1} $ is also an Artinian $ A / I_{i + 1} $-module. Hence, $ M_i / M_{i + 1} $ is an Artinian $ A $-module. In particular, $ M_{n - 1} / M_n = M_{n - 1} $ is Artinian, but $ M_{n - 2} / M_{n - 1} $ is also Artinian. Hence $ M_{n - 2} $ is Artinian. Continue like this. Finally, prove that $ A $ is Artinian. (Exercise: converse)
\end{proof}

\begin{definition}
Let $ A $ be a ring. The \textbf{Krull dimension} of $ A $ is the supremum of all $ n \in \Z_{> 0} $ such that $ A $ has a chain of proper prime ideals $ I_0 \subsetneq \dots \subsetneq I_n $. $ \dim\rb{A} $ is a positive integer or infinity.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item Any field has dimension zero.
\item Any principal ideal domain which is not a field has dimension one, such as $ \Z $ or $ k\sb{x} $, where $ k $ is a field. $ \rb{0} \subsetneq P $ for $ P $ a prime ideal. In a PID all non-zero prime ideals are maximal. An integral domain but not a field has $ \dim\rb{A} = 1 $ if and only if all prime ideals are maximal.
\item $ k\sb{x_1, \dots, x_n} $ has this chain $ \rb{0} \subsetneq \dots \subsetneq \rb{x_1, \dots, x_n} $. $ \dim\rb{k\sb{x_1, \dots, x_n}} \ge n $. In fact dimension is $ n $.
\end{itemize}
\end{example*}

\begin{theorem}
A ring is Artinian if and only if it is Noetherian and has dimension zero.
\end{theorem}

\begin{proof}
Let us show that $ A $ Artinian gives $ A $ Noetherian and $ \dim\rb{A} = 0 $. Corollary \ref{cor:12.7} says that every prime ideal is maximal, hence $ \dim\rb{A} = 0 $. Lemma \ref{lem:12.9} says that $ A $ has only finitely many maximal ideals, call them $ I_1, \dots, I_n $. $ I_1 \dots I_n \subset I_1 \cap \dots \cap I_n = J\rb{A} = N\rb{A} $ by Corollary \ref{cor:12.8}. But Lemma \ref{lem:12.10} says $ N\rb{A}^m = 0 $ for some $ m \ge 1 $. We conclude that $ I_1^m \dots I_n^m = 0 $. We can apply Lemma \ref{lem:12.12} and so prove that $ A $ is Noetherian. For the other implication, let us first prove that if $ A $ is Noetherian, then $ N\rb{A}^m = 0 $, for some $ m \ge 1 $. Indeed, $ N\rb{A} $ is finitely generated, so $ N\rb{A} = \rb{m_1, \dots, m_n} $. For each $ i = 1, \dots, m $, there is a $ a_i \ge 1 $ such that $ m_i^{a_i} = 0 $. Take $ a = a_1 + \dots + a_n $. Then $ \rb{m_1, \dots, m_n}^a = 0 $. So $ N\rb{A} $ is a nilpotent ideal. As a consequence, we obtain that any ideal in a Noetherian ring contains some power of its radical $ I \subset A $. There exists $ n $ such that $ r\rb{I}^n \subset I $ by applying the fact that the nilradical is nilpotent to $ A / I $ and $ N\rb{A / I} = r\rb{I} / I $, so $ N\rb{A / I}^n = 0 $ gives $ r\rb{I}^n \subset I $. Now $ \rb{0} $ in $ A $ has a primary decomposition, since $ A $ is Noetherian. Write $ \rb{0} = J_1 \cap \dots \cap J_n $, where $ J_i $ are primary ideals. We know that $ P = r\rb{J_i} $ is a prime ideal of $ A $ by Proposition \ref{prop:11.3}. Since $ \dim\rb{A} = 0 $, each $ P_i $ is actually a maximal ideal. For each $ i = 1, \dots, n $ there is a $ k_i \ge 1 $ such that $ P_i^{k_i} \subset J_i $, since $ P_i = r\rb{J_i} $. Hence $ \rb{0} = J_1 \cap \dots \cap J_n \supset J_1 \cdot \dots \cdot J_n \supset P_1^{k_1} \dots P_n^{k_n} $, hence $ P_1^{k_1} \dots P_n^{k_n} = 0 $. By Lemma \ref{lem:12.12} we conclude that $ A $ is Artinian.
\end{proof}

\pagebreak

\lecture{23}{Monday}{26/11/18}

\begin{theorem}[Structure theorem]
\label{thm:12.15}
Any Artinian ring is isomorphic to a product of local Artinian rings.
\end{theorem}

Recall that a ring is local if it has only one maximal ideal.

\begin{example*}
Let $ R = k\sb{x} $. Let $ f\rb{x} $ be a non-zero polynomial and $ A = R / \rb{f} $. $ \dim_k\rb{A} < \infty $ so $ A $ is Artinian. $ f\rb{x} = \prod_{i = 1}^n f_i\rb{x}^{m_i} $, where $ f_i\rb{x} $ are pairwise different irreducible polynomials. The ideals of $ A $ correspond to factors of $ f\rb{x} $. Maximal ideals correspond to $ f_i\rb{x} $. Chinese remainder theorem gives $ A = R / \rb{f} \cong \prod_{i = 1}^n R / \rb{f_i\rb{x}^{m_i}} $.
\end{example*}

\begin{definition}
The ideal $ I, J \subset R $ are \textbf{coprime} if $ I + J = R $.
\end{definition}

Suppose $ I_1, \dots, I_n $ are ideals of $ R $. Consider the natural homomorphism $ \phi : R \to \prod_{i = 1}^n R / I_i $ by $ \phi\rb{r} = \rb{r + I_1, \dots, r + I_n} $.

\begin{lemma}
\label{lem:12.17}
\hfill
\begin{itemize}
\item If $ I_j + I_k = R $ for any $ j \ne k $, then $ \prod_{j = 1}^n = \bigcap_{j = 1}^n I_j $.
\item $ \phi $ is surjective if and only if $ I_j + I_k = R $ for any pair $ j \ne k $.
\item $ \phi $ is injective if and only if $ \bigcap_{j = 1}^n I_j = 0 $.
\end{itemize}
\end{lemma}

\begin{proof}
See problem sheet 4.
\end{proof}

\begin{proof}[Proof of Theorem \ref{thm:12.15}]
Recall that $ A $ is an Artinian ring. By Lemma \ref{lem:12.9} $ A $ has only finitely many maximal ideals, say $ I_1, \dots, I_n $, all pairwise different. $ I_1 \dots I_n \subset I_1 \cap \dots \cap I_n = J\rb{A} = N\rb{A} $ by Corollary \ref{cor:12.8}. By Lemma \ref{lem:12.10} $ N\rb{A}^m = 0 $. Hence $ \rb{I_1 \dots I_n}^m = 0 $. $ I_j \subsetneq I_j + I_k = R $ for $ j \ne k $, where $ I_j $ is maximal. By Lemma \ref{lem:12.17} $ \cap_{j = 1}^n I_j = \prod_{j = 1}^n I_j $. Claim that if $ j \ne k $, then $ I_j^a + I_k^a = R $ for any $ a \ge 1 $. Indeed, $ I_j + I_k = R $ so there exist $ x \in I_j $, $ y \in I_K $ such that $ 1 = x + y $. Hence $ 1^{2a} = \rb{x + y}^{2a} $, which is a sum of a multiple of $ x^a $ and a multiple of $ y^a $, which is in $ I_j^a + I_k^a $. By Lemma \ref{lem:12.17} we have $ \cap_{j = 1}^n I_j^a = \prod_{j = 1}^n I_k^a $. So $ \phi $ gives an isomorphism $ A / \prod_{j = 1}^n I_j^a \cong \prod_{j = 1}^n A / I_j^a $. It is enough to show that each $ A / I_j^a $ is a local ring. Take $ a $ large enough, say $ a = m $. Then $ \prod_{j = 1}^n I_j^a = 0 $. Note that $ N\rb{A / I_j^a} = I_j / I_j^a $. Indeed, for all $ x \in I_j $ we have $ x^a \in I_j^a $. Since $ I_j / I_j^a $ is a maximal ideal of $ A / I_j^a $, this is $ N\rb{A / I_j^a} $. This is the intersection of all prime ideals of $ A_j^a $. Thus all of them coincide with $ I_j / I_j^a $, so are maximal. Hence, $ I_j / I_j^a $ is a unique maximal ideal of $ A / I_j^a $.
\end{proof}

\lecture{24}{Tuesday}{27/11/18}

Lecture 24 is a test.

\lecture{25}{Friday}{30/11/18}

Lecture 25 is a problem class.

\pagebreak

\section{Integral closure and normal rings}

\lecture{26}{Monday}{03/12/18}

\begin{theorem}
\label{thm:13.1}
Let $ R $ be a ring. Let $ A \subset R $ be a subring. Let $ x \in R $. The following are equivalent.
\begin{enumerate}
\item There are $ a_0, \dots, a_{n - 1} \in A $ such that $ x^n + \dots + a_n = 0 $
\item The $ A $-module $ A\sb{x} $ is finitely generated. Here $ A\sb{x} \subset R $ are all polynomial expressions in $ x $ with coefficients in $ A $.
\item There is a subring $ B \subset R $ containing $ A $ and $ x $ such that $ B $ is a finitely generated $ A $-module.
\end{enumerate}
\end{theorem}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $] $ x^n = -\rb{a_{n - 1}x^{n - 1} + \dots + a_0} $ so $ x^n $ belongs to the $ A $-module generated by $ 1, \dots, x^{n - 1} $. $ x^{n + 1} = -x\rb{a_{n - 1}x^{n - 1} + \dots + a_0} = -a_{n - 1}x^n + \dots $. Clearly, $ x^k \in A \cdot 1 + \dots + A \cdot x^{n - 1} $. So $ A\sb{x} $ is a finitely generated $ A $-module.
\item[$ 2 \implies 3 $] Trivial. Indeed, take $ B = A\sb{x} $.
\item[$ 3 \implies 1 $] Assume such a $ B $ exists. There exists $ y_1, \dots, y_n $ in $ B $ which generate $ B $ as an $ A $-module. Now $ x \in B $ and $ B $ is a ring, so $ xy_1, \dots, xy_n \in B $. Hence $ xy_i = \sum_{j = 1}^n a_{ij}y_j $ for $ i = 1, \dots, n $, where $ a_{ij} \in A $. Let $ M $ be the matrix $ \rb{a_{ij}} $, and let $ d = \det\rb{x \cdot I - M} \in B $. By the determinant trick, we have $ dy_i = 0 $ for $ i = 1, \dots, n $. Therefore, since $ B = \rb{y_1, \dots, y_n} $, we have $ dB = 0 $. But $ B $ contains one. Hence $ d = 0 $. If $ p\rb{t} $ is the characteristic polynomial of $ M $, that is $ p\rb{t} = \det\rb{t \cdot I - M} \in A\sb{t} $ with leading coefficient one, then $ p\rb{x} = 0 $. This proves $ 1 $.
\end{itemize}
\end{proof}

\begin{definition}
Let $ A \subset R $ be rings. An element $ x \in B $ is \textbf{integral} over $ A $ if the equivalent conditions of Theorem \ref{thm:13.1} hold. A monic polynomial $ p\rb{t} \in A\sb{t} $ such that $ p\rb{x} = 0 $ is called the \textbf{equation of integral dependence} of $ x $ over $ A $. $ R $ is called integral over $ A $ if every element in $ R $ is integral over $ A $.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item Let $ R = k\sb{x} \supset k\sb{x^2} = A $. $ k\sb{x} $ is integral over $ k\sb{x^2} $. $ t^2 - x^2 = 0 $, hence $ x $ is integral. (Exercise: check that all elements are integral, without using Theorem \ref{thm:13.1})
\item Let $ \Z\sb{\rb{-1 + \sqrt{-3}} / 2} $ and $ \zeta = \rb{-1 + \sqrt{-3}} / 2 $. $ \zeta^2 + \zeta + 1 = 0 $. $ \Z\sb{\rb{-1 + \sqrt{-3}} / 2} $ is integral over $ \Z $.
\item But $ \Z\sb{1 / 5} $ is not an integral extension of $ \Z $. $ 1 / 5 $ is not integral over $ \Z $.
\end{itemize}
\end{example*}

\pagebreak

\begin{lemma}
\hfill
\begin{enumerate}
\item If $ A \subset B \subset C $ are rings such that $  $ is a finitely generated $ B $-module and $ B $ is a finitely generated $ A $-module, then $ C $ is a finitely generated $ A $-module.
\item If $ A \subset B $ are rings and $ x_1, \dots, x_n \in B $ are integral over $ A $, then $ A\sb{x_1, \dots, x_n} $ is a finitely generated $ A $-module. Hence $ A\sb{x_1, \dots, x_n} $ is an integral $ A $-algebra.
\item If $ A \subset B \subset C $ are rings such that $ C $ is integral over $ B $ and $ B $ is integral over $ A $, then $ C $ is integral over $ A $.
\item If $ A \subset B $ are rings, then the set of all elements of $ B $ integral over $ A $ is a subring $ B $, called the \textbf{integral closure} of $ A $ in $ B $ and denoted by $ \widetilde{A} $. Then $ \widetilde{A} $ is integrally closed in $ B $, that is every element of $ B $ which is integrally closed over $ \widetilde{A} $ already belongs to $ \widetilde{A} $.
\end{enumerate}
\end{lemma}

\begin{proof}
\hfill
\begin{enumerate}
\item Assume that $ c_1, \dots, c_n \in C $ generate $ C $ as a $ B $-module. Assume that $ b_1, \dots, b_m \in B $ generate $ B $ as an $ A $-module. Then $ b_ic_j $ for all $ i $ and $ j $ generate $ C $ as an $ A $-module.
\item By Theorem \ref{thm:13.1} $ A\sb{x_1} $ is a finitely generated $ A $-module. But $ x_2 $ is integral over $ A $, hence also over $ A\sb{x_1} $. Thus $ A\sb{x_1, x_2} $ is a finitely generated $ A\sb{x_1} $-module. By $ 1 $ $ A\sb{x_1, x_2} $ is a finitely generated $ A $-module. Then continue by repeating this $ n - 1 $ times.
\item We must show that any $ c \in C $ is integral over $ A $. Since $ c $ is integral over $ B $, there are $ b_0, \dots, b_{n - 1} \in B $ such that $ c^n + \dots + b_0 = 0 $. But $ B $ is integral over $ A $, hence each $ b_i $ is integral over $ A $. Then by $ 2 $ $ A\sb{b_0, \dots, b_{n - 1}} $ is a finitely generated $ A $-module. This implies that $ A\sb{b_0, \dots, b_{n - 1}, c} $ is a finitely generated $ A $-module, using $ 1 $. Theorem \ref{thm:13.1} says that $ x $ is integral over $ A $.
\item Must show that if $ x, y $ are integral elements of $ B $, then so is $ xy, x + y, -x $. Consider $ A\sb{x, y} $. By $ 2 $ this is a finitely generated $ A $-module. This is a ring which is a finitely generated $ A $-module, hence by Theorem \ref{thm:13.1} every element of this ring is integral over $ A $. In particular, $ x + y, -x, xy $ are integral. Let us show that $ \widetilde{A} $ is integrally closed in $ B $, that is for all $ x \in B $ that is integral over $ \widetilde{A} $ belongs to $ \widetilde{A} $. Indeed, $ A \subset \widetilde{A} \subset \widetilde{\widetilde{A}} $ are rings, and $ \widetilde{A} $ is integral over $ A $, $ \widetilde{\widetilde{A}} $ is integral over $ \widetilde{A} $. Hence, by $ 3 $ $ \widetilde{\widetilde{A}} $ is also integral over $ A $. Therefore, $ \widetilde{\widetilde{A}} = \widetilde{A} $.
\end{enumerate}
\end{proof}

\lecture{27}{Tuesday}{04/12/18}

\begin{definition}
Let $ A $ be an integral domain, and let $ B $ be the field of fractions of $ A $. In this case $ \widetilde{A} $ is called the \textbf{normalisation} of $ A $. If $ \widetilde{A} = A $, then $ A $ is called a \textbf{normal} ring.
\end{definition}

\begin{example*}
\hfill
\begin{itemize}
\item Any UFD is normal (Exercise), for example $ \Z $ is normal. $ k\sb{x_1, \dots, x_n} $ is a UFD, hence a normal ring.
\item Number theory examples. Let $ \zeta = e^{2\pi i / n} $ for $ n \ge 2 $. $ \Q\rb{\zeta} $ is a cyclotomic field. $ \Z \subset \Q\rb{\zeta} $ and $ \zeta^n - 1 = 0 $, hence $ \zeta $ is integral over $ \Z $. Assume $ F $ is a field extension of $ \Q $. Define the ring of integers of $ F $ as the integral closure of $ \Z $ in $ F $. A fact is that the ring of integers of $ \Q\rb{\zeta} $ is $ \Z\sb{\zeta} $. Another class of interesting number fields is $ \Q\rb{\sqrt{a}} $ for $ a \in \Z $ square-free. What is the integral closure of $ \Z $ in $ \Q\rb{\sqrt{a}} $? Is it $ \Z\sb{\sqrt{a}} $? $ \sqrt{a}^2 - a = 0 $. Yes, if $ a \equiv 2 \mod 4 $ or $ a \equiv 3 \mod 4 $. No, if $ a \equiv 1 \mod 4 $. It is bigger than $ \Z\sb{\sqrt{a}} $. $ \Q\rb{\sqrt{-3}} = \Q\rb{\rb{-1 + \sqrt{3}} / 2} = \Q\rb{\zeta_3} \supset \Z\sb{\zeta_3} $, the normalisation of $ \Z\sb{\sqrt{a}} $.
\item Normalisation in algebraic geometry. $ y^2 = x^3 $ has a cusp at $ \rb{0, 0} $, since $ f\rb{x, y} = x^3 - y^2 $ and $ \rb{\rb{\partial f / \partial x}\rb{0, 0}, \rb{\partial f / \partial x}\rb{0, 0}} = \rb{0, 0} $, a singular point. Let $ A = k\sb{x, y} / \rb{y - x^3} $. $ A $ is the ring of functions on this curve. Is $ A $ normal? No. Let $ t = y / x $. $ t^2 = y^2 / x^2 $, so $ t^2 - x = 0 $ hence $ t $ is an element of the field of fractions of $ A $, which is not in $ A $, but is integral over $ A $. So $ A \subset k\sb{t} $ is in the field of fractions of $ A $. But $ k\sb{t} $ is a UFD, hence normal. Thus $ k\sb{t} $ is the normalisation of $ A $. The map $ t \mapsto \rb{t^2, t^3} $ is a map from the affine line to our curve. It is a desingularisation of our singular curve.
\end{itemize}
\end{example*}

\pagebreak

\section{Discrete valuation rings}

\lecture{28}{Friday}{07/12/18}

\begin{theorem}
Let $ R $ be an integral domain. The following are equivalent.
\begin{enumerate}
\item $ R $ is a UFD with only one irreducible element, up to multiplication by units.
\item $ R $ is a Noetherian local ring whose maximal ideal is principal.
\end{enumerate}
\end{theorem}

\begin{theorem}
UFD with one irreducible element if and only if a Noetherian local ring whose maximal ideal is principal.
\end{theorem}

A ring $ R $ as in $ 1 $ is a ring where every non-unit is $ at^n $ for $ a \in R^* $ and $ n \ge 1 $.

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $] Let $ t $ be an irreducible element of $ R $. Every non-unit belongs to $ \rb{t} $. So $ R \setminus \rb{t} \subset R^* $. In fact, the elements of $ R $ not divisible by $ t $ are units. So $ R^* = R \setminus \rb{t} $. Hence $ \rb{t} $ is a maximal ideal. Claim that all ideals of $ R $ are $ \rb{t^n} $ for $ n \ge 1 $. Let $ I $ be an ideal in $ R $. Let $ n $ be the smallest integer such that $ I $ contains $ at^n $ for $ a \in R^* $. Then $ \rb{t^n} = \rb{at^n} \subset I $. $ I $ does not contain $ bt^m $ for $ b \in R^* $ and $ m < n $, hence $ I = \rb{t^n} $. Hence $ R $ is a PID, so is Noetherian. It is clear that if $ n \ge 2 $, then $ \rb{t^n} \subsetneq \rb{t} $. So $ \rb{t} $ is a unique maximal ideal.
\item[$ 2 \implies 1 $] Let $ t $ be a generator of the maximal ideal. Then $ R \setminus \rb{t} = R^* $. Claim that $ \bigcap_{n \ge 1} \rb{t^n} = 0 $, where $ \rb{t} \supset \rb{t^2} \supset \dots $. Equivalently, for each non-zero $ a \in R $ there is a largest $ n $ such that $ a \in \rb{t^n} $. If $ a \in \rb{t} $, then $ a \in R^* $ and $ n = 0 $ so we are done. Now assume $ a \in \rb{t} $. Then $ a = a_1t $, for some $ a_1 \in R $. If $ a_1 \ne \rb{t} $, that is $ a_1 \in R^* $, then $ a \notin \rb{t^2} $. Indeed, otherwise $ a = bt^2 $, where $ b \in R $. $ bt^2 = a_1t $. $ R $ is an integral domain, hence $ bt = a_1 $, which is a contradiction. But if $ a_1 \in \rb{t} $, then $ \rb{a} \subsetneq \rb{a_1} $. The inclusion is strict, because otherwise there is a unit $ u \in R^* $ such that $ a_1 = ua = a_1ut $, hence $ ut = 1 $ which is absurd, because $ t \notin R^* $. This shows that if $ n $ does not exist, then there is an infinite strictly increasing chain of ideals in $ R $. This is a contradiction because $ R $ is Noetherian.
\end{itemize}
\end{proof}

Recall that a set has a total order $ x < y $ if for every two elements exactly one of these holds.
$$ x < y, \qquad x = y, \qquad x > y. $$
An abelian group $ G $ is an \textbf{ordered group} if $ G $ has a total order compatible with the group structure, that is if $ x < y $ then $ x + z < y + z $ for any $ z \in G $.

\begin{example*}
$ \Z, \Q, \R $ with the usual order.
\end{example*}

\begin{definition}
Let $ K $ be a field. A \textbf{valuation} in $ K $ is a surjective homomorphism $ v : K^* \to G $, where $ G $ is an ordered group, such that $ v\rb{x \pm y} \ge \min\cb{v\rb{x}, v\rb{y}} $. One defines $ v\rb{0} = \infty $.
\begin{itemize}
\item Exercise: $ R = \cb{x \in K \mid v\rb{x} \ge 0} $ is a ring, called the valuation ring of $ v $.
\item Exercise: if $ R^* = \cb{x \in K \mid v\rb{x} = 0} $, $ R \setminus R^* = \cb{x \in K \mid v\rb{x} > 0} $ is the unique maximal ideal of $ R $, thus every valuation ring is a local integral domain.
\end{itemize}
\end{definition}

\begin{definition}
A ring is called a \textbf{valuation ring} if its field of fractions $ K $ has a valuation $ v : K^* \to G $, for some ordered group $ G $, such that $ R = \cb{x \in K \mid v\rb{x} \ge 0} $. A valuation ring is a \textbf{discrete valuation ring} if the ordered group is $ \Z $, with the usual order.
\end{definition}

\pagebreak

\begin{example*}
\hfill
\begin{itemize}
\item $ \Z_{\rb{p}} = \cb{a / b \mid a, b \in \Z, \ \rb{p, b} = 1} $ is a DVR, where $ K = \Q $. $ v\rb{p^n \cdot \rb{c / d}} = n \in \Z $, where $ c, d \in \Z $ and $ p \nmid c, d $.
\item The ring of formal power series $ k\sb{\sb{t}} $ is a DVR. $ v\rb{a_0 + a_1t + \dots} = n $ such that $ a_0 = \dots = a_{n - 1} = 0 $ and $ a_n \ne 0 $ for $ a_i \in k $. $ k\rb{\rb{t}} = \cb{\sum_{i \ge m} a_it^i \mid a_i \in k, \ m \in \Z} $.
\item An example of a valuation ring which is not a DVR. Fix $ n $. Puiseux series is
$$ k\sb{\sb{t^{1 / n}}} = \cb{\sum_{i \ge n} a_it^i \ \Bigg| \ a_i \in k}. $$
Let $ R = \bigcup_{n \ge 1} k\sb{\sb{t^{1 / n}}} $. Define $ v $ as the highest power of $ t $ dividing our element. $ v : K^* \to \Q $ by $ v\rb{at^{c / d} + \dots} = c / d $ is not a discrete valuation. Note that the power series with zero constant term form a maximal ideal of $ R $. $ t \subsetneq t^{1 / 2} \subsetneq \dots $. So $ R $ is not a Noetherian ring.
\end{itemize}
\end{example*}

\begin{theorem}
A valuation ring is Noetherian if and only if it is a DVR.
\end{theorem}

\begin{proof}
Let $ R $ be a Noetherian valuation ring. Then I claim that the maximal ideal $ I $ is principal. Any ideal in $ R $ is finitely generated, say $ I = \rb{x_1, \dots, x_n} $. By induction, it is enough to show that any ideal with two generators, say $ \rb{x, y} $, is generated by $ x $ or $ y $. Consider $ v\rb{x} $ and $ v\rb{y} $. $ v\rb{x} < v\rb{y} $, $ v\rb{x} = v\rb{y} $, or $ v\rb{x} > v\rb{y} $. Without loss of generality assume that $ v\rb{x} < v\rb{y} $. Then $ y \in \rb{x} $ because $ R = \cb{z \in K \mid v\rb{z} \ge 0} $. In particular, $ v\rb{y / x} = v\rb{y} - v\rb{y} \ge 0 $ gives $ y / x \in R $.
\end{proof}

\lecture{29}{Monday}{10/12/18}

\begin{theorem}
\hfill
\begin{enumerate}
\item $ R $ is a DVR.
\item $ R $ is a UFD with only irreducible elements.
\item $ R $ is a Noetherian local ring with principal maximal ideal.
\item $ R $ is a Noetherian normal local ring of dimension one.
\end{enumerate}
\end{theorem}

\begin{proof}
For contradiction, assume there exist $ y \in I \setminus \rb{t} $. It is possible that $ y $ has the additional property $ Iy \subset \rb{t} $. $ K $ is the field of fractions of $ R $. $ y / t \in K \setminus R $ and $ \rb{y / t}I \subset R $. We have $ \rb{y / t}I $ is an ideal in $ R $.
\begin{enumerate}
\item $ \rb{y / t}I = R $. $ 1 = xy / t $ so $ t = xy \in I^2 $, a contradiction.
\item $ \rb{y / t}I \subset I $. Goal is try to show that $ y / t \in R $. Then $ y \in \rb{t} $ will be a contradiction. $ R $ is Noetherian, hence $ I = \rb{x_1, \dots, x_n} $ for some $ x_i \in R $.
$$ \dfrac{y}{t}x_1 = a_{11}x_1 + \dots + a_{1n} + x_n, \dots, \dfrac{y}{t}x_n = a_{n1}x_1 + \dots + a_{nn} + x_n, $$
for $ a_{ij} \in R $. $ A^v \cdot A = \det\rb{A} \cdot I $. Let
$$ M = \threebythree{\dfrac{y}{t} - a_{11}}{\dots}{-a_{1n}}{\vdots}{\ddots}{\vdots}{-a_{n1}}{\dots}{\dfrac{y}{t} - a_{nn}}\threebyone{x_1}{\vdots}{x_n} = 0. $$
$ \det\rb{M} \cdot x_i = 0 $ for $ i = 1, \dots, n $. Without loss of generality $ x_i \ne 0 $. $ R $ is an integral domain. We see that $ \det\rb{M} = 0 $. $ \det\rb{M} = \rb{y / t}^n + \dots + r_0 $, where $ r_i \in R $. Therefore, $ y / t $ is an element of $ K $ which is integral over $ R $. By assumption $ R $ is normal, and since $ y / t \in K $ is integral over $ R $, we must have $ y / t \in R $. Then $ y \in \rb{t} $ is a contradiction.
\end{enumerate}
\end{proof}

\lecture{30}{Tuesday}{11/12/18}

Lecture 30 is a problem class.

\end{document}
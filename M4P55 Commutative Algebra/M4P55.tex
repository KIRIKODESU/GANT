\def\module{M4P55 Commutative Algebra}
\def\lecturer{Prof Alexei Skorobogatov}
\def\term{Autumn 2019}
\def\cover{}
\def\syllabus{}
\def\thm{section}

\input{../style/header}

\begin{document}

\input{../style/main}

\section{Introduction}

\lecture{1}{Thursday}{03/10/19}

The prerequisites are
\begin{itemize}
\item groups,
\item rings,
\item fields, and
\item a solid linear algebra.
\end{itemize}

This course is good for
\begin{itemize}
\item algebraic geometry, and
\item algebraic number theory.
\end{itemize}

The following are books.
\begin{itemize}
\item M Reid, Undergraduate commutative algebra, 1995
\item M F Atiyah and I G Macdonald, Introduction to commutative algebra, 1969
\end{itemize}

The following is the structure of the course.
\begin{itemize}
\item Generalities on rings, such as ideals, and examples.
\item Localisation of rings between a ring $ R $ and the fraction field $ K $ of $ R $, such as $ \ZZ $ and $ \QQ $.
\item Finiteness conditions of Noetherian rings and Artinian rings.
\item Integral closure and normal rings, such as $ \ZZ\sbr{i} \subset \QQ\br{i} $ and $ \ZZ\sbr{\sqrt{-3}} \subset \ZZ\sbr{\tfrac{1 + \sqrt{-3}}{2}} \subset \QQ\br{\sqrt{-3}} $.
\item Discrete valuation rings.
\item Completion of rings with topology.
\end{itemize}

\pagebreak

\section{Rings and ideals}

\begin{definition}
A \textbf{commutative ring} is a set $ \br{A, +, \cdot, 0, 1} $ such that
\begin{enumerate}
\item $ \br{A, +, 0} $ is an abelian group,
\item for all $ x, y, z \in A $,
\begin{itemize}
\item $ \br{x \cdot y} \cdot z = x \cdot \br{y \cdot z} $,
\item $ x \cdot y = y \cdot x $,
\item $ x \cdot \br{y + z} = x \cdot y + x \cdot z $, and
\end{itemize}
\item for all $ x \in A $, $ x \cdot 1 = 1 \cdot x = x $.
\end{enumerate}
\end{definition}

\begin{remark}
\hfill
\begin{itemize}
\item One is uniquely determined by $ 3 $, since $ 1' = 1' \cdot 1 = 1 $.
\item If $ 1 = 0 $, then $ 0 = x \cdot 0 = x \cdot 1 = x $, since
$$ x \cdot 0 = x \cdot \br{0 + 0} = x \cdot 0 + x \cdot 0, $$
so $ x \cdot 0 = 0 $. So every element is zero. Hence $ R = \cbr{0} $.
\end{itemize}
\end{remark}

\begin{definition}
A \textbf{homomorphism of rings} $ f : A \to B $ is a map such that for all $ x, y \in A $,
$$ f\br{x + y} = f\br{x} + f\br{y}, \qquad f\br{xy} = f\br{x}f\br{y}, \qquad f\br{1} = 1. $$
\end{definition}

\begin{example*}
If $ A \subset B $ is closed under $ + $ and $ \cdot $, and $ 1 \in A $, then
$$ \function{A}{B}{x}{x} $$
is a homomorphism.
\end{example*}

\begin{remark}
\hfill
\begin{itemize}
\item A composition of homomorphisms is a homomorphism.
\item An \textbf{isomorphism} is a bijective homomorphism.
\end{itemize}
\end{remark}

\begin{definition}
A subset $ I $ of a ring $ A $ is an \textbf{ideal} if $ I $ is a subgroup of the additive group $ \br{A, +} $ which is closed under multiplication by elements of $ A $, so $ xI \subset I $ for any $ x \in A $. Sometimes this is written as $ I \triangleleft A $. In this case the \textbf{quotient group} $ A / I $ is naturally a ring, where $ \br{x + I}\br{y + I} $ is defined as $ xy + I $.
\end{definition}

\begin{proposition}
Let $ I $ be an ideal of a commutative ring $ A $. Then there is a natural bijection between the ideals $ J \subset A $ such that $ I \subset J $ and the ideals of $ A / I $.
\end{proposition}

\begin{proof}
Let
$$ \function{A}{A / I}{x}{x + I} $$
be the natural surjective map. Send $ J $ to its image under this map.
\end{proof}

\begin{definition}
If $ f : A \to B $ is a homomorphism, then
$$ \Ker f = \cbr{x \in A \st f\br{x} = 0} $$
is an ideal in $ A $, and
$$ \Im f = f\br{A} \cong A / \Ker f \subset B. $$
\end{definition}

\pagebreak

\section{Polynomials and formal power series}

\lecture{2}{Tuesday}{08/10/19}

\begin{definition}
Let $ R $ be a ring. The \textbf{polynomial ring} with coefficients in $ R $ is
$$ R\sbr{x} = \cbr{a_0 + \dots + a_nx^n \st a_i \in R, \ n \in \ZZ_{\ge 0}}. $$
The addition is coefficient-wise, and the multiplication is given by the formula
$$ \br{\sum_{i \ge 0} a_ix^i}\br{\sum_{j \ge 0} b_jx^j} = \sum_{i \ge 0} \br{\sum_{j + k = i, \ j \ge 0, \ k \ge 0} a_jb_k}x^i, $$
where all but finitely many coefficients are zero. Define
$$ R\sbr{x_1, \dots, x_n} = R\sbr{x_1} \dots \sbr{x_n} = \cbr{\sum_{i_1, \dots, i_n \ge 0} a_{i_1, \dots, i_n}x_1^{i_1} \dots x_n^{i_n} \st a_{i_1, \dots, i_n} \in R}, $$
where all but finitely many coefficients $ a_{i_1, \dots, i_n} $ are equal to zero.
\end{definition}

\begin{definition}
The \textbf{ring of formal power series} with coefficients in $ R $ is
$$ R\sbr{\sbr{t}} = \cbr{a_0 + a_1t + \dots \st a_i \in R}. $$
The addition is coefficient-wise, and the multiplication is given by the formula
$$ \br{\sum_{i \ge 0} a_it^i}\br{\sum_{j \ge 0} b_jt^j} = \sum_{i \ge 0} \br{\sum_{j + k = i, \ j \ge 0, \ k \ge 0} a_jb_k}x^i. $$
Define
$$ R\sbr{\sbr{t_1, \dots, t_n}} = R\sbr{\sbr{t_1}} \dots \sbr{\sbr{t_n}}. $$
\end{definition}

In $ R\sbr{\sbr{t}} $ many products equal one unlike in $ R\sbr{t} $, for example $ \br{1 - t}\br{1 + t + \dots} = 1 $.

\section{Zero-divisors, nilpotents, units}

\begin{definition}
Let $ A $ be a ring. An element $ x \in A $ is a \textbf{zero-divisor} if $ x \ne 0 $ but $ xy = 0 $ for some $ y \ne 0 $ in $ A $. A ring without zero-divisors is called an \textbf{integral domain}. An element $ x \in A $ is \textbf{nilpotent} if $ x^n = 0 $ for some $ n \in \ZZ_{> 0} $. A \textbf{unit} $ x \in A $ is an element such that $ xy = 1 $ for some $ y \in A $. The units of $ A $ form a group under multiplication, denoted by $ A^* $, or $ A^\times $.
\end{definition}

\begin{definition}
Let $ x \in A $. Then the set
$$ \abr{x} = \cbr{xy \st y \in A} $$
is an ideal. Such ideals are called \textbf{principal ideals}.
\end{definition}

\begin{remark*}
$ x \in A^* $ if and only if $ \abr{x} = A $, and $ R $ is a field if and only if $ R^* = R \setminus \cbr{0} $.
\end{remark*}

\begin{proposition}
Let $ A $ be a non-zero ring. Then the following are equivalent.
\begin{enumerate}
\item $ A $ is a field.
\item There are no ideals in $ A $ other than $ \abr{0} $ and $ A $.
\item Every non-zero homomorphism $ f : A \to B $ is injective.
\end{enumerate}
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}[leftmargin=0.5in]
\item[$ 1 \implies 2 $] Clear.
\item[$ 2 \implies 3 $] $ \Ker f \subset A $ is an ideal. Since $ f \ne 0 $, $ \Ker f \ne A $. Hence $ \Ker f = 0 $.
\item[$ 3 \implies 1 $] Take any $ x \ne 0 $ in $ A $. Look at $ \abr{x} $. Define $ B = A / \abr{x} $. Then take $ f : A \to B $ to be the natural surjective map. If $ f $ is not identically zero, we get a contradiction with $ 3 $.
\end{itemize}
\end{proof}

\pagebreak

\section{Prime ideals and maximal ideals}

\begin{definition}
An ideal $ I \subset A $ is called \textbf{prime} if $ I \ne A $ and if whenever $ xy \in I $, then $ x \in I $ or $ y \in I $. An ideal $ J \subset A $ is called \textbf{maximal} if there is no ideal $ J' $ such that $ J \subsetneq J' \subsetneq A $.
\end{definition}

\begin{notation*}
The set of prime ideals of $ A $ is called the \textbf{spectrum} of $ A $ and is denoted by $ \Spec A $.
\end{notation*}

\begin{lemma}
An ideal $ I \subset A $ is prime if and only if $ A / I $ is an integral domain.
\end{lemma}

\begin{proof}
Obvious.
\end{proof}

\begin{lemma}
An ideal $ J \subset A $ is maximal if and only if $ A / J $ is a field.
\end{lemma}

\begin{proof}
Obvious.
\end{proof}

\begin{proposition}
If $ f : A \to B $ is a ring homomorphism and $ I \subset B $ is a prime ideal, then $ f^{-1}\br{I} $ is a prime ideal of $ A $.
\end{proposition}

\begin{proof}
It is easy to see that $ f^{-1}\br{I} $ is an ideal in $ A $. Suppose $ xy \in f^{-1}\br{I} $ for some $ x, y \in A $. Then $ f\br{x}f\br{y} = f\br{xy} \in I $. Since $ I $ is prime, $ f\br{x} \in I $ or $ f\br{y} \in I $, so $ x \in f^{-1}\br{I} $ or $ y \in f^{-1}\br{I} $.
\end{proof}

So we get a canonical map
$$ \function[f^*]{\Spec B}{\Spec A}{I \subset B}{f^{-1}\br{I} \subset A}. $$

\lecture{3}{Wednesday}{09/10/19}

\begin{remark}
If $ f : A \to B $ is a ring homomorphism, then $ f^{-1}\br{\ppp} $, where $ \ppp \subset B $ is a prime ideal, is a prime ideal. But this is false for maximal ideals. Let $ A = \ZZ $, let $ B = \QQ $, and let $ f\br{x} = x $. Then $ \abr{0} \subset \QQ $ is a maximal ideal and $ f^{-1}\br{\abr{0}} = \abr{0} \subset \ZZ $ is not a maximal ideal. For example, $ \abr{0} \subsetneq \abr{2} \subsetneq \ZZ $.
\end{remark}

\begin{theorem}
\label{thm:4.6}
Let $ A $ be a non-zero ring. Then $ A $ has at least one maximal ideal. In particular, $ \Spec A $ is not empty.
\end{theorem}

The proof is based on Zorn's lemma. Let $ S $ be a set. Then a \textbf{partial order} is a binary relation $ \le $ such that
\begin{itemize}
\item $ x \le x $ for all $ x \in S $,
\item $ x \le y \le z $ implies that $ x \le z $, and
\item $ x \le y $ and $ y \le x $ imply that $ x = y $,
\end{itemize}
where not all pairs are comparable. A \textbf{chain} $ T \subset S $ is a subset in which every two elements are comparable.

\begin{lemma}[Zorn]
Suppose that $ S $ is a partially ordered set such that every chain $ T \subset S $ has an upper bound, that is an element $ t \in S $ such that $ x \le t $ for all $ x \in T $. Then $ S $ has a maximal element, that is there exists $ s \in S $ such that if $ x \in S $ and $ x \ge s $, then $ x = s $.
\end{lemma}

Zorn's lemma is equivalent to the axiom of choice.

\begin{proof}[Proof of Theorem \ref{thm:4.6}]
Let $ \Sigma $ be the set of all ideals of $ A $ which are not equal to $ A $. Then $ \abr{0} \in \Sigma $, so $ \Sigma \ne \emptyset $. Equip $ \Sigma $ with partial order given by inclusion. Enough to check the assumption of Zorn's lemma. Suppose $ T $ is a chain of ideals, so it is a collection of ideals $ J_i $ for $ i \in T $. Consider instead
$$ I = \bigcup_{i \in T} J_i. $$
Claim that $ T $ is a chain implies that $ I $ is an ideal. Then $ x \in I $ implies that $ x \in J_i $ for some $ i $. Take any $ x, y \in I $. Then $ x \in J_i $ and $ y \in J_k $ for some $ i, k \in T $, so $ T $ is a chain, hence $ i \le k $ or $ k \le i $, so $ J_i \subset J_k $ or $ J_k \subset J_i $. Without loss of generality assume $ J_i \subset J_k $. Then $ x, y \in J_k $, so $ x + y \in J_k \subset I $. Clearly, $ I $ is an upper bound.
\end{proof}

\pagebreak

\begin{corollary}
\label{cor:4.8}
Any ideal of $ A $ is contained in a maximal ideal of $ A $.
\end{corollary}

\begin{proof}
If $ I \subset A $ is an ideal, apply Theorem \ref{thm:4.6} to $ A / I $.
\end{proof}

\begin{corollary}
\label{cor:4.9}
Any non-unit of $ A $ is contained in a maximal ideal.
\end{corollary}

\begin{proof}
Apply Corollary \ref{cor:4.8} to $ \abr{a} $.
\end{proof}

\begin{example*}
The maximal ideals of $ \ZZ $ are $ \abr{p} $, where $ p $ is prime.
\end{example*}

\begin{definition}
A ring $ A $ is \textbf{local} if $ A $ has exactly one maximal ideal.
\end{definition}

\begin{example*}
Any field is a local ring. If $ k $ is a field, then $ k\sbr{\sbr{t}} $ is a local ring.
\end{example*}

\begin{lemma}[Prime avoidance]
Let $ A $ be a ring and let $ \ppp \subset A $ be a prime ideal. Suppose that $ I_1, \dots, I_n $ are ideals in $ A $ such that $ \bigcap_{j = 1}^n I_j \subset \ppp $. Then $ I_j \subset \ppp $ for some $ j $. If, moreover, $ \bigcap_{j = 1}^k I_j = \ppp $, then $ I_j = \ppp $ for some $ j $.
\end{lemma}

\begin{proof}
Suppose that $ I_j $ is not a subset of $ \ppp $ for any $ j $. Then there exists $ x_j \in I_j $ such that $ x_j \notin \ppp $. Hence
$$ x_1, \dots, x_n \in I_1 \dots I_n \subset \bigcap_{j = 1}^n I_j \subset \ppp, $$
so $ x_1\br{x_2 \dots x_n} \in \ppp $. Then $ x_1 \notin \ppp $ implies that $ x_2 \dots x_n \in \ppp $. Since $ \ppp $ is prime we get a contradiction. For the second claim, we know that some $ I_j \subset \ppp $. But $ \ppp = \bigcap_{j = 1}^k I_j \subset I_k $ for all $ k $. Hence $ \ppp = I_j $.
\end{proof}

\section{Nilradical and the Jacobson radical}

\lecture{4}{Thursday}{10/10/19}

\begin{proposition}
The set $ \NNN\br{A} $ consisting of all nilpotents of the ring $ A $ and zero is an ideal. Then $ \NNN\br{A} $ is called the \textbf{nilradical} of $ A $. The quotient $ A / \NNN\br{A} $ has no nilpotents.
\end{proposition}

\begin{proof}
Suppose $ x \in A $ is nilpotent, so $ x^n = 0 $. For any $ a \in A $, $ \br{ax}^n = a^nx^n = 0 $. Let $ x $ and $ y $ be nilpotents. Say $ x^n = y^m = 0 $. Then
$$ \br{x + y}^{n + m} = \sum_{i, j \ge 0, \ i + j = n + m} a_{ij}x^iy^j, \qquad a_{ij} \in A. $$
Clearly, either $ i \ge n $ or $ j \ge m $. Then $ a_{ij}x^iy^j = 0 $. Therefore, $ \br{x + y}^{n + m} = 0 $, hence $ x + y \in \NNN\br{A} $. If $ x + \NNN\br{A} $ is nilpotent in $ A / \NNN\br{A} $, then $ x^n + \NNN\br{A} = \NNN\br{A} $ is the trivial coset. Hence $ x^n \in \NNN\br{A} $. Thus $ \br{x^n}^m = 0 $ for some $ m $.
\end{proof}

\begin{definition}
A ring $ A $ such that $ \NNN\br{A} = 0 $ is called a \textbf{reduced ring}.
\end{definition}

\begin{proposition}
\label{prop:5.3}
$ \NNN\br{A} $ is the intersection of all prime ideals of $ A $.
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}
\item[$ \subset $] Let $ I $ be the intersection of all prime ideals of $ A $. Let $ f \in A $ be such that $ f^n = 0 $. Take any prime ideal $ \ppp \subset A $. We know that $ f^n = 0 \in \ppp $. Then $ f\br{f \dots f} \in \ppp $ and $ \ppp $ prime implies that $ f \in \ppp $, so $ f \in I $.
\item[$ \supset $] Let us prove the converse. Suppose $ f $ is not nilpotent, so $ f^n \ne 0 $ for all $ n \ge 1 $. We will show that there exists a prime ideal $ \ppp \subset A $ that does not contain $ f $. Let us consider all ideals of $ A $ that do not contain $ f^m $, where $ m \in \ZZ_{> 0} $. Let $ \Sigma $ be the set of ideals $ J \subset A $ such that
$$ J \cap \cbr{f^m \st m \ge 1} = \emptyset. $$
The zero ideal $ \abr{0} $ is in $ \Sigma $. So $ \Sigma \ne \emptyset $. Equip $ \Sigma $ with a partial order given by inclusion. Applying Zorn's lemma we obtain that $ \Sigma $ contains a maximal element. Call it $ \ppp $. By construction, $ \ppp \cap \cbr{f^m \st m \ge 1} = \emptyset $, so $ f \notin \ppp $. It remains to prove that $ \ppp $ is prime. Enough to prove that if $ x \notin \ppp $ and $ y \notin \ppp $, then $ xy \notin \ppp $. Consider the ideal $ \ppp + \abr{x} \supsetneq \ppp $. Since $ \ppp $ is maximal in $ \Sigma $, thus $ \ppp + \abr{x} $ is not in $ \Sigma $. By definition of $ \Sigma $ there exists $ n \ge 1 $ such that $ f^n \in \ppp + \abr{x} $. Similarly, there exists $ m \ge 1 $ such that $ f^m \in \ppp + \abr{y} $. Then $ \br{\ppp + \abr{x}}\br{\ppp + \abr{y}} \subset \ppp + \abr{xy} $. In particular, $ f^{n + m} = f^n \cdot f^m \in \ppp + \abr{xy} $. If $ xy \in \ppp $, then $ f^{n + m} \in \ppp $, which is not possible. Therefore, $ xy \notin \ppp $. So $ \ppp $ is a prime ideal that does not contain $ f $.
\end{itemize}
\end{proof}

\pagebreak

\begin{definition}
The \textbf{Jacobson radical} $ \JJJ\br{A} $ is the intersection of all maximal ideals of $ A $.
\end{definition}

\begin{proposition}
$ x \in \JJJ\br{A} $ if and only if $ 1 - xy \in A^* $ for all $ y \in A $.
\end{proposition}

\begin{proof}
\hfill
\begin{itemize}
\item[$ \implies $] Let $ x \in \JJJ\br{A} $. Suppose there exists $ y \in A $ such that $ 1 - xy $ is not a unit. By Corollary \ref{cor:4.9} every non-unit is contained in a maximal ideal. Say $ M \subset A $ is a maximal ideal and $ 1 - xy \in M $. But $ x \in \JJJ\br{A} \subset M $. Then $ 1 = \br{1 - xy} + xy \in M $, but then $ M \ne A $. A contradiction.
\item[$ \impliedby $] Given $ x \in A $ such that $ 1 - xy \in A^* $ for all $ y \in A $, we must have $ x \in \JJJ\br{A} $. If $ x \notin \JJJ\br{A} $, then there exists a maximal ideal $ M \subset A $ such that $ x \notin M $. Then $ M + \abr{x} = A \ni 1 $. Thus $ 1 = m + xy $, where $ y \in A $. But by assumption $ 1 - xy \in A^* $, so $ m \in A^* $. But then $ M = A $. A contradiction.
\end{itemize}
\end{proof}

\begin{definition}
Let $ I $ be an ideal of $ A $. The \textbf{radical} of $ I $ is the set
$$ \rad I = \cbr{x \in A \st \exists n \ge 1, \ x^n \in I}. $$
\end{definition}

\begin{proposition}
The radical of $ I $ is the intersection of all prime ideals of $ A $ that contain $ I $.
\end{proposition}

\begin{proof}
Apply Proposition \ref{prop:5.3} to $ A / I $.
\end{proof}

\lecture{5}{Tuesday}{15/10/19}

\begin{definition}
Let $ I $ be an indexing set. For each $ i \in I $ we are given a ring $ R_i $. Consider the product set $ \prod_{i \in I} R_i $. This is $ \br{x_i}_{i \in I} $ for $ x_i \in R_i $. Define
$$ 0 = \br{0}_{i \in I} \in \prod_{i \in I} R_i, \qquad 1 = \br{1}_{i \in I} \in \prod_{i \in I} R_i. $$
Define addition and multiplication coordinate-wise, so
$$ \br{a_i}_{i \in I} + \br{b_i}_{i \in I} = \br{a_i + b_i}_{i \in I}, \qquad \br{a_i}_{i \in I} \cdot \br{b_i}_{i \in I} = \br{a_i \cdot b_i}_{i \in I}, \qquad \br{a_i}_{i \in I}, \br{b_i}_{i \in I} \in \prod_{i \in I} R_i. $$
Then $ \prod_{i \in I} R_i $ is a ring, the \textbf{product of rings}.
\end{definition}

A warning is if $ I $ has at least two elements, then $ \prod_{i \in I} R_i $ has zero-divisors.

\begin{example*}
$ R_1 \times R_2 $ has $ \br{1, 0} \cdot \br{0, 1} = \br{0, 0} = 0 $.
\end{example*}

If $ h_i : R \to R_i $ is a ring homomorphism for $ i \in I $, then $ \br{h_i}_{i \in I} $ is a ring homomorphism $ R \to \prod_{i \in I} R_i $.

\begin{remark}
Let $ \ppp_i $ for $ i \in I $ be all prime ideals of $ R $. Let $ h_i : R \to R / \ppp_i $. Then
$$ h = \br{h_i}_{i \in I} : R \to \prod_{i \in I} R / \ppp_i $$
is a homomorphism, and
$$ \Ker h = \bigcap_{i \in I} \Ker h_i = \bigcap_{i \in I} \ppp_i = \NNN\br{R}. $$
So there is an injective map
$$ R / \NNN\br{R} \hookrightarrow \prod_{i \in I} R / \ppp_i, $$
a product of integral domains. Now take $ f_j : R \to R / M_j $, so if we take the indexing set $ J $ to be the set of all maximal ideals of $ R $, then we obtain an injective map
$$ R / \JJJ\br{R} \hookrightarrow \prod_{j \in J} R / M_j, $$
a product of fields.
\end{remark}

\pagebreak

\section{Localisation of rings}

\begin{example*}
Fix a prime $ p $. Then
$$ \ZZ \subset \cbr{\dfrac{m}{p^k} \st m \in \ZZ, \ k \in \ZZ_{\ge 0}} \subset \QQ. $$
\end{example*}

\begin{definition}
A subset $ S $ of a ring $ A $ is called a \textbf{multiplicative set} if $ 1 \in S $ and $ 0 \notin S $, and $ S $ is closed under multiplication.
\end{definition}

\begin{example}
\hfill
\begin{itemize}
\item Let $ a \in A $ be a non-nilpotent. Then $ \cbr{1, a, \dots} $ is a multiplicative set.
\item Let $ \ppp \subsetneq A $ be a prime ideal. Then $ A \setminus \ppp $ is a multiplicative set. Indeed, if $ x \notin \ppp $ and $ y \notin \ppp $ then $ xy \notin \ppp $ by the definition of a prime ideal.
\item If we have a family $ \ppp_i $ for $ i \in I $ of prime ideals, then $ A \setminus \bigcup_{i \in I} \ppp_i $ is a multiplicative set.
\item $ A^* $ is a multiplicative set.
\item All non-zero-divisors in $ A $ form a multiplicative set.
\item Let $ I \subsetneq A $ be an ideal. Then $ 1 + I = \cbr{1 + x \st x \in I} $ is a multiplicative set.
\end{itemize}
\end{example}

\begin{definition}
Consider $ A \times S $ and the equivalence relation on $ A \times S $ defined as
$$ \br{a, s} \sim \br{b, t} \qquad \iff \qquad \exists u \in S, \ u\br{at - bs} = 0. $$
Check that this is indeed an equivalence relation. \footnote{Exercise} The following is some notation.
\begin{itemize}
\item The equivalence class of $ \br{a, s} $ is written as $ a / s $. For example, if $ t \in S $, then $ a / s = at / st $.
\item The set of equivalence classes is denoted by $ S^{-1}A $.
\end{itemize}
Define
$$ \dfrac{a}{s} + \dfrac{b}{t} = \dfrac{at + bs}{st}, \qquad \dfrac{a}{s} \cdot \dfrac{b}{t} = \dfrac{ab}{st}. $$
Need to check that these operations are well-defined. \footnote{Exercise} Define $ \tfrac{0}{1} $ as the zero of $ S^{-1}A $, and $ \tfrac{1}{1} $ as the one of $ S^{-1}A $. Then $ S^{-1}A $ is a ring, the \textbf{localisation of $ A $ with respect to a multiplicative set $ S $}.
\end{definition}

\begin{lemma}
There is a ring homomorphism
$$ \function[f]{A}{S^{-1}A}{x}{\dfrac{x}{1}}. $$
This $ f $ is injective if and only if $ S $ has no zero-divisors.
\end{lemma}

\begin{proof}
If $ S $ contains a zero-divisor, say $ u $, then there exists $ a \in A $ for $ a \ne 0 $ such that $ ua = 0 $. Then
$$ f\br{a} = \dfrac{a}{1} = \dfrac{au}{u} = \dfrac{0}{u} = 0. $$
So $ \Ker f $ contains $ a $, hence $ f $ is not injective. If $ f $ has no zero-divisors, then $ u \cdot a = u\br{a - 0} \ne 0 $ if $ a \ne 0 $ and any $ u \in S $. Hence $ f\br{a} \ne 0 $.
\end{proof}

\lecture{6}{Thursday}{16/10/19}

If $ A $ is an integral domain, then $ \Ker f = 0 $. So $ A \hookrightarrow S^{-1}A $.

\pagebreak

\begin{example*}
Let $ R = \ZZ $.
\begin{itemize}
\item If $ S = \cbr{1, a, \dots} $, then
$$ S^{-1}\ZZ = \cbr{\dfrac{n}{a^m} \st n \in \ZZ, \ m \in \ZZ_{\ge 0}}. $$
\item If $ S = \ZZ \setminus p\ZZ $, then
$$ S^{-1}\ZZ = \cbr{\dfrac{n}{m} \st p \nmid m}. $$
\item If $ S = \ZZ \setminus \bigcup_{p_i \ \text{prime}} p_i\ZZ $, then
$$ S^{-1}\ZZ = \cbr{\dfrac{n}{m} \st p_i \nmid m}. $$
\item If $ S = \ZZ^* = \cbr{\pm 1} $, then $ S^{-1}\ZZ = \ZZ $.
\item If $ S = \cbr{\text{all non-zero elements}} $, then $ S^{-1}\ZZ = \QQ $.
\item If $ S = \cbr{1 + I \st I \subset \ZZ \ \text{ideal}} = \cbr{1 + nk \st k \in \ZZ} $, then
$$ S^{-1}\ZZ = \cbr{\dfrac{m}{1 + nk} \st m, k \in \ZZ}, $$
where $ n $ is fixed.
\end{itemize}
\end{example*}

\begin{example*}
Let $ R = k\sbr{x} $, where $ k $ is a field.
\begin{itemize}
\item If $ S = k\sbr{x}^* = k^* $, then $ S^{-1}k\sbr{x} = k\sbr{x} $.
\item If $ S = \cbr{\text{all non-zero elements}} $, then
$$ S^{-1}k\sbr{x} = k\br{x} = \cbr{\dfrac{f\br{x}}{g\br{x}} \st g\br{x} \ \text{arbitrary non-zero polynomial}}. $$
\end{itemize}
\end{example*}

\begin{example}
Let $ k $ be a field, and let $ A = k\sbr{x, y} / \abr{xy} $. Note that $ A $ has zero-divisors, since $ xy = 0 $ in $ A $, but $ x \ne 0 $ in $ A $ and $ y \ne 0 $ in $ A $. Then $ S = \cbr{1, x, \dots} $ is a multiplicative set, since $ x^n \ne 0 $ in $ A $ for $ n = 1, 2, \dots $, because no power of the polynomial $ x $ is in $ \abr{xy} $. What is $ S^{-1}A $? Let $ f : A \to S^{-1}A $. Then $ a \in \Ker f $ if and only if $ a / 1 = 0 / 1 $, if and only if $ u \cdot \br{a \cdot 1 - 0 \cdot 1} = 0 $ for some $ u \in S $, if and only if $ ua = 0 $. Let $ a \ne 0 $. Then $ u = 1 $ is not interesting. Take $ u = x $ and $ a = y $, then $ xy = 0 $, hence $ y \in \Ker f $. Then $ f $ is a homomorphism, hence $ \Ker f $ is an ideal. So $ \abr{y} = yA \subset \Ker f $. In general,
$$ a = \sum_{i, j \ge 0} a_{ij}x^iy^j \equiv a_{00} + \sum_{i \ge 1} a_{i0}x^i + \sum_{j \ge 1} a_{0j}y^j \mod \abr{xy}. $$
Then $ \Ker f = yA = \abr{y} $, since $ \sum_{j \ge 1} a_{0j}y^j $ goes to zero, since it is annihilated by $ x $, and $ x^n \cdot \sum_{i \ge 0} a_ix^i $ is never zero in $ A $. Thus $ f\br{A} = k\sbr{x} $, and
$$ S^{-1}A = \cbr{\dfrac{f\br{x}}{x^n} \st f\br{x} \in k\sbr{x}, \ n \ge 0} = k\sbr{x, x^{-1}} = \cbr{\sum_{i \in \ZZ, \ a_i = 0 \ \text{for almost all} \ i} a_ix^i \st a_i \in k}. $$
\end{example}

\lecture{7}{Thursday}{17/10/19}

\begin{lemma}[Universal property of localisation]
Let $ A $ be a ring, and $ S \subset A $ a multiplicative set. Let $ g : A \to B $ be a ring homomorphism such that $ g\br{s} $ is a unit in $ B $ for all $ s \in S $. Then there exists a unique ring homomorphism $ h : S^{-1}A \to B $ such that $ g = h \circ f $ where $ f : A \to S^{-1}A $ is the canonical map, so
$$
\begin{tikzcd}
A \arrow[swap]{d}{f} \arrow{dr}{g} & \\
S^{-1}A \arrow[swap]{r}{\exists !h} & B
\end{tikzcd}.
$$
\end{lemma}

\pagebreak

\begin{proof}
Define
$$ \function[h]{S^{-1}A}{B}{\dfrac{a}{s}}{\dfrac{g\br{a}}{g\br{s}}}, \qquad a \in A, \qquad s \in S. $$
This is well-defined, that is if $ a / s = b / t $ then $ g\br{a}g\br{s}^{-1} = g\br{b}g\br{t}^{-1} $. \footnote{Exercise} This is a ring homomorphism. \footnote{Exercise} Now easy to check that
$$ \br{h \circ f}\br{a} = h\br{\dfrac{a}{1}} = \dfrac{g\br{a}}{g\br{1}} = \dfrac{g\br{a}}{1} = g\br{a}, \qquad a \in A. $$
Moreover, if $ h' : S^{-1}A \to B $ and $ g = h' \circ f $ then for all $ a \in A $ we have $ \br{h' \circ f}\br{a} = g\br{a} $. Since $ h' $ is a ring homomorphism, for all $ s \in S $, $ h'\br{1 / s} = 1 / h'\br{s / 1} = 1 / g\br{s} $. Hence
$$ h'\br{\dfrac{a}{s}} = h'\br{\dfrac{a}{1}}h'\br{\dfrac{1}{s}} = \dfrac{h'\br{f\br{a}}}{h'\br{f\br{s}}} = \dfrac{g\br{a}}{g\br{s}} = h\br{\dfrac{a}{s}}. $$
\end{proof}

For all ideal $ I \subseteq A $, set
$$ S^{-1}I = \cbr{\dfrac{i}{s} \in S^{-1}A \st i \in I, \ s \in S}, $$
the ideal of $ S^{-1}A $ generated by $ f\br{I} $.

\begin{proposition}
Let $ S \subset A $ be a multiplicative subset, and let $ I_1, \dots, I_n $ be ideals of $ A $. Then
\begin{enumerate}
\item $ S^{-1}\br{I_1 + \dots + I_n} = S^{-1}I_1 + \dots + S^{-1}I_n $,
\item $ S^{-1}\br{I_1 \cdot \dots \cdot I_n} = S^{-1}I_1 \cdot \dots \cdot S^{-1}I_n $,
\item $ S^{-1}\br{\bigcap_{i = 1}^n I_i} = \bigcap_{j = 1}^n S^{-1}I_j $, and
\item $ S^{-1}\br{\rad I} = \rad S^{-1}I $ for every ideal $ I $.
\end{enumerate}
\end{proposition}

\begin{proof}
Exercise. \footnote{Exercise}
\end{proof}

There is a map
$$ \cbr{\text{ideals} \ I \ \text{of} \ A} \to \cbr{\text{ideals} \ S^{-1}I \ \text{of} \ S^{-1}A}. $$

\begin{proposition}
Every ideal of $ S^{-1}A $ is of the form $ S^{-1}I $ for some ideal $ I \subseteq A $.
\end{proposition}

\begin{proof}
Let $ J $ be any ideal of $ S^{-1}A $. Define $ I = f^{-1}A $. Know $ I $ is an ideal of $ A $. Claim that $ J = S^{-1}I $. Say $ a / s \in J $. Since $ J $ is an ideal, $ s\br{a / s} \in J $, so $ a / 1 \in J $, so $ a \in I $. Hence $ a / s \in S^{-1}I $. So $ J \subseteq S^{-1}I $. Conversely, $ f\br{I} = f\br{f^{-1}\br{J}} \subseteq J $. Thus $ S^{-1}I \subseteq J $.
\end{proof}

\begin{theorem}
\label{thm:6.9}
The only prime ideals of $ S^{-1}A $ are of the form $ S^{-1}\ppp $ where $ \ppp $ is a prime ideal of $ A $ such that $ \ppp \cap S = \emptyset $. Hence there is a bijection
$$ \correspondence{\text{prime ideals of} \ S^{-1}A}{\text{prime ideals of} \ A \ \text{that do not intersect} \ S}. $$
\end{theorem}

\begin{proof}
Prove $ S^{-1}\ppp $ is prime if $ \ppp $ is prime and $ \ppp \cap S = \emptyset $. Say $ a / s \cdot b / t \in S^{-1}\ppp $ for $ a / s, b / t \in S^{-1}A $. This implies $ v\br{abu - cst} = 0 $ for some $ u, v \in S $ and $ c \in \ppp $. Hence $ abuv = cstv \in \ppp $, so $ ab \in \ppp $, as $ u $ and $ v $ are units, so $ a \in \ppp $ or $ b \in \ppp $. Hence $ S^{-1}\ppp $ is prime. Next note that $ f^{-1}\br{S^{-1}\ppp} = \ppp $, assuming $ \ppp \cap S = \emptyset $. For if $ a \in A $ lies in $ S^{-1}\ppp $ then by definition there exists $ s \in S $ such that $ sa \in \ppp $. Then $ s $ is a unit and so $ a \in \ppp $. Hence $ \ppp $ is uniquely determined by $ S^{-1}\ppp $. Now let $ \qqq $ be an arbitrary prime ideal of $ S^{-1}A $. Then certainly $ \qqq = S^{-1}I $ for $ I = f^{-1}\br{\qqq} $. But the preimage of a prime ideal is prime. So $ I $ is prime. Moreover, $ I \cap S = \emptyset $ as no $ s \in S $ is in $ \qqq $, since $ \qqq $ is prime, so $ \qqq $ contains no units.
\end{proof}

\pagebreak

\section{\texorpdfstring{$ \Spec R $}{Spec R} as a topological space}

\lecture{8}{Tuesday}{22/10/19}

A set $ X $ with a collection $ \UUU $ of subsets $ U \subset X $ is called a \textbf{topological space} if the following properties hold.
\begin{enumerate}
\item $ \UUU $ contains $ \emptyset $ and $ X $.
\item If $ U $ and $ U' $ are in $ \UUU $, then $ U \cap U' $ is in $ \UUU $.
\item If $ U_i $ are in $ \UUU $, where $ i $ is an element of an indexing set $ S $, then $ \bigcup_{i \in S} U_i $ is in $ \UUU $.
\end{enumerate}
Then the elements of $ \UUU $ are called \textbf{open subsets} of $ X $. The following is an equivalent definition. A set $ X $ with a family $ \VVV $ of subsets $ V \subset X $ is called a \textbf{topological space} if the following properties hold.
\begin{enumerate}
\item $ \VVV $ contains $ \emptyset $ and $ X $.
\item If $ V $ and $ V' $ are in $ \VVV $, then $ V \cup V' $ is in $ \VVV $.
\item If $ V_i $ are in $ \VVV $, where $ i $ is an element of an indexing set $ S $, then $ \bigcap_{i \in S} V_i $ is in $ \VVV $.
\end{enumerate}
Then the elements of $ \UUU $ are called \textbf{closed subsets} of $ X $. For the equivalence, if $ U $ is in $ \UUU $, then define the closed subsets as $ X \setminus U $ for $ U $ in $ \UUU $, and vice versa. Let $ R $ be a ring with unity. Let $ I \subset R $ be an ideal. Let $ \V_I $ be the set of all prime ideals in $ R $ that contain $ I $. Define $ \U_I = \Spec R \setminus \V_I $.

\begin{proposition}
The collection of subsets $ \V_I \subset \Spec R $, for all ideals $ I \subset R $, satisfies $ 1 $, $ 2 $, $ 3 $ of closed subsets, hence defines a topology on $ \Spec R $.
\end{proposition}

\begin{proof}
\hfill
\begin{enumerate}
\item If $ I = 0 $ is the zero ideal, then $ \V_0 = \Spec R $, all prime ideals of $ R $. If $ I = R $, then no prime ideals of $ R $ contain $ R $, so $ \V_R = \emptyset $, so $ 1 $ holds.
\item It is enough to check that $ \V_I \cup \V_J = \V_{IJ} = \V_{I \cap J} $. Note that $ IJ \subset I \cap J $. An element of $ \V_I $ is a prime ideal $ \ppp \supset I $, so $ \ppp \supset IJ $. Conversely, let $ \ppp $ be a prime ideal such that $ IJ \subset \ppp $. Claim that $ I \subset \ppp $ or $ J \subset \ppp $. Suppose not. Then there exists $ x \in I $ such that $ x \notin \ppp $ and there exists $ y \in J $ such that $ y \notin \ppp $. Then $ xy \in IJ \subset \ppp $. This contradicts the definition of prime ideals. So the claim is proved. Thus $ 2 $ holds.
\item $ J_i $ for $ i \in S $ is a collection of ideals. Claim that $ \bigcap_{i \in S} \V_{J_i} = \V_J $, where $ J = \sum_{i \in S} J_i $ is the smallest ideal of $ R $ containing all $ J_i $ for $ i \in S $. The elements of $ J $ are finite sums, where each summand is in some $ J_i $. If $ \ppp \supset J_i $ for $ i \in S $, then $ \ppp \supset J $. Conversely, if $ \ppp \supset J \supset J_i $, then $ \ppp \supset J_i $ for all $ i \in S $.
\end{enumerate}
\end{proof}

Recall that if $ f : A \to B $ is a homomorphism of rings, then $ f^* : \Spec B \to \Spec A $ sends any prime ideal $ \ppp \subset B $ to the inverse image $ f^{-1}\br{\ppp} $, which is a prime ideal in $ A $. This breaks down for maximal ideals.

\begin{example*}
Take $ f : \ZZ \to \QQ $, then $ f^{-1}\br{0} = 0 $, which is not maximal in $ \ZZ $.
\end{example*}

A map of topological spaces is \textbf{continuous} if the inverse image of any open set is open. Equivalently, the inverse images of closed sets are closed.

\begin{proposition}
$ f^* $ is a continuous map.
\end{proposition}

\begin{proof}
Let $ I $ be an ideal in $ A $. We need to show that $ \br{f^*}^{-1}\br{\V_I} = \V_J $ for some ideal $ J $ in $ B $. Let $ J $ be the smallest ideal in $ B $ containing $ f\br{I} $.
\begin{itemize}
\item[$ \subset $] Fix $ \ppp $ in $ \V_I $, a prime ideal in $ A $ such that $ \ppp \supset I $. The elements of the left hand side that are mapped to $ \ppp $ by $ f^* $ are the prime ideals $ \qqq \subset B $ such that $ \ppp = f^{-1}\br{\qqq} $. We have $ I \subset \ppp $, so $ f\br{I} \subset f\br{\ppp} \subset \qqq $, so $ J \subset \qqq $, by definition of $ J $.
\item[$ \supset $] Take any prime ideal $ \qqq \subset B $ such that $ J \subset \qqq $. We have $ I \subset f^{-1}\br{f\br{I}} \subset f^{-1}\br{J} \subset f^{-1}\br{\qqq} $, so $ f^{-1}\br{\qqq} $ is a prime ideal in $ A $ containing $ I $. This ideal is exactly $ f^*\br{\qqq} $, so $ f^*\br{\qqq} $ is in $ \V_I $. Since $ \qqq \in \br{f^*}^{-1}\br{f^*\br{\qqq}} \subset \br{f^*}^{-1}\br{\V_I} $, so we are done.
\end{itemize}
\end{proof}

\end{document}